<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Joel Seguí">
<meta name="author" content="Saúl Gil">
<meta name="author" content="Pedro Peñalver">
<meta name="description" content="Vamos a analizar el mercado de la vivienda y comprarlo con su accesibilidad de los jóvenes">
<title>Vivienda en España - VIVIENDA EN ESPAÑA</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./imagenes/my_favicon.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": true,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "Sin resultados",
    "search-matching-documents-text": "documentos encontrados",
    "search-copy-link-title": "Copiar el enlace en la búsqueda",
    "search-hide-matches-text": "Ocultar resultados adicionales",
    "search-more-match-text": "resultado adicional en este documento",
    "search-more-matches-text": "resultados adicionales en este documento",
    "search-clear-button-title": "Borrar",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar"
  }
}</script><style>html{ scroll-behavior: smooth; }</style>
<style>

      .quarto-title-block .quarto-title-banner h1,
      .quarto-title-block .quarto-title-banner h2,
      .quarto-title-block .quarto-title-banner h3,
      .quarto-title-block .quarto-title-banner h4,
      .quarto-title-block .quarto-title-banner h5,
      .quarto-title-block .quarto-title-banner h6
      {
        color: lightgrey;
      }

      .quarto-title-block .quarto-title-banner {
        color: lightgrey;
      }
</style>
<script src="site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script><script src="site_libs/plotly-binding-4.10.3/plotly.js"></script><script src="site_libs/typedarray-0.1/typedarray.min.js"></script><script src="site_libs/jquery-3.5.1/jquery.min.js"></script><link href="site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script><link rel="stylesheet" href="my_styles.css">
</head>
<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./my_favicon.png" alt="" class="navbar-logo"></a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Vivienda en España</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Buscar"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Navegación de palanca" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item compact">
    <a class="nav-link" href="./index.html" rel="" target=""><i class="bi bi-house-door" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
<ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item">
    <a class="nav-link active" href="./my_trabajo_BigData.html" rel="" target="" aria-current="page">
 <span class="menu-text">Trabajo en equipo</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./my_slides_BigData.html" rel="" target="_blank">
 <span class="menu-text">Slides</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:josefar@alumni.uv.es" rel="" target=""><i class="bi bi-envelope" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
<div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><header id="title-block-header" class="quarto-title-block default page-columns page-full"><div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-page-left">
      <div class="quarto-title-block"><div><h1 class="title">VIVIENDA EN ESPAÑA</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Código</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Mostrar todo el código</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Ocultar todo el código</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">Ver el código fuente</a></li></ul></div></div>
                  <div>
        <div class="description">
          <p>Vamos a analizar el mercado de la vivienda y comprarlo con su accesibilidad de los jóvenes</p>
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Trabajo BigData</div>
                <div class="quarto-category">Vivienda</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Autores/as</div>
      <div class="quarto-title-meta-contents">
               <p>Joel Seguí </p>
               <p>Saúl Gil </p>
               <p>Pedro Peñalver </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Fecha de publicación</div>
      <div class="quarto-title-meta-contents">
        <p class="date">20 de diciembre de 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Índice</h2>
   
  <ul>
<li><a href="#introducci%C3%B3n" id="toc-introducción" class="nav-link active" data-scroll-target="#introducci%C3%B3n">Introducción</a></li>
  <li><a href="#datos-del-trabajo" id="toc-datos-del-trabajo" class="nav-link" data-scroll-target="#datos-del-trabajo">Datos del trabajo</a></li>
  <li>
<a href="#evoluci%C3%B3n-de-la-renta-neta-por-edad" id="toc-evolución-de-la-renta-neta-por-edad" class="nav-link" data-scroll-target="#evoluci%C3%B3n-de-la-renta-neta-por-edad">Evolución de la renta neta por edad</a>
  <ul class="collapse">
<li><a href="#porcentaje-de-parados-seg%C3%BAn-la-edad" id="toc-porcentaje-de-parados-según-la-edad" class="nav-link" data-scroll-target="#porcentaje-de-parados-seg%C3%BAn-la-edad">Porcentaje de parados según la edad</a></li>
  <li><a href="#porcentaje-de-contratos-de-jornada-completa-por-edad" id="toc-porcentaje-de-contratos-de-jornada-completa-por-edad" class="nav-link" data-scroll-target="#porcentaje-de-contratos-de-jornada-completa-por-edad">Porcentaje de contratos de Jornada completa por edad</a></li>
  </ul>
</li>
  <li><a href="#%C3%ADndice-del-nivel-de-precios-de-la-vivienda-a-nivel-nacional" id="toc-índice-del-nivel-de-precios-de-la-vivienda-a-nivel-nacional" class="nav-link" data-scroll-target="#%C3%ADndice-del-nivel-de-precios-de-la-vivienda-a-nivel-nacional">Índice del nivel de Precios de la vivienda a nivel nacional</a></li>
  <li><a href="#r%C3%A9gimen-de-viviendas-de-16-a-29-a%C3%B1os" id="toc-régimen-de-viviendas-de-16-a-29-años" class="nav-link" data-scroll-target="#r%C3%A9gimen-de-viviendas-de-16-a-29-a%C3%B1os">Régimen de viviendas de 16 a 29 años</a></li>
  <li><a href="#otros-gr%C3%A1ficos-bonitos-pero-poco-%C3%BAtiles-sobre-el-salario" id="toc-otros-gráficos-bonitos-pero-poco-útiles-sobre-el-salario" class="nav-link" data-scroll-target="#otros-gr%C3%A1ficos-bonitos-pero-poco-%C3%BAtiles-sobre-el-salario">Otros gráficos bonitos pero poco útiles sobre el salario</a></li>
  <li><a href="#conclusiones" id="toc-conclusiones" class="nav-link" data-scroll-target="#conclusiones">Conclusiones:</a></li>
  <li><a href="#mas-informaci%C3%B3n-sobre-el-tema" id="toc-mas-información-sobre-el-tema" class="nav-link" data-scroll-target="#mas-informaci%C3%B3n-sobre-el-tema">Mas información sobre el tema</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block column-page-left" id="quarto-document-content"><section id="introducción" class="level1"><h1>Introducción</h1>
<p>El objetivo de este trabajo es analizar la situación en la que se encuentran los jóvenes a la hora de acceder al mercado laboral. Para ello analizaremos diferentes métricas entre las que se encuentran: Evolución de los niveles de precios de la vivienda a nivel nacional y autonómico, comparación de esta con la de los salarios reales…</p>
<p>De esta manera constataremos las dificultades a alas que se enfrentan los jóvenes españoles para emanciparse. También extraeremos conclusiones sobre si es así en todo el país o si por el contrario hay diferencias según el área geográfica.</p>
</section><section id="datos-del-trabajo" class="level1"><h1>Datos del trabajo</h1>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Datos</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Código</a></li>
</ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>Vamos a utilizar datos de los paquetes <code>pxR</code> <i>(ine)</i>, <code>eurostat</code> además de proveedores de datos externos.</p>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell" data-layout-align="center">
<details open=""><summary>Código</summary><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co">#Paquetes Preliminares</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(pxR)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(data.table)</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">library</span>(rlist)</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="fu">library</span>(fs)</span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="fu">library</span>(curl)</span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="fu">library</span>(rio)</span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="fu">library</span>(downloader)</span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="fu">library</span>(writexl)</span>
<span id="cb1-12"><a href="#cb1-12"></a></span>
<span id="cb1-13"><a href="#cb1-13"></a><span class="co">#-------------------Creamos una carpeta para guardar los datos------------------</span></span>
<span id="cb1-14"><a href="#cb1-14"></a></span>
<span id="cb1-15"><a href="#cb1-15"></a><span class="fu">dir_create</span>(<span class="st">"./docs/datos"</span>)</span>
<span id="cb1-16"><a href="#cb1-16"></a></span>
<span id="cb1-17"><a href="#cb1-17"></a><span class="co">#Descargamos los datos y los exportamos sin pulir: </span></span>
<span id="cb1-18"><a href="#cb1-18"></a></span>
<span id="cb1-19"><a href="#cb1-19"></a><span class="co">#---------------------Índice de Precios de Vivienda-----------------------------</span></span>
<span id="cb1-20"><a href="#cb1-20"></a></span>
<span id="cb1-21"><a href="#cb1-21"></a>url <span class="ot">&lt;-</span> <span class="st">"https://www.ine.es/jaxiT3/files/t/es/px/25171.px?nocab=1"</span></span>
<span id="cb1-22"><a href="#cb1-22"></a>aa <span class="ot">&lt;-</span> <span class="fu">read.px</span>(url)</span>
<span id="cb1-23"><a href="#cb1-23"></a></span>
<span id="cb1-24"><a href="#cb1-24"></a><span class="co">#Lo convertimos a CSV para simplificar y creamos un dataframe</span></span>
<span id="cb1-25"><a href="#cb1-25"></a></span>
<span id="cb1-26"><a href="#cb1-26"></a><span class="fu">write.csv</span>(aa, <span class="at">file =</span> <span class="st">"data.csv"</span>, <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb1-27"><a href="#cb1-27"></a>IPV <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data.csv"</span>)</span>
<span id="cb1-28"><a href="#cb1-28"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()[<span class="sc">!</span><span class="fu">ls</span>() <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"IPV"</span>)])</span>
<span id="cb1-29"><a href="#cb1-29"></a></span>
<span id="cb1-30"><a href="#cb1-30"></a><span class="co">#Los guardamos sin arreglar</span></span>
<span id="cb1-31"><a href="#cb1-31"></a><span class="fu">write.csv</span>(IPV,  <span class="at">file =</span> <span class="st">"./docs/datos/ipv.csv"</span>)</span>
<span id="cb1-32"><a href="#cb1-32"></a><span class="co">#-------------------------Compra-venta de vivienda------------------------------</span></span>
<span id="cb1-33"><a href="#cb1-33"></a></span>
<span id="cb1-34"><a href="#cb1-34"></a>ruta_xls <span class="ot">&lt;-</span> <span class="st">"https://apps.fomento.gob.es/BoletinOnline2/sedal/34010110.XLS"</span></span>
<span id="cb1-35"><a href="#cb1-35"></a></span>
<span id="cb1-36"><a href="#cb1-36"></a><span class="fu">download.file</span>(ruta_xls, <span class="st">"datos.xls"</span>, <span class="at">mode =</span> <span class="st">"wb"</span>)</span>
<span id="cb1-37"><a href="#cb1-37"></a></span>
<span id="cb1-38"><a href="#cb1-38"></a>nombres_hojas <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"2004,2005,2006,2007,2008"</span>, <span class="st">"2009,2010,2011,2012,2013"</span>, </span>
<span id="cb1-39"><a href="#cb1-39"></a>                   <span class="st">"2014,2015,2016,2017,2018"</span>, <span class="st">"2019,2020,2021,2022,2023"</span>)</span>
<span id="cb1-40"><a href="#cb1-40"></a><span class="co"># Leer todas las hojas en una lista</span></span>
<span id="cb1-41"><a href="#cb1-41"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(nombres_hojas)) {</span>
<span id="cb1-42"><a href="#cb1-42"></a>  hoja <span class="ot">&lt;-</span> nombres_hojas[i]</span>
<span id="cb1-43"><a href="#cb1-43"></a>  df <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">"datos.xls"</span>, <span class="at">sheet =</span> i) </span>
<span id="cb1-44"><a href="#cb1-44"></a>  <span class="fu">write.csv</span>(df, <span class="at">file =</span> <span class="fu">paste0</span>(hoja, <span class="st">".csv"</span>), <span class="at">row.names =</span> <span class="cn">FALSE</span>)}</span>
<span id="cb1-45"><a href="#cb1-45"></a></span>
<span id="cb1-46"><a href="#cb1-46"></a><span class="co">#Juntamos las cuatro sheets en una y después arreglaremos el desastre</span></span>
<span id="cb1-47"><a href="#cb1-47"></a>compraventa_2004 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"2004,2005,2006,2007,2008.csv"</span>)</span>
<span id="cb1-48"><a href="#cb1-48"></a>compraventa_2009 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"2009,2010,2011,2012,2013.csv"</span>)</span>
<span id="cb1-49"><a href="#cb1-49"></a>compraventa_2014 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"2014,2015,2016,2017,2018.csv"</span>)</span>
<span id="cb1-50"><a href="#cb1-50"></a>compraventa_2019 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"2019,2020,2021,2022,2023.csv"</span>)</span>
<span id="cb1-51"><a href="#cb1-51"></a></span>
<span id="cb1-52"><a href="#cb1-52"></a>cv <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(compraventa_2009,compraventa_2014)</span>
<span id="cb1-53"><a href="#cb1-53"></a>cv <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(cv,compraventa_2019)</span>
<span id="cb1-54"><a href="#cb1-54"></a>compraventa_2004 <span class="ot">&lt;-</span> compraventa_2004[<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(cv), ]</span>
<span id="cb1-55"><a href="#cb1-55"></a>cv <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(cv,compraventa_2004)</span>
<span id="cb1-56"><a href="#cb1-56"></a></span>
<span id="cb1-57"><a href="#cb1-57"></a></span>
<span id="cb1-58"><a href="#cb1-58"></a>cv <span class="ot">&lt;-</span> cv <span class="sc">%&gt;%</span></span>
<span id="cb1-59"><a href="#cb1-59"></a>  <span class="fu">filter</span>(<span class="fu">row_number</span>() <span class="sc">%in%</span> <span class="dv">6</span><span class="sc">:</span><span class="dv">72</span>)</span>
<span id="cb1-60"><a href="#cb1-60"></a>cv <span class="ot">&lt;-</span> cv <span class="sc">%&gt;%</span></span>
<span id="cb1-61"><a href="#cb1-61"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">row_number</span>() <span class="sc">%in%</span> <span class="dv">2</span>)</span>
<span id="cb1-62"><a href="#cb1-62"></a></span>
<span id="cb1-63"><a href="#cb1-63"></a><span class="co">#Los guardamos sin arreglar</span></span>
<span id="cb1-64"><a href="#cb1-64"></a><span class="fu">write.csv</span>(cv,  <span class="at">file =</span> <span class="st">"./docs/datos/cv.csv"</span>)</span>
<span id="cb1-65"><a href="#cb1-65"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb1-66"><a href="#cb1-66"></a></span>
<span id="cb1-67"><a href="#cb1-67"></a></span>
<span id="cb1-68"><a href="#cb1-68"></a><span class="co">#--------------------------Renta por edad y sexo--------------------------------</span></span>
<span id="cb1-69"><a href="#cb1-69"></a></span>
<span id="cb1-70"><a href="#cb1-70"></a>url3 <span class="ot">&lt;-</span> <span class="st">"https://www.ine.es/jaxiT3/files/t/es/px/9942.px?nocab=1"</span></span>
<span id="cb1-71"><a href="#cb1-71"></a>aa <span class="ot">&lt;-</span> <span class="fu">read.px</span>(url3)</span>
<span id="cb1-72"><a href="#cb1-72"></a></span>
<span id="cb1-73"><a href="#cb1-73"></a><span class="co">#Lo convertimos a CSV para simplificar y creamos un dataframe</span></span>
<span id="cb1-74"><a href="#cb1-74"></a></span>
<span id="cb1-75"><a href="#cb1-75"></a><span class="fu">write.csv</span>(aa, <span class="at">file =</span> <span class="st">"data.csv"</span>, <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb1-76"><a href="#cb1-76"></a>renta_edad <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data.csv"</span>)</span>
<span id="cb1-77"><a href="#cb1-77"></a></span>
<span id="cb1-78"><a href="#cb1-78"></a><span class="co">#Los guardamos sin arreglar</span></span>
<span id="cb1-79"><a href="#cb1-79"></a><span class="fu">write.csv</span>(renta_edad, <span class="at">file =</span> <span class="st">"./docs/datos/renta_edad.csv"</span>)</span>
<span id="cb1-80"><a href="#cb1-80"></a></span>
<span id="cb1-81"><a href="#cb1-81"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb1-82"><a href="#cb1-82"></a><span class="co">#---------------------------Renta por nacionalidad------------------------------</span></span>
<span id="cb1-83"><a href="#cb1-83"></a></span>
<span id="cb1-84"><a href="#cb1-84"></a>url4 <span class="ot">&lt;-</span> <span class="st">"https://www.ine.es/jaxiT3/files/t/es/px/9945.px?nocab=1"</span></span>
<span id="cb1-85"><a href="#cb1-85"></a>aa <span class="ot">&lt;-</span> <span class="fu">read.px</span>(url4)</span>
<span id="cb1-86"><a href="#cb1-86"></a></span>
<span id="cb1-87"><a href="#cb1-87"></a><span class="co">#Lo convertimos a CSV para simplificar y creamos un dataframe</span></span>
<span id="cb1-88"><a href="#cb1-88"></a></span>
<span id="cb1-89"><a href="#cb1-89"></a><span class="fu">write.csv</span>(aa, <span class="at">file =</span> <span class="st">"data.csv"</span>, <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb1-90"><a href="#cb1-90"></a>renta_nacionalidad <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data.csv"</span>)</span>
<span id="cb1-91"><a href="#cb1-91"></a></span>
<span id="cb1-92"><a href="#cb1-92"></a><span class="co">#Los guardamos sin arreglar</span></span>
<span id="cb1-93"><a href="#cb1-93"></a><span class="fu">write.csv</span>(renta_nacionalidad, <span class="at">file =</span> <span class="st">"./docs/datos/renta_nacionalidad.csv"</span>)</span>
<span id="cb1-94"><a href="#cb1-94"></a></span>
<span id="cb1-95"><a href="#cb1-95"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb1-96"><a href="#cb1-96"></a></span>
<span id="cb1-97"><a href="#cb1-97"></a></span>
<span id="cb1-98"><a href="#cb1-98"></a><span class="co">#---------------------Hogares por regimen de tenencia edad----------------------</span></span>
<span id="cb1-99"><a href="#cb1-99"></a></span>
<span id="cb1-100"><a href="#cb1-100"></a>url4 <span class="ot">&lt;-</span> <span class="st">"https://www.ine.es/jaxiT3/files/t/es/px/9994.px?nocab=1"</span></span>
<span id="cb1-101"><a href="#cb1-101"></a>aa <span class="ot">&lt;-</span> <span class="fu">read.px</span>(url4)</span>
<span id="cb1-102"><a href="#cb1-102"></a></span>
<span id="cb1-103"><a href="#cb1-103"></a><span class="co">#Lo convertimos a CSV para simplificar y creamos un dataframe</span></span>
<span id="cb1-104"><a href="#cb1-104"></a></span>
<span id="cb1-105"><a href="#cb1-105"></a><span class="fu">write.csv</span>(aa, <span class="at">file =</span> <span class="st">"data.csv"</span>, <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb1-106"><a href="#cb1-106"></a>vivienda_edad <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data.csv"</span>)</span>
<span id="cb1-107"><a href="#cb1-107"></a></span>
<span id="cb1-108"><a href="#cb1-108"></a><span class="co">#Los guardamos sin arreglar</span></span>
<span id="cb1-109"><a href="#cb1-109"></a><span class="fu">write.csv</span>(vivienda_edad, <span class="at">file =</span> <span class="st">"./docs/datos/vivienda_datos.csv"</span>)</span>
<span id="cb1-110"><a href="#cb1-110"></a></span>
<span id="cb1-111"><a href="#cb1-111"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb1-112"><a href="#cb1-112"></a></span>
<span id="cb1-113"><a href="#cb1-113"></a><span class="co">#Borramos archivos como las sheets separadas y otros datos</span></span>
<span id="cb1-114"><a href="#cb1-114"></a><span class="fu">file.remove</span>(<span class="st">"2004,2005,2006,2007,2008.csv"</span>, <span class="st">"2009,2010,2011,2012,2013.csv"</span>,</span>
<span id="cb1-115"><a href="#cb1-115"></a>            <span class="st">"2014,2015,2016,2017,2018.csv"</span>, <span class="st">"2019,2020,2021,2022,2023.csv"</span>, </span>
<span id="cb1-116"><a href="#cb1-116"></a>            <span class="st">"compraventa.csv"</span>, <span class="st">"data.csv"</span>, <span class="st">"datos.xls"</span>, <span class="st">"./docs/datos/25171.px"</span>,</span>
<span id="cb1-117"><a href="#cb1-117"></a>            <span class="st">"./docs/datos/34010110.XLS"</span>)</span>
<span id="cb1-118"><a href="#cb1-118"></a><span class="co">#&gt; [1]  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE FALSE FALSE</span></span>
<span id="cb1-119"><a href="#cb1-119"></a></span>
<span id="cb1-120"><a href="#cb1-120"></a><span class="co">#----------------------Procedemos a limpiar los datos---------------------------</span></span>
<span id="cb1-121"><a href="#cb1-121"></a></span>
<span id="cb1-122"><a href="#cb1-122"></a><span class="co">#-------------Creamos una carpeta para guardar los datos pulidos----------------</span></span>
<span id="cb1-123"><a href="#cb1-123"></a></span>
<span id="cb1-124"><a href="#cb1-124"></a><span class="fu">dir_create</span>(<span class="st">"./datos_pulidos"</span>)</span>
<span id="cb1-125"><a href="#cb1-125"></a><span class="fu">library</span>(zoo)</span>
<span id="cb1-126"><a href="#cb1-126"></a></span>
<span id="cb1-127"><a href="#cb1-127"></a><span class="do">###AHORA LIMPIAMOS LOS DATOS PARA TRABAJAR MEJOR CON ELLOS###</span></span>
<span id="cb1-128"><a href="#cb1-128"></a></span>
<span id="cb1-129"><a href="#cb1-129"></a><span class="co">#-------------------Indice de precios de la Vivienda----------------------------</span></span>
<span id="cb1-130"><a href="#cb1-130"></a></span>
<span id="cb1-131"><a href="#cb1-131"></a>cv <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="at">file =</span> <span class="st">"./docs/datos/cv.csv"</span>)</span>
<span id="cb1-132"><a href="#cb1-132"></a></span>
<span id="cb1-133"><a href="#cb1-133"></a><span class="co">#Elimino las columnas duplicadas indicando el nombre de la provincia </span></span>
<span id="cb1-134"><a href="#cb1-134"></a><span class="co">#para dejar solo una columna de provincias</span></span>
<span id="cb1-135"><a href="#cb1-135"></a></span>
<span id="cb1-136"><a href="#cb1-136"></a>cv <span class="ot">&lt;-</span> cv[<span class="sc">-</span><span class="dv">1</span>,]</span>
<span id="cb1-137"><a href="#cb1-137"></a><span class="fu">colnames</span>(cv) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb1-138"><a href="#cb1-138"></a>columnas_duplicadas <span class="ot">&lt;-</span> <span class="fu">duplicated</span>(<span class="fu">t</span>(cv))</span>
<span id="cb1-139"><a href="#cb1-139"></a><span class="fu">print</span>(columnas_duplicadas)</span>
<span id="cb1-140"><a href="#cb1-140"></a><span class="co">#&gt;  [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span></span>
<span id="cb1-141"><a href="#cb1-141"></a><span class="co">#&gt; [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE</span></span>
<span id="cb1-142"><a href="#cb1-142"></a><span class="co">#&gt; [25] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span></span>
<span id="cb1-143"><a href="#cb1-143"></a><span class="co">#&gt; [37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE</span></span>
<span id="cb1-144"><a href="#cb1-144"></a><span class="co">#&gt; [49] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span></span>
<span id="cb1-145"><a href="#cb1-145"></a><span class="co">#&gt; [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span></span>
<span id="cb1-146"><a href="#cb1-146"></a><span class="co">#&gt; [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span></span>
<span id="cb1-147"><a href="#cb1-147"></a></span>
<span id="cb1-148"><a href="#cb1-148"></a>cv <span class="ot">&lt;-</span> cv[, <span class="sc">!</span>columnas_duplicadas]</span>
<span id="cb1-149"><a href="#cb1-149"></a><span class="fu">colnames</span>(cv) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"col_"</span>, <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(cv))</span>
<span id="cb1-150"><a href="#cb1-150"></a><span class="co">#Elimino otra columnaa duplicadaa que el argumento no encuenrtra </span></span>
<span id="cb1-151"><a href="#cb1-151"></a></span>
<span id="cb1-152"><a href="#cb1-152"></a>cv <span class="ot">&lt;-</span> cv[, <span class="sc">-</span><span class="dv">62</span>]</span>
<span id="cb1-153"><a href="#cb1-153"></a></span>
<span id="cb1-154"><a href="#cb1-154"></a><span class="co">#Doy nombre a la posición [1,2] de provincias para después poder trabajar mejor</span></span>
<span id="cb1-155"><a href="#cb1-155"></a><span class="co">#Ya que convertiremos la primera fila en colnames</span></span>
<span id="cb1-156"><a href="#cb1-156"></a></span>
<span id="cb1-157"><a href="#cb1-157"></a>cv[<span class="dv">1</span>,<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="st">"Provincia"</span></span>
<span id="cb1-158"><a href="#cb1-158"></a><span class="fu">colnames</span>(cv)</span>
<span id="cb1-159"><a href="#cb1-159"></a><span class="co">#&gt;  [1] "col_1"  "col_2"  "col_3"  "col_4"  "col_5"  "col_6"  "col_7"  "col_8" </span></span>
<span id="cb1-160"><a href="#cb1-160"></a><span class="co">#&gt;  [9] "col_9"  "col_10" "col_11" "col_12" "col_13" "col_14" "col_15" "col_16"</span></span>
<span id="cb1-161"><a href="#cb1-161"></a><span class="co">#&gt; [17] "col_17" "col_18" "col_19" "col_20" "col_21" "col_22" "col_23" "col_24"</span></span>
<span id="cb1-162"><a href="#cb1-162"></a><span class="co">#&gt; [25] "col_25" "col_26" "col_27" "col_28" "col_29" "col_30" "col_31" "col_32"</span></span>
<span id="cb1-163"><a href="#cb1-163"></a><span class="co">#&gt; [33] "col_33" "col_34" "col_35" "col_36" "col_37" "col_38" "col_39" "col_40"</span></span>
<span id="cb1-164"><a href="#cb1-164"></a><span class="co">#&gt; [41] "col_41" "col_42" "col_43" "col_44" "col_45" "col_46" "col_47" "col_48"</span></span>
<span id="cb1-165"><a href="#cb1-165"></a><span class="co">#&gt; [49] "col_49" "col_50" "col_51" "col_52" "col_53" "col_54" "col_55" "col_56"</span></span>
<span id="cb1-166"><a href="#cb1-166"></a><span class="co">#&gt; [57] "col_57" "col_58" "col_59" "col_60" "col_61" "col_63" "col_64" "col_65"</span></span>
<span id="cb1-167"><a href="#cb1-167"></a><span class="co">#&gt; [65] "col_66" "col_67" "col_68" "col_69" "col_70" "col_71" "col_72" "col_73"</span></span>
<span id="cb1-168"><a href="#cb1-168"></a><span class="co">#&gt; [73] "col_74" "col_75" "col_76" "col_77" "col_78" "col_79" "col_80" "col_81"</span></span>
<span id="cb1-169"><a href="#cb1-169"></a><span class="co">#&gt; [81] "col_82"</span></span>
<span id="cb1-170"><a href="#cb1-170"></a></span>
<span id="cb1-171"><a href="#cb1-171"></a><span class="co">#Seleccionamos la primera fila del df y lo convertimos en un vector. Después, </span></span>
<span id="cb1-172"><a href="#cb1-172"></a><span class="co">#Hacemos que los NA se sustituyan por el texto de su izquierda (Remplazamos NA`s</span></span>
<span id="cb1-173"><a href="#cb1-173"></a><span class="co">#por el año al que corresponde esa columnas)</span></span>
<span id="cb1-174"><a href="#cb1-174"></a></span>
<span id="cb1-175"><a href="#cb1-175"></a>df <span class="ot">&lt;-</span> cv <span class="sc">%&gt;%</span></span>
<span id="cb1-176"><a href="#cb1-176"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-177"><a href="#cb1-177"></a>  <span class="fu">unlist</span>()</span>
<span id="cb1-178"><a href="#cb1-178"></a></span>
<span id="cb1-179"><a href="#cb1-179"></a>df <span class="ot">&lt;-</span> <span class="fu">na.locf</span>(df)</span>
<span id="cb1-180"><a href="#cb1-180"></a></span>
<span id="cb1-181"><a href="#cb1-181"></a><span class="co">#Ahora convertimos el vector en la fila 1 que después convrtiremos en colnames</span></span>
<span id="cb1-182"><a href="#cb1-182"></a><span class="co">#para trabajar mejor.</span></span>
<span id="cb1-183"><a href="#cb1-183"></a></span>
<span id="cb1-184"><a href="#cb1-184"></a>cv[<span class="dv">1</span>,] <span class="ot">&lt;-</span> df </span>
<span id="cb1-185"><a href="#cb1-185"></a></span>
<span id="cb1-186"><a href="#cb1-186"></a><span class="co">#Juntamos la fila 1 y 2 a partir de la tercer columna separando el texto con "_" </span></span>
<span id="cb1-187"><a href="#cb1-187"></a><span class="co">#y le rellenamos las dos columnas restantes con los nombres que nos vengan mejor </span></span>
<span id="cb1-188"><a href="#cb1-188"></a><span class="co">#para trabajar</span></span>
<span id="cb1-189"><a href="#cb1-189"></a>aa <span class="ot">&lt;-</span> cv[<span class="dv">1</span>,]</span>
<span id="cb1-190"><a href="#cb1-190"></a>aa <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">""</span>,<span class="st">"Provincia"</span>,<span class="fu">paste</span>(cv[<span class="dv">1</span>,<span class="dv">3</span><span class="sc">:</span><span class="fu">ncol</span>(cv)],cv[<span class="dv">2</span>,<span class="dv">3</span><span class="sc">:</span><span class="fu">ncol</span>(cv)], <span class="at">sep =</span> <span class="st">"_"</span>))</span>
<span id="cb1-191"><a href="#cb1-191"></a></span>
<span id="cb1-192"><a href="#cb1-192"></a><span class="co">#Convertimos el vector aa en colnames</span></span>
<span id="cb1-193"><a href="#cb1-193"></a></span>
<span id="cb1-194"><a href="#cb1-194"></a><span class="fu">colnames</span>(cv) <span class="ot">=</span> aa</span>
<span id="cb1-195"><a href="#cb1-195"></a></span>
<span id="cb1-196"><a href="#cb1-196"></a><span class="co">#Quitamos la primera y la segunda fila, es información que ya indica colnames</span></span>
<span id="cb1-197"><a href="#cb1-197"></a></span>
<span id="cb1-198"><a href="#cb1-198"></a>cv <span class="ot">&lt;-</span> cv[<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>), <span class="sc">-</span>(<span class="dv">1</span>)]</span>
<span id="cb1-199"><a href="#cb1-199"></a><span class="fu">colnames</span>(cv)</span>
<span id="cb1-200"><a href="#cb1-200"></a><span class="co">#&gt;  [1] "Provincia"        "Año 2009_1º"      "Año 2009_2º"      "Año 2009_3º"     </span></span>
<span id="cb1-201"><a href="#cb1-201"></a><span class="co">#&gt;  [5] "Año 2009_4º"      "Año 2010_1º"      "Año 2010_2º"      "Año 2010_3º"     </span></span>
<span id="cb1-202"><a href="#cb1-202"></a><span class="co">#&gt;  [9] "Año 2010_4º"      "Año 2011_1º"      "Año 2011_2º"      "Año 2011_3º"     </span></span>
<span id="cb1-203"><a href="#cb1-203"></a><span class="co">#&gt; [13] "Año 2011_4º"      "Año 2012_1º"      "Año 2012_2º"      "Año 2012_3º"     </span></span>
<span id="cb1-204"><a href="#cb1-204"></a><span class="co">#&gt; [17] "Año 2012_4º"      "Año 2013_1º"      "Año 2013_2º"      "Año 2013_3º"     </span></span>
<span id="cb1-205"><a href="#cb1-205"></a><span class="co">#&gt; [21] "Año 2013_4º"      "Año 2014_1º"      "Año 2014_2º"      "Año 2014_3º"     </span></span>
<span id="cb1-206"><a href="#cb1-206"></a><span class="co">#&gt; [25] "Año 2014_4º"      "Año 2015_1º"      "Año 2015_2º"      "Año 2015_3º"     </span></span>
<span id="cb1-207"><a href="#cb1-207"></a><span class="co">#&gt; [29] "Año 2015_4º"      "Año 2016_1º"      "Año 2016_2º"      "Año 2016_3º"     </span></span>
<span id="cb1-208"><a href="#cb1-208"></a><span class="co">#&gt; [33] "Año 2016_4º"      "Año 2017_1º"      "Año 2017_2º"      "Año 2017_3º"     </span></span>
<span id="cb1-209"><a href="#cb1-209"></a><span class="co">#&gt; [37] "Año 2017_4º"      "Año 2018_1º"      "Año 2018_2º"      "Año 2018_3º"     </span></span>
<span id="cb1-210"><a href="#cb1-210"></a><span class="co">#&gt; [41] "Año 2018_4º"      "Año 2019_1º"      "Año 2019_2º"      "Año 2019_3º"     </span></span>
<span id="cb1-211"><a href="#cb1-211"></a><span class="co">#&gt; [45] "Año 2019_4º"      "Año 2020_1º"      "Año 2020_2º"      "Año 2020_3º"     </span></span>
<span id="cb1-212"><a href="#cb1-212"></a><span class="co">#&gt; [49] "Año 2020_4º"      "Año 2021_1º"      "Año 2021_2º"      "Año 2021_3º"     </span></span>
<span id="cb1-213"><a href="#cb1-213"></a><span class="co">#&gt; [53] "Año 2021_4º"      "Año 2022_1º"      "Año 2022_2º"      "Año 2022_3º"     </span></span>
<span id="cb1-214"><a href="#cb1-214"></a><span class="co">#&gt; [57] "Año 2022_4º"      "Año 2023_1º"      "Año 2023_2º"      "Año 2023_3º (**)"</span></span>
<span id="cb1-215"><a href="#cb1-215"></a><span class="co">#&gt; [61] "Año 2004_1º"      "Año 2004_2º"      "Año 2004_3º"      "Año 2004_4º"     </span></span>
<span id="cb1-216"><a href="#cb1-216"></a><span class="co">#&gt; [65] "Año 2005_1º"      "Año 2005_2º"      "Año 2005_3º"      "Año 2005_4º"     </span></span>
<span id="cb1-217"><a href="#cb1-217"></a><span class="co">#&gt; [69] "Año 2006_1º"      "Año 2006_2º"      "Año 2006_3º"      "Año 2006_4º"     </span></span>
<span id="cb1-218"><a href="#cb1-218"></a><span class="co">#&gt; [73] "Año 2007_1º"      "Año 2007_2º"      "Año 2007_3º"      "Año 2007_4º"     </span></span>
<span id="cb1-219"><a href="#cb1-219"></a><span class="co">#&gt; [77] "Año 2008_1º"      "Año 2008_2º"      "Año 2008_3º"      "Año 2008_4º"</span></span>
<span id="cb1-220"><a href="#cb1-220"></a></span>
<span id="cb1-221"><a href="#cb1-221"></a><span class="co">#Hacemos que todas las columnas que indican año_trimestre pivoten y dejen los</span></span>
<span id="cb1-222"><a href="#cb1-222"></a><span class="co">#valores que contenían las transacciones por un lado y el año_trimestre por otro</span></span>
<span id="cb1-223"><a href="#cb1-223"></a></span>
<span id="cb1-224"><a href="#cb1-224"></a>Transacciones_por_provincia <span class="ot">&lt;-</span> cv <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"Año"</span>), </span>
<span id="cb1-225"><a href="#cb1-225"></a>                                                   <span class="at">names_to =</span> <span class="st">"Año_Trimestre"</span>, </span>
<span id="cb1-226"><a href="#cb1-226"></a>                                                   <span class="at">names_prefix =</span> <span class="st">"Año"</span>, </span>
<span id="cb1-227"><a href="#cb1-227"></a>                                                   <span class="at">values_to =</span> <span class="st">"Transacciones"</span>,</span>
<span id="cb1-228"><a href="#cb1-228"></a>                                                   <span class="at">values_drop_na =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-229"><a href="#cb1-229"></a></span>
<span id="cb1-230"><a href="#cb1-230"></a><span class="co">#Guardamos en la carpeta(en formato .csv) de datos pulidos y seguimos</span></span>
<span id="cb1-231"><a href="#cb1-231"></a></span>
<span id="cb1-232"><a href="#cb1-232"></a><span class="fu">write.csv</span>(Transacciones_por_provincia, </span>
<span id="cb1-233"><a href="#cb1-233"></a>          <span class="at">file =</span> <span class="st">"datos_pulidos/Transacciones_por_povincia.csv"</span>)</span>
<span id="cb1-234"><a href="#cb1-234"></a></span>
<span id="cb1-235"><a href="#cb1-235"></a><span class="co">#----------------Índice de precios de la vivienda-------------------------------</span></span>
<span id="cb1-236"><a href="#cb1-236"></a></span>
<span id="cb1-237"><a href="#cb1-237"></a></span>
<span id="cb1-238"><a href="#cb1-238"></a>ipv <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="at">file =</span> <span class="st">"./docs/datos/ipv.csv"</span>)</span>
<span id="cb1-239"><a href="#cb1-239"></a></span>
<span id="cb1-240"><a href="#cb1-240"></a><span class="co">#Estos datos están bien, quitamos las dos columnas que no aportan y los guardamos</span></span>
<span id="cb1-241"><a href="#cb1-241"></a>ipv <span class="ot">&lt;-</span> ipv[,<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)]</span>
<span id="cb1-242"><a href="#cb1-242"></a></span>
<span id="cb1-243"><a href="#cb1-243"></a><span class="fu">write.csv</span>(ipv, <span class="at">file =</span> <span class="st">"./datos_pulidos/indice_precio_vivienda.csv"</span>)</span>
<span id="cb1-244"><a href="#cb1-244"></a></span>
<span id="cb1-245"><a href="#cb1-245"></a><span class="co">#rm(list = ls())</span></span>
<span id="cb1-246"><a href="#cb1-246"></a></span>
<span id="cb1-247"><a href="#cb1-247"></a></span>
<span id="cb1-248"><a href="#cb1-248"></a><span class="co">#----------------Renta por edad-------------------------------------------------</span></span>
<span id="cb1-249"><a href="#cb1-249"></a></span>
<span id="cb1-250"><a href="#cb1-250"></a>re <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="at">file  =</span> <span class="st">"./docs/datos/renta_edad.csv"</span>)</span>
<span id="cb1-251"><a href="#cb1-251"></a></span>
<span id="cb1-252"><a href="#cb1-252"></a><span class="co">#Renombramos las columnas, seleccionamos lo que nos interesa y borramos el restante</span></span>
<span id="cb1-253"><a href="#cb1-253"></a><span class="co">#Exportamos</span></span>
<span id="cb1-254"><a href="#cb1-254"></a>re <span class="ot">&lt;-</span> re <span class="sc">%&gt;%</span></span>
<span id="cb1-255"><a href="#cb1-255"></a>  <span class="fu">rename</span>(<span class="at">renta =</span> <span class="st">"value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-256"><a href="#cb1-256"></a>  <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(<span class="st">"V1"</span>, <span class="st">"X"</span>))</span>
<span id="cb1-257"><a href="#cb1-257"></a></span>
<span id="cb1-258"><a href="#cb1-258"></a><span class="fu">write.csv</span>(re, <span class="at">file =</span> <span class="st">"./datos_pulidos/renta_por_edad.csv"</span>)</span>
<span id="cb1-259"><a href="#cb1-259"></a></span>
<span id="cb1-260"><a href="#cb1-260"></a></span>
<span id="cb1-261"><a href="#cb1-261"></a></span>
<span id="cb1-262"><a href="#cb1-262"></a></span>
<span id="cb1-263"><a href="#cb1-263"></a><span class="co">#----------------Régimen tenencia de vivienda por edad--------------------------</span></span>
<span id="cb1-264"><a href="#cb1-264"></a></span>
<span id="cb1-265"><a href="#cb1-265"></a>vd <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="at">file  =</span> <span class="st">"./docs/datos/vivienda_datos.csv"</span>)</span>
<span id="cb1-266"><a href="#cb1-266"></a></span>
<span id="cb1-267"><a href="#cb1-267"></a><span class="co">#Renombramos las columnas, seleccionamos lo que nos interesa y borramos el restante</span></span>
<span id="cb1-268"><a href="#cb1-268"></a><span class="co">#Exportamos</span></span>
<span id="cb1-269"><a href="#cb1-269"></a>vd<span class="ot">&lt;-</span> vd <span class="sc">%&gt;%</span></span>
<span id="cb1-270"><a href="#cb1-270"></a>  <span class="fu">rename</span>(<span class="at">Porcentaje =</span> <span class="st">"value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-271"><a href="#cb1-271"></a>  <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(<span class="st">"V1"</span>, <span class="st">"X"</span>))</span>
<span id="cb1-272"><a href="#cb1-272"></a></span>
<span id="cb1-273"><a href="#cb1-273"></a><span class="fu">write.csv</span>(vd, <span class="at">file =</span> <span class="st">"./datos_pulidos/tenencia_de_vivienda.csv"</span>)</span>
<span id="cb1-274"><a href="#cb1-274"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb1-275"><a href="#cb1-275"></a></span>
<span id="cb1-276"><a href="#cb1-276"></a><span class="co">#--------------------IMPORTAR DATOS CE / EUROSTAT-------------------------------</span></span>
<span id="cb1-277"><a href="#cb1-277"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">999</span>) <span class="co">#- para quitar la notación científica</span></span>
<span id="cb1-278"><a href="#cb1-278"></a></span>
<span id="cb1-279"><a href="#cb1-279"></a><span class="fu">library</span>(eurostat) </span>
<span id="cb1-280"><a href="#cb1-280"></a><span class="fu">library</span>(DT) </span>
<span id="cb1-281"><a href="#cb1-281"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-282"><a href="#cb1-282"></a></span>
<span id="cb1-283"><a href="#cb1-283"></a>info <span class="ot">&lt;-</span> <span class="fu">search_eurostat</span>(<span class="st">"GDP"</span>, <span class="at">type =</span> <span class="st">"all"</span>)</span>
<span id="cb1-284"><a href="#cb1-284"></a>my_table <span class="ot">&lt;-</span><span class="st">"sdg_08_10"</span></span>
<span id="cb1-285"><a href="#cb1-285"></a></span>
<span id="cb1-286"><a href="#cb1-286"></a><span class="co">#Comprobamos que es el PIB pc</span></span>
<span id="cb1-287"><a href="#cb1-287"></a><span class="fu">label_eurostat_tables</span>(my_table)</span>
<span id="cb1-288"><a href="#cb1-288"></a><span class="co">#&gt; [1] "Real GDP per capita"</span></span>
<span id="cb1-289"><a href="#cb1-289"></a></span>
<span id="cb1-290"><a href="#cb1-290"></a>df_original <span class="ot">&lt;-</span> <span class="fu">get_eurostat</span>(my_table, <span class="at">time_format =</span> <span class="st">'raw'</span>, <span class="at">keepFlags =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-291"><a href="#cb1-291"></a>df_names <span class="ot">&lt;-</span> <span class="fu">names</span>(df_original)</span>
<span id="cb1-292"><a href="#cb1-292"></a>df_original <span class="ot">&lt;-</span> <span class="fu">label_eurostat</span>(df_original, <span class="at">code =</span> df_names, <span class="at">fix_duplicated =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-293"><a href="#cb1-293"></a></span>
<span id="cb1-294"><a href="#cb1-294"></a><span class="co">#Creamos otro df para trabajor con él </span></span>
<span id="cb1-295"><a href="#cb1-295"></a></span>
<span id="cb1-296"><a href="#cb1-296"></a>df <span class="ot">&lt;-</span> df_original</span>
<span id="cb1-297"><a href="#cb1-297"></a></span>
<span id="cb1-298"><a href="#cb1-298"></a><span class="co">#Ver que hay en el df</span></span>
<span id="cb1-299"><a href="#cb1-299"></a>df_aa <span class="ot">&lt;-</span> pjpv.curso.R<span class="fl">.2022</span><span class="sc">::</span><span class="fu">pjp_dicc</span>(df)</span>
<span id="cb1-300"><a href="#cb1-300"></a>df_bb <span class="ot">&lt;-</span> pjpv.curso.R<span class="fl">.2022</span><span class="sc">::</span><span class="fu">pjp_valores_unicos</span>(df, <span class="at">nn =</span> <span class="dv">400</span>)</span>
<span id="cb1-301"><a href="#cb1-301"></a></span>
<span id="cb1-302"><a href="#cb1-302"></a><span class="co">#Vamos a hacer un poco de limpieza</span></span>
<span id="cb1-303"><a href="#cb1-303"></a>obj_buenos <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"df"</span>, <span class="st">"df_original"</span>, <span class="st">"df_bb"</span>)</span>
<span id="cb1-304"><a href="#cb1-304"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">setdiff</span>(<span class="fu">ls</span>(), obj_buenos))</span>
<span id="cb1-305"><a href="#cb1-305"></a></span>
<span id="cb1-306"><a href="#cb1-306"></a><span class="co">#Vamos a seguir arreglando el df</span></span>
<span id="cb1-307"><a href="#cb1-307"></a></span>
<span id="cb1-308"><a href="#cb1-308"></a>df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb1-309"><a href="#cb1-309"></a>  <span class="fu">rename</span>(<span class="at">year =</span> time_code) <span class="sc">|&gt;</span> </span>
<span id="cb1-310"><a href="#cb1-310"></a>  <span class="fu">rename</span>(<span class="at">PIB_pc =</span> values) <span class="sc">|&gt;</span> </span>
<span id="cb1-311"><a href="#cb1-311"></a>  <span class="fu">rename</span>(<span class="at">country =</span> geo)</span>
<span id="cb1-312"><a href="#cb1-312"></a></span>
<span id="cb1-313"><a href="#cb1-313"></a><span class="co">#Chain linked volumes (2010), euro per capita</span></span>
<span id="cb1-314"><a href="#cb1-314"></a><span class="co">#Solo queremos el PIB_pc</span></span>
<span id="cb1-315"><a href="#cb1-315"></a>df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb1-316"><a href="#cb1-316"></a>  <span class="fu">filter</span>(unit <span class="sc">==</span> <span class="st">"Chain linked volumes (2010), euro per capita"</span>)</span>
<span id="cb1-317"><a href="#cb1-317"></a></span>
<span id="cb1-318"><a href="#cb1-318"></a><span class="co">#Eliminamos todo lo que nos molesta a la vista </span></span>
<span id="cb1-319"><a href="#cb1-319"></a>df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb1-320"><a href="#cb1-320"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(unit_code, values_code, unit, time, na_item_code, na_item, flags))</span>
<span id="cb1-321"><a href="#cb1-321"></a></span>
<span id="cb1-322"><a href="#cb1-322"></a>df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span>  <span class="fu">mutate</span>(<span class="at">year =</span>  <span class="fu">as.numeric</span>(year))</span>
<span id="cb1-323"><a href="#cb1-323"></a></span>
<span id="cb1-324"><a href="#cb1-324"></a>df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span>  <span class="fu">mutate</span>(<span class="at">iso_2_code =</span>  eurostat<span class="sc">::</span><span class="fu">harmonize_country_code</span>(geo_code))</span>
<span id="cb1-325"><a href="#cb1-325"></a></span>
<span id="cb1-326"><a href="#cb1-326"></a>df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb1-327"><a href="#cb1-327"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(geo_code, flags_code))</span>
<span id="cb1-328"><a href="#cb1-328"></a></span>
<span id="cb1-329"><a href="#cb1-329"></a></span>
<span id="cb1-330"><a href="#cb1-330"></a><span class="fu">library</span>(fs)</span>
<span id="cb1-331"><a href="#cb1-331"></a><span class="fu">dir_create</span>(<span class="st">"datos_pulidos"</span>)</span>
<span id="cb1-332"><a href="#cb1-332"></a></span>
<span id="cb1-333"><a href="#cb1-333"></a><span class="co">#A continuación vamos a exportar los datos para luego importarlas más fácilmente #library(rio)</span></span>
<span id="cb1-334"><a href="#cb1-334"></a></span>
<span id="cb1-335"><a href="#cb1-335"></a><span class="fu">export</span>(df, <span class="st">"./datos_pulidos/PIB_pc.csv"</span>, <span class="at">type =</span> <span class="st">"csv"</span>)</span>
<span id="cb1-336"><a href="#cb1-336"></a><span class="co">#---------------DATOS SOBRE EL SALARIO POR NIVEL DE FORMACIÓN-------------------</span></span>
<span id="cb1-337"><a href="#cb1-337"></a></span>
<span id="cb1-338"><a href="#cb1-338"></a><span class="fu">library</span>(rio)</span>
<span id="cb1-339"><a href="#cb1-339"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-340"><a href="#cb1-340"></a>url <span class="ot">&lt;-</span> <span class="st">"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/13931.csv?nocab=1"</span></span>
<span id="cb1-341"><a href="#cb1-341"></a>df_ine <span class="ot">&lt;-</span> <span class="fu">import</span>(url)</span>
<span id="cb1-342"><a href="#cb1-342"></a>df_ine_01 <span class="ot">&lt;-</span> df_ine <span class="sc">|&gt;</span> </span>
<span id="cb1-343"><a href="#cb1-343"></a>  <span class="fu">filter</span>(Decil <span class="sc">%in%</span> (<span class="st">"Total decil"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb1-344"><a href="#cb1-344"></a>  <span class="fu">select</span>(<span class="st">"Periodo"</span>, <span class="st">"Tipo de jornada"</span>, <span class="st">"NIVELES DE FORMACION"</span>, <span class="st">"Total"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-345"><a href="#cb1-345"></a>  <span class="fu">rename</span>(<span class="at">year =</span> Periodo) <span class="sc">|&gt;</span> </span>
<span id="cb1-346"><a href="#cb1-346"></a>  <span class="fu">rename</span>(<span class="at">jornada =</span> <span class="st">'Tipo de jornada'</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-347"><a href="#cb1-347"></a>  <span class="fu">rename</span>(<span class="at">formacion =</span> <span class="st">'NIVELES DE FORMACION'</span>) <span class="sc">|&gt;</span></span>
<span id="cb1-348"><a href="#cb1-348"></a>  <span class="fu">rename</span>(<span class="at">salario =</span> Total)</span>
<span id="cb1-349"><a href="#cb1-349"></a></span>
<span id="cb1-350"><a href="#cb1-350"></a><span class="co">#VAMOS A CONVERTIR LA VARIABLE salario A NUMERIC</span></span>
<span id="cb1-351"><a href="#cb1-351"></a></span>
<span id="cb1-352"><a href="#cb1-352"></a><span class="co">#R y el INE me han jodiedo la vida para pasar esto a numeric (antes no funcionaba)</span></span>
<span id="cb1-353"><a href="#cb1-353"></a>df_ine_01 <span class="ot">&lt;-</span> df_ine_01 <span class="sc">|&gt;</span> </span>
<span id="cb1-354"><a href="#cb1-354"></a>  <span class="fu">mutate</span>(<span class="at">salario =</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">","</span>, <span class="st">"."</span>, <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>, salario))))</span>
<span id="cb1-355"><a href="#cb1-355"></a></span>
<span id="cb1-356"><a href="#cb1-356"></a><span class="fu">export</span>(df_ine_01,<span class="st">"./datos_pulidos/salario_formacion.csv"</span>, <span class="at">type =</span> <span class="st">"csv"</span>)</span>
<span id="cb1-357"><a href="#cb1-357"></a></span>
<span id="cb1-358"><a href="#cb1-358"></a><span class="co">#salarios por edades</span></span>
<span id="cb1-359"><a href="#cb1-359"></a>url_1 <span class="ot">&lt;-</span> <span class="st">"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/13928.csv?nocab=1"</span></span>
<span id="cb1-360"><a href="#cb1-360"></a>df_ine_x1 <span class="ot">&lt;-</span> <span class="fu">import</span>(url_1)</span>
<span id="cb1-361"><a href="#cb1-361"></a></span>
<span id="cb1-362"><a href="#cb1-362"></a>df_ine_02 <span class="ot">&lt;-</span> df_ine_x1 <span class="sc">|&gt;</span> </span>
<span id="cb1-363"><a href="#cb1-363"></a>  <span class="fu">filter</span>(Decil <span class="sc">%in%</span> (<span class="st">"Total decil"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb1-364"><a href="#cb1-364"></a>  <span class="fu">select</span>(<span class="st">"Periodo"</span>, <span class="st">"Tipo de jornada"</span>, <span class="st">"Grupo de edad"</span>, <span class="st">"Total"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-365"><a href="#cb1-365"></a>  <span class="fu">rename</span>(<span class="at">year =</span> Periodo) <span class="sc">|&gt;</span> </span>
<span id="cb1-366"><a href="#cb1-366"></a>  <span class="fu">rename</span>(<span class="at">jornada =</span> <span class="st">'Tipo de jornada'</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-367"><a href="#cb1-367"></a>  <span class="fu">rename</span>(<span class="at">grupo_edad =</span> <span class="st">'Grupo de edad'</span>) <span class="sc">|&gt;</span></span>
<span id="cb1-368"><a href="#cb1-368"></a>  <span class="fu">rename</span>(<span class="at">salario =</span> Total)</span>
<span id="cb1-369"><a href="#cb1-369"></a></span>
<span id="cb1-370"><a href="#cb1-370"></a><span class="co">#PASAMOS A NUMERIC</span></span>
<span id="cb1-371"><a href="#cb1-371"></a>df_ine_02 <span class="ot">&lt;-</span> df_ine_02 <span class="sc">|&gt;</span> </span>
<span id="cb1-372"><a href="#cb1-372"></a>  <span class="fu">mutate</span>(<span class="at">salario =</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">","</span>, <span class="st">"."</span>, <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>, salario))))</span>
<span id="cb1-373"><a href="#cb1-373"></a></span>
<span id="cb1-374"><a href="#cb1-374"></a><span class="fu">export</span>(df_ine_02,<span class="st">"./datos_pulidos/salario_grupo_edad.csv"</span>, <span class="at">type =</span> <span class="st">"csv"</span>)</span>
<span id="cb1-375"><a href="#cb1-375"></a><span class="co">#Datos sobre el IPC</span></span>
<span id="cb1-376"><a href="#cb1-376"></a></span>
<span id="cb1-377"><a href="#cb1-377"></a>url_2 <span class="ot">&lt;-</span> <span class="st">"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/50908.csv?nocab=1"</span></span>
<span id="cb1-378"><a href="#cb1-378"></a>df_ipc <span class="ot">&lt;-</span> <span class="fu">import</span>(url_2)</span>
<span id="cb1-379"><a href="#cb1-379"></a></span>
<span id="cb1-380"><a href="#cb1-380"></a>df_ipc_01 <span class="ot">&lt;-</span> df_ipc <span class="sc">|&gt;</span> </span>
<span id="cb1-381"><a href="#cb1-381"></a>  <span class="fu">filter</span>(<span class="st">`</span><span class="at">Grupos ECOICOP</span><span class="st">`</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Índice general"</span>, <span class="st">"04 Vivienda, agua, electricidad, gas y otros combustibles"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb1-382"><a href="#cb1-382"></a>  <span class="fu">select</span>(<span class="st">"Periodo"</span>, <span class="st">"Grupos ECOICOP"</span>, <span class="st">"Tipo de dato"</span>, <span class="st">"Total"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-383"><a href="#cb1-383"></a>  <span class="fu">rename</span>(<span class="at">year =</span> Periodo) <span class="sc">|&gt;</span></span>
<span id="cb1-384"><a href="#cb1-384"></a>  <span class="fu">rename</span>(<span class="at">grupo =</span> <span class="st">'Grupos ECOICOP'</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-385"><a href="#cb1-385"></a>  <span class="fu">rename</span>(<span class="at">tipo_dato =</span> <span class="st">`</span><span class="at">Tipo de dato</span><span class="st">`</span> ) </span>
<span id="cb1-386"><a href="#cb1-386"></a></span>
<span id="cb1-387"><a href="#cb1-387"></a><span class="co">#PASAMOS A NUMERIC</span></span>
<span id="cb1-388"><a href="#cb1-388"></a>df_ipc_01 <span class="ot">&lt;-</span> df_ipc_01 <span class="sc">|&gt;</span> </span>
<span id="cb1-389"><a href="#cb1-389"></a>  <span class="fu">mutate</span>(<span class="at">Total =</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">","</span>, <span class="st">"."</span>, <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>, Total))))</span>
<span id="cb1-390"><a href="#cb1-390"></a></span>
<span id="cb1-391"><a href="#cb1-391"></a><span class="co">#PARA SEPARAR EN LA VARIABLE YEAR LOS DATOS POR AÑOS Y MESES</span></span>
<span id="cb1-392"><a href="#cb1-392"></a><span class="co">#df_sep &lt;- df_ipc_01 |&gt; </span></span>
<span id="cb1-393"><a href="#cb1-393"></a><span class="co">#  separate(col = year, into = c("year", "month"), sep = "M")</span></span>
<span id="cb1-394"><a href="#cb1-394"></a></span>
<span id="cb1-395"><a href="#cb1-395"></a><span class="co">#df_sep &lt;- df_sep |&gt; </span></span>
<span id="cb1-396"><a href="#cb1-396"></a><span class="co">#  mutate(month = paste0("M", month))</span></span>
<span id="cb1-397"><a href="#cb1-397"></a></span>
<span id="cb1-398"><a href="#cb1-398"></a><span class="fu">export</span>(df_ipc_01, <span class="st">"./datos_pulidos/IPC_mas_vivienda.csv"</span>, <span class="at">type =</span> <span class="st">"csv"</span>)</span>
<span id="cb1-399"><a href="#cb1-399"></a></span>
<span id="cb1-400"><a href="#cb1-400"></a><span class="co">#Por tipo de jornada</span></span>
<span id="cb1-401"><a href="#cb1-401"></a>df_temporal <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/10894.csv?nocab=1"</span>)</span>
<span id="cb1-402"><a href="#cb1-402"></a>df_contrato <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/4854.csv?nocab=1"</span>)</span>
<span id="cb1-403"><a href="#cb1-403"></a>df_contrato <span class="ot">&lt;-</span> df_contrato <span class="sc">%&gt;%</span></span>
<span id="cb1-404"><a href="#cb1-404"></a><span class="fu">filter</span>(Sexo <span class="sc">%in%</span> <span class="st">"Ambos sexos"</span>)</span>
<span id="cb1-405"><a href="#cb1-405"></a><span class="fu">write.csv</span>(df_temporal, <span class="at">file=</span> <span class="st">"./datos_pulidos/temporalidad_edad.csv"</span>)</span>
<span id="cb1-406"><a href="#cb1-406"></a><span class="fu">write.csv</span>(df_contrato, <span class="at">file =</span> <span class="st">"./datos_pulidos/contrato_edad.csv"</span>)</span>
<span id="cb1-407"><a href="#cb1-407"></a></span>
<span id="cb1-408"><a href="#cb1-408"></a><span class="co">#-------------------------Paro-----------------------------------</span></span>
<span id="cb1-409"><a href="#cb1-409"></a>df_activos <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/4049.csv?nocab=1"</span>)</span>
<span id="cb1-410"><a href="#cb1-410"></a>df_parados <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/4084.csv?nocab=1"</span>)</span>
<span id="cb1-411"><a href="#cb1-411"></a>df_activos <span class="ot">&lt;-</span> df_activos <span class="sc">%&gt;%</span></span>
<span id="cb1-412"><a href="#cb1-412"></a><span class="fu">filter</span>(Sexo <span class="sc">%in%</span> <span class="st">"Ambos sexos"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-413"><a href="#cb1-413"></a><span class="fu">filter</span>(Unidad <span class="sc">%in%</span> <span class="st">"Valor absoluto"</span>)</span>
<span id="cb1-414"><a href="#cb1-414"></a>df_parados <span class="ot">&lt;-</span> df_parados <span class="sc">%&gt;%</span></span>
<span id="cb1-415"><a href="#cb1-415"></a><span class="fu">filter</span>(Sexo <span class="sc">%in%</span> <span class="st">"Ambos sexos"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-416"><a href="#cb1-416"></a><span class="fu">filter</span>(Unidad <span class="sc">%in%</span> <span class="st">"Valor absoluto"</span>)</span>
<span id="cb1-417"><a href="#cb1-417"></a></span>
<span id="cb1-418"><a href="#cb1-418"></a><span class="co">#Saúl</span></span>
<span id="cb1-419"><a href="#cb1-419"></a><span class="co">#-------------------------Por tipo de jornada-----------------------------------</span></span>
<span id="cb1-420"><a href="#cb1-420"></a></span>
<span id="cb1-421"><a href="#cb1-421"></a>df_temporal <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/10894.csv?nocab=1"</span>)</span>
<span id="cb1-422"><a href="#cb1-422"></a>df_contrato <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/4854.csv?nocab=1"</span>)</span>
<span id="cb1-423"><a href="#cb1-423"></a></span>
<span id="cb1-424"><a href="#cb1-424"></a>df_contrato <span class="ot">&lt;-</span> df_contrato <span class="sc">%&gt;%</span></span>
<span id="cb1-425"><a href="#cb1-425"></a>  <span class="fu">filter</span>(Sexo <span class="sc">%in%</span> <span class="st">"Ambos sexos"</span>)</span>
<span id="cb1-426"><a href="#cb1-426"></a></span>
<span id="cb1-427"><a href="#cb1-427"></a></span>
<span id="cb1-428"><a href="#cb1-428"></a></span>
<span id="cb1-429"><a href="#cb1-429"></a><span class="fu">write.csv</span>(df_temporal, <span class="at">file=</span> <span class="st">"./datos_pulidos/temporalidad_edad.csv"</span>)</span>
<span id="cb1-430"><a href="#cb1-430"></a><span class="fu">write.csv</span>(df_contrato, <span class="at">file =</span> <span class="st">"./datos_pulidos/contrato_edad.csv"</span>)</span>
<span id="cb1-431"><a href="#cb1-431"></a></span>
<span id="cb1-432"><a href="#cb1-432"></a><span class="co">#Saúl</span></span>
<span id="cb1-433"><a href="#cb1-433"></a><span class="co">#-------------------------Paro-----------------------------------</span></span>
<span id="cb1-434"><a href="#cb1-434"></a></span>
<span id="cb1-435"><a href="#cb1-435"></a></span>
<span id="cb1-436"><a href="#cb1-436"></a>df_activos <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/4049.csv?nocab=1"</span>)</span>
<span id="cb1-437"><a href="#cb1-437"></a>df_parados <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/4084.csv?nocab=1"</span>)</span>
<span id="cb1-438"><a href="#cb1-438"></a></span>
<span id="cb1-439"><a href="#cb1-439"></a></span>
<span id="cb1-440"><a href="#cb1-440"></a>df_activos <span class="ot">&lt;-</span> df_activos <span class="sc">%&gt;%</span></span>
<span id="cb1-441"><a href="#cb1-441"></a>  <span class="fu">filter</span>(Sexo <span class="sc">%in%</span> <span class="st">"Ambos sexos"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-442"><a href="#cb1-442"></a>  <span class="fu">filter</span>(Unidad <span class="sc">%in%</span> <span class="st">"Valor absoluto"</span>)</span>
<span id="cb1-443"><a href="#cb1-443"></a></span>
<span id="cb1-444"><a href="#cb1-444"></a></span>
<span id="cb1-445"><a href="#cb1-445"></a>df_parados <span class="ot">&lt;-</span> df_parados <span class="sc">%&gt;%</span></span>
<span id="cb1-446"><a href="#cb1-446"></a>  <span class="fu">filter</span>(Sexo <span class="sc">%in%</span> <span class="st">"Ambos sexos"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-447"><a href="#cb1-447"></a>  <span class="fu">filter</span>(Unidad <span class="sc">%in%</span> <span class="st">"Valor absoluto"</span>)</span>
<span id="cb1-448"><a href="#cb1-448"></a></span>
<span id="cb1-449"><a href="#cb1-449"></a><span class="fu">export</span>(df_activos, <span class="at">file =</span> <span class="st">"./datos_pulidos/activos.csv"</span>, <span class="at">format=</span><span class="st">"csv"</span>)</span>
<span id="cb1-450"><a href="#cb1-450"></a><span class="fu">export</span>(df_parados, <span class="at">file =</span> <span class="st">"./datos_pulidos/parados.csv"</span>, <span class="at">format=</span><span class="st">"csv"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
<hr></section><section id="evolución-de-la-renta-neta-por-edad" class="level1"><h1>Evolución de la renta neta por edad</h1>
<p>Iniciaremos analizando los datos de renta según la edad (como pueden imaginar, los jóvenes constituyen el grupo poblacional que dispone de menos renta), para, a continuación, adentrarnos en datos que muestran la evolución de los precios de la vivienda.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Gráfico en movimiento</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Gráfico fijo interactivo</a></li>
</ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell" data-layout-align="center">
<details open=""><summary>Código</summary><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="co">#Cargamos datos</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="fu">library</span>(rio)</span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb2-7"><a href="#cb2-7"></a></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="co">#-</span></span>
<span id="cb2-9"><a href="#cb2-9"></a></span>
<span id="cb2-10"><a href="#cb2-10"></a>renta_edad <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"./datos_pulidos/renta_por_edad.csv"</span>)</span>
<span id="cb2-11"><a href="#cb2-11"></a></span>
<span id="cb2-12"><a href="#cb2-12"></a>dff  <span class="ot">&lt;-</span> renta_edad <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">tipo =</span> Renta.anual.neta.media.por.persona.y.por.unidad.de.consumo) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(tipo <span class="sc">==</span> <span class="st">"Renta neta media por persona"</span>, Sexo <span class="sc">==</span> <span class="st">"Ambos sexos"</span>, <span class="sc">!</span>(Edad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"De 18 a 64 años"</span>, <span class="st">"Menos de 18 años"</span>, <span class="st">"Total"</span>)))</span>
<span id="cb2-13"><a href="#cb2-13"></a></span>
<span id="cb2-14"><a href="#cb2-14"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(dff, <span class="fu">aes</span>(<span class="at">x =</span> Periodo, <span class="at">y =</span> renta, <span class="at">color =</span> Edad)) <span class="sc">+</span></span>
<span id="cb2-15"><a href="#cb2-15"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb2-16"><a href="#cb2-16"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Evolución de la renta neta media por edad"</span>, <span class="at">subtitle =</span> <span class="st">"(Euros corrientes)"</span>,</span>
<span id="cb2-17"><a href="#cb2-17"></a>       <span class="at">x =</span> <span class="st">"Año"</span>, <span class="at">y =</span> <span class="st">"Renta neta"</span>, <span class="at">caption =</span> <span class="st">"Elaboración propia a partir de datos de INE"</span>) <span class="sc">+</span></span>
<span id="cb2-18"><a href="#cb2-18"></a>  <span class="fu">theme_ipsum</span>() <span class="sc">+</span> </span>
<span id="cb2-19"><a href="#cb2-19"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb2-20"><a href="#cb2-20"></a>        <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"gray87"</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>),</span>
<span id="cb2-21"><a href="#cb2-21"></a>        <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"aliceblue"</span>),</span>
<span id="cb2-22"><a href="#cb2-22"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb2-23"><a href="#cb2-23"></a>        <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"serif"</span>, <span class="at">size =</span> <span class="dv">9</span>, <span class="at">colour =</span> <span class="st">"gray17"</span>)) <span class="sc">+</span> <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"green4"</span>, <span class="st">"black"</span>, <span class="st">"blue"</span>, <span class="st">"red"</span>, <span class="st">"orange"</span>)) <span class="sc">+</span></span>
<span id="cb2-24"><a href="#cb2-24"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> Edad), <span class="at">nudge_x =</span> <span class="fl">0.5</span>, <span class="at">nudge_y =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">0</span>)</span>
<span id="cb2-25"><a href="#cb2-25"></a></span>
<span id="cb2-26"><a href="#cb2-26"></a>p_animated <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">transition_reveal</span>(Periodo) <span class="sc">+</span></span>
<span id="cb2-27"><a href="#cb2-27"></a>  <span class="fu">enter_fade</span>() <span class="sc">+</span> </span>
<span id="cb2-28"><a href="#cb2-28"></a>  <span class="fu">exit_fade</span>()</span>
<span id="cb2-29"><a href="#cb2-29"></a></span>
<span id="cb2-30"><a href="#cb2-30"></a><span class="fu">animate</span>(p_animated, <span class="at">nframes =</span> <span class="dv">200</span>, <span class="at">fps =</span> <span class="dv">20</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-2-1.gif" class="img-fluid figure-img" style="width:95.0%"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell" data-layout-align="center">
<details open=""><summary>Código</summary><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">library</span>(rio)</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb3-6"><a href="#cb3-6"></a></span>
<span id="cb3-7"><a href="#cb3-7"></a>renta_edad <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"./datos_pulidos/renta_por_edad.csv"</span>)</span>
<span id="cb3-8"><a href="#cb3-8"></a></span>
<span id="cb3-9"><a href="#cb3-9"></a>dff  <span class="ot">&lt;-</span> renta_edad <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">tipo =</span> Renta.anual.neta.media.por.persona.y.por.unidad.de.consumo) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(tipo <span class="sc">==</span> <span class="st">"Renta neta media por persona"</span>, Sexo <span class="sc">==</span> <span class="st">"Ambos sexos"</span>, <span class="sc">!</span>(Edad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"De 18 a 64 años"</span>, <span class="st">"Menos de 18 años"</span>, <span class="st">"Total"</span>)))</span>
<span id="cb3-10"><a href="#cb3-10"></a></span>
<span id="cb3-11"><a href="#cb3-11"></a>p6 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data=</span>dff) <span class="sc">+</span></span>
<span id="cb3-12"><a href="#cb3-12"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> Periodo, <span class="at">y =</span> renta, <span class="at">color =</span> Edad, <span class="at">group =</span> Edad)) <span class="sc">+</span><span class="fu">labs</span> (<span class="at">title =</span> <span class="st">"Evolución de la renta neta media por edad"</span>, <span class="at">subtitle =</span> <span class="st">"(En euros corrientes)"</span>, <span class="at">y =</span> <span class="st">"Renta"</span>, <span class="at">x =</span> <span class="st">"Año"</span>) <span class="sc">+</span> <span class="fu">theme_ipsum</span>()</span>
<span id="cb3-13"><a href="#cb3-13"></a></span>
<span id="cb3-14"><a href="#cb3-14"></a>plotly<span class="sc">::</span><span class="fu">ggplotly</span>(p6)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-72f4172c145db5a85d30" style="width:95%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-72f4172c145db5a85d30">{"x":{"data":[{"x":[2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"y":[10893,11685,11783,11463,11867,11960,12183,12206,12416,12528,12758,13315,14132,14426,14762],"text":["Periodo: 2008<br />renta: 10893<br />Edad: 65 y más años<br />Edad: 65 y más años","Periodo: 2009<br />renta: 11685<br />Edad: 65 y más años<br />Edad: 65 y más años","Periodo: 2010<br />renta: 11783<br />Edad: 65 y más años<br />Edad: 65 y más años","Periodo: 2011<br />renta: 11463<br />Edad: 65 y más años<br />Edad: 65 y más años","Periodo: 2012<br />renta: 11867<br />Edad: 65 y más años<br />Edad: 65 y más años","Periodo: 2013<br />renta: 11960<br />Edad: 65 y más años<br />Edad: 65 y más años","Periodo: 2014<br />renta: 12183<br />Edad: 65 y más años<br />Edad: 65 y más años","Periodo: 2015<br />renta: 12206<br />Edad: 65 y más años<br />Edad: 65 y más años","Periodo: 2016<br />renta: 12416<br />Edad: 65 y más años<br />Edad: 65 y más años","Periodo: 2017<br />renta: 12528<br />Edad: 65 y más años<br />Edad: 65 y más años","Periodo: 2018<br />renta: 12758<br />Edad: 65 y más años<br />Edad: 65 y más años","Periodo: 2019<br />renta: 13315<br />Edad: 65 y más años<br />Edad: 65 y más años","Periodo: 2020<br />renta: 14132<br />Edad: 65 y más años<br />Edad: 65 y más años","Periodo: 2021<br />renta: 14426<br />Edad: 65 y más años<br />Edad: 65 y más años","Periodo: 2022<br />renta: 14762<br />Edad: 65 y más años<br />Edad: 65 y más años"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)","dash":"solid"},"hoveron":"points","name":"65 y más años","legendgroup":"65 y más años","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"y":[10321,10797,10651,10032,9727,9438,9004,8935,9373,9815,10156,10345,11031,10903,11660],"text":["Periodo: 2008<br />renta: 10321<br />Edad: De 16 a 29 años<br />Edad: De 16 a 29 años","Periodo: 2009<br />renta: 10797<br />Edad: De 16 a 29 años<br />Edad: De 16 a 29 años","Periodo: 2010<br />renta: 10651<br />Edad: De 16 a 29 años<br />Edad: De 16 a 29 años","Periodo: 2011<br />renta: 10032<br />Edad: De 16 a 29 años<br />Edad: De 16 a 29 años","Periodo: 2012<br />renta:  9727<br />Edad: De 16 a 29 años<br />Edad: De 16 a 29 años","Periodo: 2013<br />renta:  9438<br />Edad: De 16 a 29 años<br />Edad: De 16 a 29 años","Periodo: 2014<br />renta:  9004<br />Edad: De 16 a 29 años<br />Edad: De 16 a 29 años","Periodo: 2015<br />renta:  8935<br />Edad: De 16 a 29 años<br />Edad: De 16 a 29 años","Periodo: 2016<br />renta:  9373<br />Edad: De 16 a 29 años<br />Edad: De 16 a 29 años","Periodo: 2017<br />renta:  9815<br />Edad: De 16 a 29 años<br />Edad: De 16 a 29 años","Periodo: 2018<br />renta: 10156<br />Edad: De 16 a 29 años<br />Edad: De 16 a 29 años","Periodo: 2019<br />renta: 10345<br />Edad: De 16 a 29 años<br />Edad: De 16 a 29 años","Periodo: 2020<br />renta: 11031<br />Edad: De 16 a 29 años<br />Edad: De 16 a 29 años","Periodo: 2021<br />renta: 10903<br />Edad: De 16 a 29 años<br />Edad: De 16 a 29 años","Periodo: 2022<br />renta: 11660<br />Edad: De 16 a 29 años<br />Edad: De 16 a 29 años"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)","dash":"solid"},"hoveron":"points","name":"De 16 a 29 años","legendgroup":"De 16 a 29 años","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"y":[11024,11687,11480,11106,10912,10543,10348,10353,10536,11040,11397,11422,12053,12012,12974],"text":["Periodo: 2008<br />renta: 11024<br />Edad: De 30 a 44 años<br />Edad: De 30 a 44 años","Periodo: 2009<br />renta: 11687<br />Edad: De 30 a 44 años<br />Edad: De 30 a 44 años","Periodo: 2010<br />renta: 11480<br />Edad: De 30 a 44 años<br />Edad: De 30 a 44 años","Periodo: 2011<br />renta: 11106<br />Edad: De 30 a 44 años<br />Edad: De 30 a 44 años","Periodo: 2012<br />renta: 10912<br />Edad: De 30 a 44 años<br />Edad: De 30 a 44 años","Periodo: 2013<br />renta: 10543<br />Edad: De 30 a 44 años<br />Edad: De 30 a 44 años","Periodo: 2014<br />renta: 10348<br />Edad: De 30 a 44 años<br />Edad: De 30 a 44 años","Periodo: 2015<br />renta: 10353<br />Edad: De 30 a 44 años<br />Edad: De 30 a 44 años","Periodo: 2016<br />renta: 10536<br />Edad: De 30 a 44 años<br />Edad: De 30 a 44 años","Periodo: 2017<br />renta: 11040<br />Edad: De 30 a 44 años<br />Edad: De 30 a 44 años","Periodo: 2018<br />renta: 11397<br />Edad: De 30 a 44 años<br />Edad: De 30 a 44 años","Periodo: 2019<br />renta: 11422<br />Edad: De 30 a 44 años<br />Edad: De 30 a 44 años","Periodo: 2020<br />renta: 12053<br />Edad: De 30 a 44 años<br />Edad: De 30 a 44 años","Periodo: 2021<br />renta: 12012<br />Edad: De 30 a 44 años<br />Edad: De 30 a 44 años","Periodo: 2022<br />renta: 12974<br />Edad: De 30 a 44 años<br />Edad: De 30 a 44 años"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)","dash":"solid"},"hoveron":"points","name":"De 30 a 44 años","legendgroup":"De 30 a 44 años","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"y":[12413,12906,13047,12374,12270,11921,11626,11591,11931,12311,12550,12988,13626,13373,14225],"text":["Periodo: 2008<br />renta: 12413<br />Edad: De 45 a 64 años<br />Edad: De 45 a 64 años","Periodo: 2009<br />renta: 12906<br />Edad: De 45 a 64 años<br />Edad: De 45 a 64 años","Periodo: 2010<br />renta: 13047<br />Edad: De 45 a 64 años<br />Edad: De 45 a 64 años","Periodo: 2011<br />renta: 12374<br />Edad: De 45 a 64 años<br />Edad: De 45 a 64 años","Periodo: 2012<br />renta: 12270<br />Edad: De 45 a 64 años<br />Edad: De 45 a 64 años","Periodo: 2013<br />renta: 11921<br />Edad: De 45 a 64 años<br />Edad: De 45 a 64 años","Periodo: 2014<br />renta: 11626<br />Edad: De 45 a 64 años<br />Edad: De 45 a 64 años","Periodo: 2015<br />renta: 11591<br />Edad: De 45 a 64 años<br />Edad: De 45 a 64 años","Periodo: 2016<br />renta: 11931<br />Edad: De 45 a 64 años<br />Edad: De 45 a 64 años","Periodo: 2017<br />renta: 12311<br />Edad: De 45 a 64 años<br />Edad: De 45 a 64 años","Periodo: 2018<br />renta: 12550<br />Edad: De 45 a 64 años<br />Edad: De 45 a 64 años","Periodo: 2019<br />renta: 12988<br />Edad: De 45 a 64 años<br />Edad: De 45 a 64 años","Periodo: 2020<br />renta: 13626<br />Edad: De 45 a 64 años<br />Edad: De 45 a 64 años","Periodo: 2021<br />renta: 13373<br />Edad: De 45 a 64 años<br />Edad: De 45 a 64 años","Periodo: 2022<br />renta: 14225<br />Edad: De 45 a 64 años<br />Edad: De 45 a 64 años"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)","dash":"solid"},"hoveron":"points","name":"De 45 a 64 años","legendgroup":"De 45 a 64 años","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"y":[8005,8444,8355,8259,8151,7741,7726,7841,8078,8354,8919,8899,9025,9036,9605],"text":["Periodo: 2008<br />renta:  8005<br />Edad: Menores de 16 años<br />Edad: Menores de 16 años","Periodo: 2009<br />renta:  8444<br />Edad: Menores de 16 años<br />Edad: Menores de 16 años","Periodo: 2010<br />renta:  8355<br />Edad: Menores de 16 años<br />Edad: Menores de 16 años","Periodo: 2011<br />renta:  8259<br />Edad: Menores de 16 años<br />Edad: Menores de 16 años","Periodo: 2012<br />renta:  8151<br />Edad: Menores de 16 años<br />Edad: Menores de 16 años","Periodo: 2013<br />renta:  7741<br />Edad: Menores de 16 años<br />Edad: Menores de 16 años","Periodo: 2014<br />renta:  7726<br />Edad: Menores de 16 años<br />Edad: Menores de 16 años","Periodo: 2015<br />renta:  7841<br />Edad: Menores de 16 años<br />Edad: Menores de 16 años","Periodo: 2016<br />renta:  8078<br />Edad: Menores de 16 años<br />Edad: Menores de 16 años","Periodo: 2017<br />renta:  8354<br />Edad: Menores de 16 años<br />Edad: Menores de 16 años","Periodo: 2018<br />renta:  8919<br />Edad: Menores de 16 años<br />Edad: Menores de 16 años","Periodo: 2019<br />renta:  8899<br />Edad: Menores de 16 años<br />Edad: Menores de 16 años","Periodo: 2020<br />renta:  9025<br />Edad: Menores de 16 años<br />Edad: Menores de 16 años","Periodo: 2021<br />renta:  9036<br />Edad: Menores de 16 años<br />Edad: Menores de 16 años","Periodo: 2022<br />renta:  9605<br />Edad: Menores de 16 años<br />Edad: Menores de 16 años"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(231,107,243,1)","dash":"solid"},"hoveron":"points","name":"Menores de 16 años","legendgroup":"Menores de 16 años","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":95.701120797011214,"r":39.850560398505614,"b":86.841012868410132,"l":93.814860938148641},"font":{"color":"rgba(0,0,0,1)","family":"Arial Narrow","size":15.276048152760483},"title":{"text":"<b> Evolución de la renta neta media por edad <\/b>","font":{"color":"rgba(0,0,0,1)","family":"Arial Narrow","size":23.910336239103366},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[2007.3,2022.7],"tickmode":"array","ticktext":["2008","2012","2016","2020"],"tickvals":[2008,2012,2016,2020],"categoryorder":"array","categoryarray":["2008","2012","2016","2020"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.8190120381901207,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"Arial Narrow","size":15.276048152760483},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.265670402656704,"zeroline":false,"anchor":"y","title":{"text":"Año","font":{"color":"rgba(0,0,0,1)","family":"Arial Narrow","size":11.955168119551683}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[7374.1999999999998,15113.799999999999],"tickmode":"array","ticktext":["9000","11000","13000","15000"],"tickvals":[9000,11000,13000,15000],"categoryorder":"array","categoryarray":["9000","11000","13000","15000"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.8190120381901207,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"Arial Narrow","size":15.276048152760483},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.26567040265670405,"zeroline":false,"anchor":"x","title":{"text":"Renta","font":{"color":"rgba(0,0,0,1)","family":"Arial Narrow","size":11.955168119551683}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"Arial Narrow","size":12.220838522208389},"title":{"text":"Edad","font":{"color":"rgba(0,0,0,1)","family":"Arial Narrow","size":15.276048152760483}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"1c5c2b471b34":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"1c5c2b471b34","visdat":{"1c5c2b471b34":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
</div>
</div>
<p>Tenemos este primer gráfico dinámico, que básicamente lo hemos hecho para demostrar que lo podemos hacer. Sabemos que no es especialmente útil, pero sí vistoso, por eso hemos hecho esta presión interactiva pero estática del mismo gráfico, para un mejor análisis acceded al fijo interactivo.</p>
<p>En este gráfico, cuyos datos están extraídos del INE podemos observar, como ya anticipábamos, que los jóvenes (16-29 años de edad) son el rango de edad que dispone de menos renta. Más notorio es, claro está, con los menores de 16 años. Los jóvenes de 16 a 29 años contaban con una renta media neta o disponible (después de impuestos) de 11.660€.</p>
<ul>
<li><p>La diferencia con el grupo de 30 a 44 años ha pasado de un 6’38% en 2008 a 10’13% en 2022. Un incremento de un 58’78%.</p></li>
<li><p>Con el grupo de 45 a 64 años del 16’86% mencionado arriba a un 18’03%. Un incremento de un 6’94%.</p></li>
<li><p>La mayor divergencia se da con el grupo de los mayores de 65 años. De una diferencia del 6’03% en 2008 a una del 21% en 2022. Un espectacular incremento del 248’23%.</p></li>
</ul>
<p>Por tanto, la renta de lo jóvenes de entre 16 y 29 años es la que menos ha crecido: tan solo un 12’97% en 14 años.</p>
<p>Como podemos observar, no sólo es que los jóvenes tengan una renta disponible menor, si no que cada vez se queda más atrás respecto al resto. Los jóvenes, en términos de renta, son cada vez relativamente más pobres.</p>
<hr>
<section id="porcentaje-de-parados-según-la-edad" class="level2"><h2 class="anchored" data-anchor-id="porcentaje-de-parados-según-la-edad">Porcentaje de parados según la edad</h2>
<div class="cell" data-layout-align="center">
<details open=""><summary>Código</summary><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="co">#Paquetes</span></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="fu">library</span>(reshape2)</span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="fu">library</span>(car) <span class="co"># regression analysis</span></span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="fu">library</span>(plotly)</span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb4-8"><a href="#cb4-8"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="fu">library</span>(xts)</span>
<span id="cb4-10"><a href="#cb4-10"></a><span class="fu">library</span>(dygraphs)</span>
<span id="cb4-11"><a href="#cb4-11"></a><span class="fu">library</span>(gifski)</span>
<span id="cb4-12"><a href="#cb4-12"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb4-13"><a href="#cb4-13"></a><span class="co">#rm(list = ls())</span></span>
<span id="cb4-14"><a href="#cb4-14"></a><span class="co">#Df`s</span></span>
<span id="cb4-15"><a href="#cb4-15"></a><span class="co">#---------------------Tipo de contrato------------------------------------------</span></span>
<span id="cb4-16"><a href="#cb4-16"></a>df_contrato <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"./datos_pulidos/contrato_edad.csv"</span>)</span>
<span id="cb4-17"><a href="#cb4-17"></a><span class="co">#----------------------Arreglamos-----------------------------------------------</span></span>
<span id="cb4-18"><a href="#cb4-18"></a><span class="fu">head</span>(df_contrato)</span>
<span id="cb4-19"><a href="#cb4-19"></a><span class="co">#&gt;   X        Sexo  Edad Tipo.de.jornada   Tipo.de.dato Periodo    Total</span></span>
<span id="cb4-20"><a href="#cb4-20"></a><span class="co">#&gt; 1 1 Ambos sexos Total           Total Valor absoluto    2022 20.390,6</span></span>
<span id="cb4-21"><a href="#cb4-21"></a><span class="co">#&gt; 2 2 Ambos sexos Total           Total Valor absoluto    2021 19.773,6</span></span>
<span id="cb4-22"><a href="#cb4-22"></a><span class="co">#&gt; 3 3 Ambos sexos Total           Total Valor absoluto    2020 19.202,4</span></span>
<span id="cb4-23"><a href="#cb4-23"></a><span class="co">#&gt; 4 4 Ambos sexos Total           Total Valor absoluto    2019 19.779,3</span></span>
<span id="cb4-24"><a href="#cb4-24"></a><span class="co">#&gt; 5 5 Ambos sexos Total           Total Valor absoluto    2018 19.327,7</span></span>
<span id="cb4-25"><a href="#cb4-25"></a><span class="co">#&gt; 6 6 Ambos sexos Total           Total Valor absoluto    2017 18.824,8</span></span>
<span id="cb4-26"><a href="#cb4-26"></a>df_contrato <span class="ot">&lt;-</span> df_contrato <span class="sc">%&gt;%</span></span>
<span id="cb4-27"><a href="#cb4-27"></a><span class="fu">mutate</span>(<span class="at">Total =</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>, Total))</span>
<span id="cb4-28"><a href="#cb4-28"></a>df_contrato <span class="ot">&lt;-</span> df_contrato <span class="sc">%&gt;%</span></span>
<span id="cb4-29"><a href="#cb4-29"></a><span class="fu">mutate</span>(<span class="at">Total =</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">","</span>, <span class="st">"."</span>, Total)))</span>
<span id="cb4-30"><a href="#cb4-30"></a><span class="fu">head</span>(df_contrato)</span>
<span id="cb4-31"><a href="#cb4-31"></a><span class="co">#&gt;   X        Sexo  Edad Tipo.de.jornada   Tipo.de.dato Periodo   Total</span></span>
<span id="cb4-32"><a href="#cb4-32"></a><span class="co">#&gt; 1 1 Ambos sexos Total           Total Valor absoluto    2022 20390.6</span></span>
<span id="cb4-33"><a href="#cb4-33"></a><span class="co">#&gt; 2 2 Ambos sexos Total           Total Valor absoluto    2021 19773.6</span></span>
<span id="cb4-34"><a href="#cb4-34"></a><span class="co">#&gt; 3 3 Ambos sexos Total           Total Valor absoluto    2020 19202.4</span></span>
<span id="cb4-35"><a href="#cb4-35"></a><span class="co">#&gt; 4 4 Ambos sexos Total           Total Valor absoluto    2019 19779.3</span></span>
<span id="cb4-36"><a href="#cb4-36"></a><span class="co">#&gt; 5 5 Ambos sexos Total           Total Valor absoluto    2018 19327.7</span></span>
<span id="cb4-37"><a href="#cb4-37"></a><span class="co">#&gt; 6 6 Ambos sexos Total           Total Valor absoluto    2017 18824.8</span></span>
<span id="cb4-38"><a href="#cb4-38"></a>df_contrato <span class="ot">&lt;-</span> df_contrato <span class="sc">%&gt;%</span></span>
<span id="cb4-39"><a href="#cb4-39"></a><span class="fu">filter</span>(Tipo.de.jornada <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Jornada a tiempo completo"</span>, <span class="st">"Jornada a tiempo parcial"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-40"><a href="#cb4-40"></a><span class="fu">filter</span>(Tipo.de.dato <span class="sc">%in%</span> <span class="st">"Porcentaje"</span>)</span>
<span id="cb4-41"><a href="#cb4-41"></a>df_contrato_pivot <span class="ot">&lt;-</span> df_contrato <span class="sc">%&gt;%</span></span>
<span id="cb4-42"><a href="#cb4-42"></a><span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">"Tipo.de.jornada"</span>, <span class="at">values_from =</span> <span class="st">"Total"</span>)</span>
<span id="cb4-43"><a href="#cb4-43"></a>df_contrato_pivot <span class="ot">&lt;-</span> df_contrato_pivot[,<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)]</span>
<span id="cb4-44"><a href="#cb4-44"></a>de16a34 <span class="ot">&lt;-</span> df_contrato_pivot <span class="sc">%&gt;%</span></span>
<span id="cb4-45"><a href="#cb4-45"></a><span class="fu">filter</span>(Edad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"De 25 a 29 años"</span>, <span class="st">"De 16 a 19 años"</span>, <span class="st">"De 20 a 24 años"</span>, <span class="st">"De 30 a 34</span></span>
<span id="cb4-46"><a href="#cb4-46"></a><span class="st">años"</span>))</span>
<span id="cb4-47"><a href="#cb4-47"></a>columna <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"De 16 a 34 años"</span>, <span class="at">times =</span> <span class="dv">17</span>)</span>
<span id="cb4-48"><a href="#cb4-48"></a>de16a34 <span class="ot">&lt;-</span> de16a34 <span class="sc">%&gt;%</span></span>
<span id="cb4-49"><a href="#cb4-49"></a><span class="fu">mutate_all</span>(<span class="sc">~</span><span class="fu">replace</span>(., <span class="fu">is.na</span>(.), <span class="dv">0</span>))</span>
<span id="cb4-50"><a href="#cb4-50"></a><span class="do">##</span></span>
<span id="cb4-51"><a href="#cb4-51"></a>de16a34 <span class="ot">&lt;-</span> de16a34 <span class="sc">%&gt;%</span></span>
<span id="cb4-52"><a href="#cb4-52"></a><span class="fu">group_by</span>(Periodo) <span class="sc">%&gt;%</span></span>
<span id="cb4-53"><a href="#cb4-53"></a><span class="fu">summarise</span>(<span class="at">tiempo_completo =</span> <span class="fu">sum</span>(<span class="st">`</span><span class="at">Jornada a tiempo completo</span><span class="st">`</span>)<span class="sc">/</span><span class="dv">4</span>,</span>
<span id="cb4-54"><a href="#cb4-54"></a><span class="at">tiempo_parcial =</span> <span class="fu">sum</span>(<span class="st">`</span><span class="at">Jornada a tiempo parcial</span><span class="st">`</span>)<span class="sc">/</span><span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-55"><a href="#cb4-55"></a><span class="fu">mutate</span>(<span class="at">Edad =</span> columna)</span>
<span id="cb4-56"><a href="#cb4-56"></a>mas35 <span class="ot">&lt;-</span> df_contrato_pivot <span class="sc">%&gt;%</span></span>
<span id="cb4-57"><a href="#cb4-57"></a><span class="fu">filter</span>(Edad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"70 y más años"</span>, <span class="st">"De 35 a 39 años"</span>, <span class="st">"De 40 a 44 años"</span>, <span class="st">"De 45 a 49</span></span>
<span id="cb4-58"><a href="#cb4-58"></a><span class="st">años"</span>, <span class="st">"De 50 a 54 años"</span>, <span class="st">"De 55 a 59 años"</span>, <span class="st">"De 60 a 64 años"</span>, <span class="st">"De 65 a 69 años"</span>))</span>
<span id="cb4-59"><a href="#cb4-59"></a>columna <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"Mayores de 35"</span>, <span class="at">times =</span> <span class="dv">17</span>)</span>
<span id="cb4-60"><a href="#cb4-60"></a>mas35 <span class="ot">&lt;-</span> mas35 <span class="sc">%&gt;%</span></span>
<span id="cb4-61"><a href="#cb4-61"></a><span class="fu">mutate_all</span>(<span class="sc">~</span><span class="fu">replace</span>(., <span class="fu">is.na</span>(.), <span class="dv">0</span>))</span>
<span id="cb4-62"><a href="#cb4-62"></a>mas35 <span class="ot">&lt;-</span> mas35 <span class="sc">%&gt;%</span></span>
<span id="cb4-63"><a href="#cb4-63"></a><span class="fu">group_by</span>(Periodo) <span class="sc">%&gt;%</span></span>
<span id="cb4-64"><a href="#cb4-64"></a><span class="fu">summarise</span>(<span class="at">tiempo_completo =</span> <span class="fu">sum</span>(<span class="st">`</span><span class="at">Jornada a tiempo completo</span><span class="st">`</span>)<span class="sc">/</span><span class="dv">8</span>,</span>
<span id="cb4-65"><a href="#cb4-65"></a><span class="at">tiempo_parcial =</span> <span class="fu">sum</span>(<span class="st">`</span><span class="at">Jornada a tiempo parcial</span><span class="st">`</span>)<span class="sc">/</span><span class="dv">8</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-66"><a href="#cb4-66"></a><span class="fu">mutate</span>(<span class="at">Edad =</span> columna)</span>
<span id="cb4-67"><a href="#cb4-67"></a>contrato <span class="ot">&lt;-</span> <span class="fu">rbind</span>(mas35, de16a34)</span>
<span id="cb4-68"><a href="#cb4-68"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()[<span class="sc">!</span><span class="fu">ls</span>() <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"salario"</span>,<span class="st">"contrato"</span>)])</span>
<span id="cb4-69"><a href="#cb4-69"></a><span class="do">##-------------------------Póblación Activa----------------------------------------------</span></span>
<span id="cb4-70"><a href="#cb4-70"></a>df_activos <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"./datos_pulidos/activos.csv"</span>)</span>
<span id="cb4-71"><a href="#cb4-71"></a><span class="do">##-------------------------Arreglamos-----------------------------------------------------</span></span>
<span id="cb4-72"><a href="#cb4-72"></a><span class="fu">head</span>(df_activos)</span>
<span id="cb4-73"><a href="#cb4-73"></a><span class="co">#&gt;    Edad        Sexo         Unidad Periodo    Total</span></span>
<span id="cb4-74"><a href="#cb4-74"></a><span class="co">#&gt; 1 Total Ambos sexos Valor absoluto  2023T3 24.121,0</span></span>
<span id="cb4-75"><a href="#cb4-75"></a><span class="co">#&gt; 2 Total Ambos sexos Valor absoluto  2023T2 23.819,2</span></span>
<span id="cb4-76"><a href="#cb4-76"></a><span class="co">#&gt; 3 Total Ambos sexos Valor absoluto  2023T1 23.580,5</span></span>
<span id="cb4-77"><a href="#cb4-77"></a><span class="co">#&gt; 4 Total Ambos sexos Valor absoluto  2022T4 23.487,8</span></span>
<span id="cb4-78"><a href="#cb4-78"></a><span class="co">#&gt; 5 Total Ambos sexos Valor absoluto  2022T3 23.525,9</span></span>
<span id="cb4-79"><a href="#cb4-79"></a><span class="co">#&gt; 6 Total Ambos sexos Valor absoluto  2022T2 23.387,4</span></span>
<span id="cb4-80"><a href="#cb4-80"></a>df_activos <span class="ot">&lt;-</span> df_activos <span class="sc">%&gt;%</span></span>
<span id="cb4-81"><a href="#cb4-81"></a><span class="fu">mutate</span>(<span class="at">Total =</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>, Total))</span>
<span id="cb4-82"><a href="#cb4-82"></a>df_activos <span class="ot">&lt;-</span> df_activos <span class="sc">%&gt;%</span></span>
<span id="cb4-83"><a href="#cb4-83"></a><span class="fu">mutate</span>(<span class="at">Total =</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">","</span>, <span class="st">"."</span>, Total)))</span>
<span id="cb4-84"><a href="#cb4-84"></a><span class="fu">head</span>(df_activos)</span>
<span id="cb4-85"><a href="#cb4-85"></a><span class="co">#&gt;    Edad        Sexo         Unidad Periodo   Total</span></span>
<span id="cb4-86"><a href="#cb4-86"></a><span class="co">#&gt; 1 Total Ambos sexos Valor absoluto  2023T3 24121.0</span></span>
<span id="cb4-87"><a href="#cb4-87"></a><span class="co">#&gt; 2 Total Ambos sexos Valor absoluto  2023T2 23819.2</span></span>
<span id="cb4-88"><a href="#cb4-88"></a><span class="co">#&gt; 3 Total Ambos sexos Valor absoluto  2023T1 23580.5</span></span>
<span id="cb4-89"><a href="#cb4-89"></a><span class="co">#&gt; 4 Total Ambos sexos Valor absoluto  2022T4 23487.8</span></span>
<span id="cb4-90"><a href="#cb4-90"></a><span class="co">#&gt; 5 Total Ambos sexos Valor absoluto  2022T3 23525.9</span></span>
<span id="cb4-91"><a href="#cb4-91"></a><span class="co">#&gt; 6 Total Ambos sexos Valor absoluto  2022T2 23387.4</span></span>
<span id="cb4-92"><a href="#cb4-92"></a>menos35 <span class="ot">&lt;-</span> df_activos <span class="sc">%&gt;%</span></span>
<span id="cb4-93"><a href="#cb4-93"></a><span class="fu">filter</span>(Edad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"De 25 a 29 años"</span>, <span class="st">"De 16 a 19 años"</span>, <span class="st">"De 20 a 24 años"</span>, <span class="st">"De 30 a 34</span></span>
<span id="cb4-94"><a href="#cb4-94"></a><span class="st">años"</span>))</span>
<span id="cb4-95"><a href="#cb4-95"></a><span class="fu">head</span>(menos35)</span>
<span id="cb4-96"><a href="#cb4-96"></a><span class="co">#&gt;              Edad        Sexo         Unidad Periodo Total</span></span>
<span id="cb4-97"><a href="#cb4-97"></a><span class="co">#&gt; 1 De 16 a 19 años Ambos sexos Valor absoluto  2023T3 353.4</span></span>
<span id="cb4-98"><a href="#cb4-98"></a><span class="co">#&gt; 2 De 16 a 19 años Ambos sexos Valor absoluto  2023T2 284.3</span></span>
<span id="cb4-99"><a href="#cb4-99"></a><span class="co">#&gt; 3 De 16 a 19 años Ambos sexos Valor absoluto  2023T1 258.7</span></span>
<span id="cb4-100"><a href="#cb4-100"></a><span class="co">#&gt; 4 De 16 a 19 años Ambos sexos Valor absoluto  2022T4 268.2</span></span>
<span id="cb4-101"><a href="#cb4-101"></a><span class="co">#&gt; 5 De 16 a 19 años Ambos sexos Valor absoluto  2022T3 333.2</span></span>
<span id="cb4-102"><a href="#cb4-102"></a><span class="co">#&gt; 6 De 16 a 19 años Ambos sexos Valor absoluto  2022T2 295.7</span></span>
<span id="cb4-103"><a href="#cb4-103"></a>menos35 <span class="ot">&lt;-</span> menos35 <span class="sc">%&gt;%</span></span>
<span id="cb4-104"><a href="#cb4-104"></a><span class="fu">mutate</span>(Año <span class="ot">=</span> <span class="fu">substr</span>(Periodo, <span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-105"><a href="#cb4-105"></a><span class="fu">group_by</span>(Edad, Sexo, Unidad, Año) <span class="sc">%&gt;%</span></span>
<span id="cb4-106"><a href="#cb4-106"></a><span class="fu">summarise</span>(<span class="at">Total =</span> <span class="fu">sum</span>(Total)<span class="sc">/</span><span class="dv">4</span>)</span>
<span id="cb4-107"><a href="#cb4-107"></a>menos35 <span class="ot">&lt;-</span> menos35[,<span class="sc">-</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>)]</span>
<span id="cb4-108"><a href="#cb4-108"></a>columna <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"De 16 a 34 años"</span>, <span class="at">times =</span> <span class="dv">22</span>)</span>
<span id="cb4-109"><a href="#cb4-109"></a>menos35 <span class="ot">&lt;-</span> menos35 <span class="sc">%&gt;%</span></span>
<span id="cb4-110"><a href="#cb4-110"></a><span class="fu">group_by</span>(Año) <span class="sc">%&gt;%</span></span>
<span id="cb4-111"><a href="#cb4-111"></a><span class="fu">summarise</span>(<span class="at">total =</span> <span class="fu">sum</span>(Total)) <span class="sc">%&gt;%</span></span>
<span id="cb4-112"><a href="#cb4-112"></a><span class="fu">mutate</span>(<span class="at">grupo_edad =</span> columna) <span class="sc">%&gt;%</span></span>
<span id="cb4-113"><a href="#cb4-113"></a><span class="fu">filter</span>(<span class="sc">!</span>Año <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"2023"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-114"><a href="#cb4-114"></a><span class="fu">rename</span>(<span class="at">num_activos =</span> <span class="st">"total"</span>)</span>
<span id="cb4-115"><a href="#cb4-115"></a>mas35 <span class="ot">&lt;-</span> df_activos <span class="sc">%&gt;%</span></span>
<span id="cb4-116"><a href="#cb4-116"></a><span class="fu">filter</span>(Edad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"70 y más años"</span>, <span class="st">"De 35 a 39 años"</span>, <span class="st">"De 40 a 44 años"</span>, <span class="st">"De 45 a 49</span></span>
<span id="cb4-117"><a href="#cb4-117"></a><span class="st">años"</span>, <span class="st">"De 50 a 54 años"</span>, <span class="st">"De 55 a 59 años"</span>, <span class="st">"De 60 a 64 años"</span>, <span class="st">"De 65 a 69 años"</span>))</span>
<span id="cb4-118"><a href="#cb4-118"></a>mas35 <span class="ot">&lt;-</span> mas35 <span class="sc">%&gt;%</span></span>
<span id="cb4-119"><a href="#cb4-119"></a><span class="fu">mutate</span>(Año <span class="ot">=</span> <span class="fu">substr</span>(Periodo, <span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-120"><a href="#cb4-120"></a><span class="fu">group_by</span>(Edad, Sexo, Unidad, Año) <span class="sc">%&gt;%</span></span>
<span id="cb4-121"><a href="#cb4-121"></a><span class="fu">summarise</span>(<span class="at">Total =</span> <span class="fu">sum</span>(Total)<span class="sc">/</span><span class="dv">4</span>)</span>
<span id="cb4-122"><a href="#cb4-122"></a>mas35 <span class="ot">&lt;-</span> mas35[,<span class="sc">-</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>)]</span>
<span id="cb4-123"><a href="#cb4-123"></a>columna <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"Mayores de 35"</span>, <span class="at">times =</span> <span class="dv">22</span>)</span>
<span id="cb4-124"><a href="#cb4-124"></a>mas35 <span class="ot">&lt;-</span> mas35 <span class="sc">%&gt;%</span></span>
<span id="cb4-125"><a href="#cb4-125"></a><span class="fu">group_by</span>(Año) <span class="sc">%&gt;%</span></span>
<span id="cb4-126"><a href="#cb4-126"></a><span class="fu">summarise</span>(<span class="at">total =</span> <span class="fu">sum</span>(Total)) <span class="sc">%&gt;%</span></span>
<span id="cb4-127"><a href="#cb4-127"></a><span class="fu">mutate</span>(<span class="at">grupo_edad =</span> columna) <span class="sc">%&gt;%</span></span>
<span id="cb4-128"><a href="#cb4-128"></a><span class="fu">filter</span>(<span class="sc">!</span>Año <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"2023"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-129"><a href="#cb4-129"></a><span class="fu">rename</span>(<span class="at">num_activos =</span> <span class="st">"total"</span>)</span>
<span id="cb4-130"><a href="#cb4-130"></a>activos <span class="ot">&lt;-</span> <span class="fu">rbind</span>(mas35, menos35)</span>
<span id="cb4-131"><a href="#cb4-131"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()[<span class="sc">!</span><span class="fu">ls</span>() <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"salario"</span>,<span class="st">"contrato"</span>, <span class="st">"activos"</span>)])</span>
<span id="cb4-132"><a href="#cb4-132"></a><span class="do">##-----------------------------Póblación parada---------------------------------</span></span>
<span id="cb4-133"><a href="#cb4-133"></a>df_parados <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"./datos_pulidos/parados.csv"</span>)</span>
<span id="cb4-134"><a href="#cb4-134"></a><span class="do">##-----------------------------Arreglamos y sacamos la población ocupada--------</span></span>
<span id="cb4-135"><a href="#cb4-135"></a><span class="fu">head</span>(df_parados)</span>
<span id="cb4-136"><a href="#cb4-136"></a><span class="co">#&gt;    Edad        Sexo         Unidad Periodo   Total</span></span>
<span id="cb4-137"><a href="#cb4-137"></a><span class="co">#&gt; 1 Total Ambos sexos Valor absoluto  2023T3 2.855,2</span></span>
<span id="cb4-138"><a href="#cb4-138"></a><span class="co">#&gt; 2 Total Ambos sexos Valor absoluto  2023T2 2.762,5</span></span>
<span id="cb4-139"><a href="#cb4-139"></a><span class="co">#&gt; 3 Total Ambos sexos Valor absoluto  2023T1 3.127,8</span></span>
<span id="cb4-140"><a href="#cb4-140"></a><span class="co">#&gt; 4 Total Ambos sexos Valor absoluto  2022T4 3.024,0</span></span>
<span id="cb4-141"><a href="#cb4-141"></a><span class="co">#&gt; 5 Total Ambos sexos Valor absoluto  2022T3 2.980,2</span></span>
<span id="cb4-142"><a href="#cb4-142"></a><span class="co">#&gt; 6 Total Ambos sexos Valor absoluto  2022T2 2.919,4</span></span>
<span id="cb4-143"><a href="#cb4-143"></a>df_parados <span class="ot">&lt;-</span> df_parados <span class="sc">%&gt;%</span></span>
<span id="cb4-144"><a href="#cb4-144"></a><span class="fu">mutate</span>(<span class="at">Total =</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>, Total))</span>
<span id="cb4-145"><a href="#cb4-145"></a>df_parados <span class="ot">&lt;-</span> df_parados <span class="sc">%&gt;%</span></span>
<span id="cb4-146"><a href="#cb4-146"></a><span class="fu">mutate</span>(<span class="at">Total =</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">","</span>, <span class="st">"."</span>, Total)))</span>
<span id="cb4-147"><a href="#cb4-147"></a><span class="fu">head</span>(df_parados)</span>
<span id="cb4-148"><a href="#cb4-148"></a><span class="co">#&gt;    Edad        Sexo         Unidad Periodo  Total</span></span>
<span id="cb4-149"><a href="#cb4-149"></a><span class="co">#&gt; 1 Total Ambos sexos Valor absoluto  2023T3 2855.2</span></span>
<span id="cb4-150"><a href="#cb4-150"></a><span class="co">#&gt; 2 Total Ambos sexos Valor absoluto  2023T2 2762.5</span></span>
<span id="cb4-151"><a href="#cb4-151"></a><span class="co">#&gt; 3 Total Ambos sexos Valor absoluto  2023T1 3127.8</span></span>
<span id="cb4-152"><a href="#cb4-152"></a><span class="co">#&gt; 4 Total Ambos sexos Valor absoluto  2022T4 3024.0</span></span>
<span id="cb4-153"><a href="#cb4-153"></a><span class="co">#&gt; 5 Total Ambos sexos Valor absoluto  2022T3 2980.2</span></span>
<span id="cb4-154"><a href="#cb4-154"></a><span class="co">#&gt; 6 Total Ambos sexos Valor absoluto  2022T2 2919.4</span></span>
<span id="cb4-155"><a href="#cb4-155"></a>menos35 <span class="ot">&lt;-</span> df_parados <span class="sc">%&gt;%</span></span>
<span id="cb4-156"><a href="#cb4-156"></a><span class="fu">filter</span>(Edad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"De 25 a 29 años"</span>, <span class="st">"De 16 a 19 años"</span>, <span class="st">"De 20 a 24 años"</span>, <span class="st">"De 30 a 34</span></span>
<span id="cb4-157"><a href="#cb4-157"></a><span class="st">años"</span>))</span>
<span id="cb4-158"><a href="#cb4-158"></a><span class="fu">head</span>(menos35)</span>
<span id="cb4-159"><a href="#cb4-159"></a><span class="co">#&gt;              Edad        Sexo         Unidad Periodo Total</span></span>
<span id="cb4-160"><a href="#cb4-160"></a><span class="co">#&gt; 1 De 16 a 19 años Ambos sexos Valor absoluto  2023T3 142.0</span></span>
<span id="cb4-161"><a href="#cb4-161"></a><span class="co">#&gt; 2 De 16 a 19 años Ambos sexos Valor absoluto  2023T2 122.1</span></span>
<span id="cb4-162"><a href="#cb4-162"></a><span class="co">#&gt; 3 De 16 a 19 años Ambos sexos Valor absoluto  2023T1 121.4</span></span>
<span id="cb4-163"><a href="#cb4-163"></a><span class="co">#&gt; 4 De 16 a 19 años Ambos sexos Valor absoluto  2022T4 114.8</span></span>
<span id="cb4-164"><a href="#cb4-164"></a><span class="co">#&gt; 5 De 16 a 19 años Ambos sexos Valor absoluto  2022T3 151.4</span></span>
<span id="cb4-165"><a href="#cb4-165"></a><span class="co">#&gt; 6 De 16 a 19 años Ambos sexos Valor absoluto  2022T2 144.0</span></span>
<span id="cb4-166"><a href="#cb4-166"></a>menos35 <span class="ot">&lt;-</span> menos35 <span class="sc">%&gt;%</span></span>
<span id="cb4-167"><a href="#cb4-167"></a><span class="fu">mutate</span>(Año <span class="ot">=</span> <span class="fu">substr</span>(Periodo, <span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-168"><a href="#cb4-168"></a><span class="fu">group_by</span>(Edad, Sexo, Unidad, Año) <span class="sc">%&gt;%</span></span>
<span id="cb4-169"><a href="#cb4-169"></a><span class="fu">summarise</span>(<span class="at">Total =</span> <span class="fu">sum</span>(Total)<span class="sc">/</span><span class="dv">4</span>)</span>
<span id="cb4-170"><a href="#cb4-170"></a>menos35 <span class="ot">&lt;-</span> menos35[,<span class="sc">-</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>)]</span>
<span id="cb4-171"><a href="#cb4-171"></a>columna <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"De 16 a 34 años"</span>, <span class="at">times =</span> <span class="dv">22</span>)</span>
<span id="cb4-172"><a href="#cb4-172"></a>menos35 <span class="ot">&lt;-</span> menos35 <span class="sc">%&gt;%</span></span>
<span id="cb4-173"><a href="#cb4-173"></a><span class="fu">group_by</span>(Año) <span class="sc">%&gt;%</span></span>
<span id="cb4-174"><a href="#cb4-174"></a><span class="fu">summarise</span>(<span class="at">total =</span> <span class="fu">sum</span>(Total)) <span class="sc">%&gt;%</span></span>
<span id="cb4-175"><a href="#cb4-175"></a><span class="fu">mutate</span>(<span class="at">grupo_edad =</span> columna) <span class="sc">%&gt;%</span></span>
<span id="cb4-176"><a href="#cb4-176"></a><span class="fu">filter</span>(<span class="sc">!</span>Año <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"2023"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-177"><a href="#cb4-177"></a><span class="fu">rename</span>(<span class="at">num_parados =</span> <span class="st">"total"</span>)</span>
<span id="cb4-178"><a href="#cb4-178"></a>mas35 <span class="ot">&lt;-</span> df_parados <span class="sc">%&gt;%</span></span>
<span id="cb4-179"><a href="#cb4-179"></a><span class="fu">filter</span>(Edad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"70 y más años"</span>, <span class="st">"De 35 a 39 años"</span>, <span class="st">"De 40 a 44 años"</span>, <span class="st">"De 45 a 49</span></span>
<span id="cb4-180"><a href="#cb4-180"></a><span class="st">años"</span>, <span class="st">"De 50 a 54 años"</span>, <span class="st">"De 55 a 59 años"</span>, <span class="st">"De 60 a 64 años"</span>, <span class="st">"De 65 a 69 años"</span>))</span>
<span id="cb4-181"><a href="#cb4-181"></a>mas35 <span class="ot">&lt;-</span> mas35 <span class="sc">%&gt;%</span></span>
<span id="cb4-182"><a href="#cb4-182"></a><span class="fu">mutate</span>(Año <span class="ot">=</span> <span class="fu">substr</span>(Periodo, <span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-183"><a href="#cb4-183"></a><span class="fu">group_by</span>(Edad, Sexo, Unidad, Año) <span class="sc">%&gt;%</span></span>
<span id="cb4-184"><a href="#cb4-184"></a><span class="fu">summarise</span>(<span class="at">Total =</span> <span class="fu">sum</span>(Total)<span class="sc">/</span><span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-185"><a href="#cb4-185"></a><span class="fu">mutate_all</span>(<span class="sc">~</span><span class="fu">replace</span>(., <span class="fu">is.na</span>(.), <span class="dv">0</span>))</span>
<span id="cb4-186"><a href="#cb4-186"></a>mas35 <span class="ot">&lt;-</span> mas35[,<span class="sc">-</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>)]</span>
<span id="cb4-187"><a href="#cb4-187"></a>columna <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"Mayores de 35"</span>, <span class="at">times =</span> <span class="dv">22</span>)</span>
<span id="cb4-188"><a href="#cb4-188"></a>mas35 <span class="ot">&lt;-</span> mas35 <span class="sc">%&gt;%</span></span>
<span id="cb4-189"><a href="#cb4-189"></a><span class="fu">group_by</span>(Año) <span class="sc">%&gt;%</span></span>
<span id="cb4-190"><a href="#cb4-190"></a><span class="fu">summarise</span>(<span class="at">total =</span> <span class="fu">sum</span>(Total)) <span class="sc">%&gt;%</span></span>
<span id="cb4-191"><a href="#cb4-191"></a><span class="fu">mutate</span>(<span class="at">grupo_edad =</span> columna) <span class="sc">%&gt;%</span></span>
<span id="cb4-192"><a href="#cb4-192"></a><span class="fu">filter</span>(<span class="sc">!</span>Año <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"2023"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-193"><a href="#cb4-193"></a><span class="fu">rename</span>(<span class="at">num_parados =</span> <span class="st">"total"</span>)</span>
<span id="cb4-194"><a href="#cb4-194"></a>parados <span class="ot">&lt;-</span> <span class="fu">rbind</span>(mas35, menos35)</span>
<span id="cb4-195"><a href="#cb4-195"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()[<span class="sc">!</span><span class="fu">ls</span>() <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"salario"</span>,<span class="st">"contrato"</span>, <span class="st">"activos"</span>, <span class="st">"parados"</span>)])</span>
<span id="cb4-196"><a href="#cb4-196"></a>act_parad <span class="ot">&lt;-</span> <span class="fu">merge</span>(parados, activos, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Año"</span>, <span class="st">"grupo_edad"</span>))</span>
<span id="cb4-197"><a href="#cb4-197"></a>act_parad <span class="ot">&lt;-</span> act_parad <span class="sc">%&gt;%</span></span>
<span id="cb4-198"><a href="#cb4-198"></a><span class="fu">mutate</span>(<span class="at">num_ocupados =</span> num_activos <span class="sc">-</span> num_parados)</span>
<span id="cb4-199"><a href="#cb4-199"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()[<span class="sc">!</span><span class="fu">ls</span>() <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"salario"</span>,<span class="st">"contrato"</span>, <span class="st">"act_parad"</span>)])</span>
<span id="cb4-200"><a href="#cb4-200"></a><span class="do">##------------------------------Gráficos----------------------------------------</span></span>
<span id="cb4-201"><a href="#cb4-201"></a><span class="fu">head</span>(act_parad)</span>
<span id="cb4-202"><a href="#cb4-202"></a><span class="co">#&gt;    Año      grupo_edad num_parados num_activos num_ocupados</span></span>
<span id="cb4-203"><a href="#cb4-203"></a><span class="co">#&gt; 1 2002 De 16 a 34 años     973.125    5449.350     4476.225</span></span>
<span id="cb4-204"><a href="#cb4-204"></a><span class="co">#&gt; 2 2002   Mayores de 35     727.850    8622.975     7895.125</span></span>
<span id="cb4-205"><a href="#cb4-205"></a><span class="co">#&gt; 3 2003 De 16 a 34 años     999.050    5571.700     4572.650</span></span>
<span id="cb4-206"><a href="#cb4-206"></a><span class="co">#&gt; 4 2003   Mayores de 35     764.300    9043.125     8278.825</span></span>
<span id="cb4-207"><a href="#cb4-207"></a><span class="co">#&gt; 5 2004 De 16 a 34 años     942.150    5596.725     4654.575</span></span>
<span id="cb4-208"><a href="#cb4-208"></a><span class="co">#&gt; 6 2004   Mayores de 35     791.800    9414.925     8623.125</span></span>
<span id="cb4-209"><a href="#cb4-209"></a>porcentaje_parados <span class="ot">&lt;-</span> act_parad <span class="sc">%&gt;%</span></span>
<span id="cb4-210"><a href="#cb4-210"></a><span class="fu">group_by</span>(Año) <span class="sc">%&gt;%</span></span>
<span id="cb4-211"><a href="#cb4-211"></a><span class="fu">group_by</span>(Año, grupo_edad) <span class="sc">%&gt;%</span></span>
<span id="cb4-212"><a href="#cb4-212"></a><span class="fu">mutate</span>(<span class="at">Ocupados_edad =</span> (num_ocupados <span class="sc">/</span> num_activos) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb4-213"><a href="#cb4-213"></a><span class="at">Parados_edad =</span> (num_parados <span class="sc">/</span> num_activos) <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-214"><a href="#cb4-214"></a><span class="fu">rename</span>(<span class="at">Periodo =</span> Año)</span>
<span id="cb4-215"><a href="#cb4-215"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()[<span class="sc">!</span><span class="fu">ls</span>() <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"salario"</span>,<span class="st">"contrato"</span>, <span class="st">"porcentaje_parados"</span>, <span class="st">"vivienda"</span>,</span>
<span id="cb4-216"><a href="#cb4-216"></a><span class="st">"act_parad"</span>)])</span>
<span id="cb4-217"><a href="#cb4-217"></a>contrato <span class="ot">&lt;-</span> contrato <span class="sc">%&gt;%</span></span>
<span id="cb4-218"><a href="#cb4-218"></a><span class="fu">rename</span>(<span class="at">jornada_completa =</span> tiempo_completo,</span>
<span id="cb4-219"><a href="#cb4-219"></a><span class="at">jornada_parcial =</span> tiempo_parcial,</span>
<span id="cb4-220"><a href="#cb4-220"></a><span class="at">grupo_edad =</span> Edad)</span>
<span id="cb4-221"><a href="#cb4-221"></a>P2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(porcentaje_parados, <span class="fu">aes</span>(<span class="at">x =</span> Periodo, <span class="at">y =</span> Parados_edad, <span class="at">group =</span> grupo_edad,</span>
<span id="cb4-222"><a href="#cb4-222"></a><span class="at">color =</span> grupo_edad)) <span class="sc">+</span></span>
<span id="cb4-223"><a href="#cb4-223"></a><span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb4-224"><a href="#cb4-224"></a><span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"red"</span>)) <span class="sc">+</span></span>
<span id="cb4-225"><a href="#cb4-225"></a><span class="fu">geom_point</span>( <span class="at">color=</span><span class="st">"black"</span>, <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb4-226"><a href="#cb4-226"></a><span class="fu">theme_economist</span>() <span class="sc">+</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Porcentaje de parados según la edad"</span>, <span class="at">x =</span> <span class="st">"Periodo"</span>, <span class="at">y =</span></span>
<span id="cb4-227"><a href="#cb4-227"></a><span class="st">"Porcentaje"</span>, <span class="at">caption =</span> <span class="st">"Elaboración propia a partir de datos de INE"</span>)</span>
<span id="cb4-228"><a href="#cb4-228"></a></span>
<span id="cb4-229"><a href="#cb4-229"></a>plotly<span class="sc">::</span><span class="fu">ggplotly</span>(P2)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-f80f2d9e2e2f9e1683ec" style="width:95%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-f80f2d9e2e2f9e1683ec">{"x":{"data":[{"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21],"y":[17.857634396762915,17.930793115207209,16.833951998713534,14.791175185670596,13.488376181831766,12.939783716197342,18.191172439823319,28.541922465568277,31.724913048100728,34.587602527901034,40.285940229048023,42.433889818370019,39.659317742645243,36.701547707690672,33.286792557162208,29.447122043100098,26.19892443310972,24.712726573392949,29.189494210672933,26.989417262231996,22.360807164050854],"text":["Periodo: 2002<br />Parados_edad: 17.857634<br />grupo_edad: De 16 a 34 años<br />grupo_edad: De 16 a 34 años","Periodo: 2003<br />Parados_edad: 17.930793<br />grupo_edad: De 16 a 34 años<br />grupo_edad: De 16 a 34 años","Periodo: 2004<br />Parados_edad: 16.833952<br />grupo_edad: De 16 a 34 años<br />grupo_edad: De 16 a 34 años","Periodo: 2005<br />Parados_edad: 14.791175<br />grupo_edad: De 16 a 34 años<br />grupo_edad: De 16 a 34 años","Periodo: 2006<br />Parados_edad: 13.488376<br />grupo_edad: De 16 a 34 años<br />grupo_edad: De 16 a 34 años","Periodo: 2007<br />Parados_edad: 12.939784<br />grupo_edad: De 16 a 34 años<br />grupo_edad: De 16 a 34 años","Periodo: 2008<br />Parados_edad: 18.191172<br />grupo_edad: De 16 a 34 años<br />grupo_edad: De 16 a 34 años","Periodo: 2009<br />Parados_edad: 28.541922<br />grupo_edad: De 16 a 34 años<br />grupo_edad: De 16 a 34 años","Periodo: 2010<br />Parados_edad: 31.724913<br />grupo_edad: De 16 a 34 años<br />grupo_edad: De 16 a 34 años","Periodo: 2011<br />Parados_edad: 34.587603<br />grupo_edad: De 16 a 34 años<br />grupo_edad: De 16 a 34 años","Periodo: 2012<br />Parados_edad: 40.285940<br />grupo_edad: De 16 a 34 años<br />grupo_edad: De 16 a 34 años","Periodo: 2013<br />Parados_edad: 42.433890<br />grupo_edad: De 16 a 34 años<br />grupo_edad: De 16 a 34 años","Periodo: 2014<br />Parados_edad: 39.659318<br />grupo_edad: De 16 a 34 años<br />grupo_edad: De 16 a 34 años","Periodo: 2015<br />Parados_edad: 36.701548<br />grupo_edad: De 16 a 34 años<br />grupo_edad: De 16 a 34 años","Periodo: 2016<br />Parados_edad: 33.286793<br />grupo_edad: De 16 a 34 años<br />grupo_edad: De 16 a 34 años","Periodo: 2017<br />Parados_edad: 29.447122<br />grupo_edad: De 16 a 34 años<br />grupo_edad: De 16 a 34 años","Periodo: 2018<br />Parados_edad: 26.198924<br />grupo_edad: De 16 a 34 años<br />grupo_edad: De 16 a 34 años","Periodo: 2019<br />Parados_edad: 24.712727<br />grupo_edad: De 16 a 34 años<br />grupo_edad: De 16 a 34 años","Periodo: 2020<br />Parados_edad: 29.189494<br />grupo_edad: De 16 a 34 años<br />grupo_edad: De 16 a 34 años","Periodo: 2021<br />Parados_edad: 26.989417<br />grupo_edad: De 16 a 34 años<br />grupo_edad: De 16 a 34 años","Periodo: 2022<br />Parados_edad: 22.360807<br />grupo_edad: De 16 a 34 años<br />grupo_edad: De 16 a 34 años"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,255,1)","dash":"solid"},"hoveron":"points","name":"De 16 a 34 años","legendgroup":"De 16 a 34 años","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21],"y":[8.4408223379981973,8.4517243762526775,8.4100510625416565,6.8581135285323906,6.5030089534713049,6.5020215601853382,8.7769522895714989,14.188708852419222,16.115160257893031,17.286060378651307,20.270203010617394,21.571035208644183,20.54904585239067,18.442376635840333,16.641500706088532,14.551007689845996,12.906880482201158,11.923588388171872,12.550289616373966,12.312963272788112,11.189825554547479],"text":["Periodo: 2002<br />Parados_edad:  8.440822<br />grupo_edad: Mayores de 35<br />grupo_edad: Mayores de 35","Periodo: 2003<br />Parados_edad:  8.451724<br />grupo_edad: Mayores de 35<br />grupo_edad: Mayores de 35","Periodo: 2004<br />Parados_edad:  8.410051<br />grupo_edad: Mayores de 35<br />grupo_edad: Mayores de 35","Periodo: 2005<br />Parados_edad:  6.858114<br />grupo_edad: Mayores de 35<br />grupo_edad: Mayores de 35","Periodo: 2006<br />Parados_edad:  6.503009<br />grupo_edad: Mayores de 35<br />grupo_edad: Mayores de 35","Periodo: 2007<br />Parados_edad:  6.502022<br />grupo_edad: Mayores de 35<br />grupo_edad: Mayores de 35","Periodo: 2008<br />Parados_edad:  8.776952<br />grupo_edad: Mayores de 35<br />grupo_edad: Mayores de 35","Periodo: 2009<br />Parados_edad: 14.188709<br />grupo_edad: Mayores de 35<br />grupo_edad: Mayores de 35","Periodo: 2010<br />Parados_edad: 16.115160<br />grupo_edad: Mayores de 35<br />grupo_edad: Mayores de 35","Periodo: 2011<br />Parados_edad: 17.286060<br />grupo_edad: Mayores de 35<br />grupo_edad: Mayores de 35","Periodo: 2012<br />Parados_edad: 20.270203<br />grupo_edad: Mayores de 35<br />grupo_edad: Mayores de 35","Periodo: 2013<br />Parados_edad: 21.571035<br />grupo_edad: Mayores de 35<br />grupo_edad: Mayores de 35","Periodo: 2014<br />Parados_edad: 20.549046<br />grupo_edad: Mayores de 35<br />grupo_edad: Mayores de 35","Periodo: 2015<br />Parados_edad: 18.442377<br />grupo_edad: Mayores de 35<br />grupo_edad: Mayores de 35","Periodo: 2016<br />Parados_edad: 16.641501<br />grupo_edad: Mayores de 35<br />grupo_edad: Mayores de 35","Periodo: 2017<br />Parados_edad: 14.551008<br />grupo_edad: Mayores de 35<br />grupo_edad: Mayores de 35","Periodo: 2018<br />Parados_edad: 12.906880<br />grupo_edad: Mayores de 35<br />grupo_edad: Mayores de 35","Periodo: 2019<br />Parados_edad: 11.923588<br />grupo_edad: Mayores de 35<br />grupo_edad: Mayores de 35","Periodo: 2020<br />Parados_edad: 12.550290<br />grupo_edad: Mayores de 35<br />grupo_edad: Mayores de 35","Periodo: 2021<br />Parados_edad: 12.312963<br />grupo_edad: Mayores de 35<br />grupo_edad: Mayores de 35","Periodo: 2022<br />Parados_edad: 11.189826<br />grupo_edad: Mayores de 35<br />grupo_edad: Mayores de 35"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(255,0,0,1)","dash":"solid"},"hoveron":"points","name":"Mayores de 35","legendgroup":"Mayores de 35","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,14,14,15,15,16,16,17,17,18,18,19,19,20,20,21,21],"y":[17.857634396762915,8.4408223379981973,17.930793115207209,8.4517243762526775,16.833951998713534,8.4100510625416565,14.791175185670596,6.8581135285323906,13.488376181831766,6.5030089534713049,12.939783716197342,6.5020215601853382,18.191172439823319,8.7769522895714989,28.541922465568277,14.188708852419222,31.724913048100728,16.115160257893031,34.587602527901034,17.286060378651307,40.285940229048023,20.270203010617394,42.433889818370019,21.571035208644183,39.659317742645243,20.54904585239067,36.701547707690672,18.442376635840333,33.286792557162208,16.641500706088532,29.447122043100098,14.551007689845996,26.19892443310972,12.906880482201158,24.712726573392949,11.923588388171872,29.189494210672933,12.550289616373966,26.989417262231996,12.312963272788112,22.360807164050854,11.189825554547479],"text":["Periodo: 2002<br />Parados_edad: 17.857634<br />grupo_edad: De 16 a 34 años<br />grupo_edad: black","Periodo: 2002<br />Parados_edad:  8.440822<br />grupo_edad: Mayores de 35<br />grupo_edad: black","Periodo: 2003<br />Parados_edad: 17.930793<br />grupo_edad: De 16 a 34 años<br />grupo_edad: black","Periodo: 2003<br />Parados_edad:  8.451724<br />grupo_edad: Mayores de 35<br />grupo_edad: black","Periodo: 2004<br />Parados_edad: 16.833952<br />grupo_edad: De 16 a 34 años<br />grupo_edad: black","Periodo: 2004<br />Parados_edad:  8.410051<br />grupo_edad: Mayores de 35<br />grupo_edad: black","Periodo: 2005<br />Parados_edad: 14.791175<br />grupo_edad: De 16 a 34 años<br />grupo_edad: black","Periodo: 2005<br />Parados_edad:  6.858114<br />grupo_edad: Mayores de 35<br />grupo_edad: black","Periodo: 2006<br />Parados_edad: 13.488376<br />grupo_edad: De 16 a 34 años<br />grupo_edad: black","Periodo: 2006<br />Parados_edad:  6.503009<br />grupo_edad: Mayores de 35<br />grupo_edad: black","Periodo: 2007<br />Parados_edad: 12.939784<br />grupo_edad: De 16 a 34 años<br />grupo_edad: black","Periodo: 2007<br />Parados_edad:  6.502022<br />grupo_edad: Mayores de 35<br />grupo_edad: black","Periodo: 2008<br />Parados_edad: 18.191172<br />grupo_edad: De 16 a 34 años<br />grupo_edad: black","Periodo: 2008<br />Parados_edad:  8.776952<br />grupo_edad: Mayores de 35<br />grupo_edad: black","Periodo: 2009<br />Parados_edad: 28.541922<br />grupo_edad: De 16 a 34 años<br />grupo_edad: black","Periodo: 2009<br />Parados_edad: 14.188709<br />grupo_edad: Mayores de 35<br />grupo_edad: black","Periodo: 2010<br />Parados_edad: 31.724913<br />grupo_edad: De 16 a 34 años<br />grupo_edad: black","Periodo: 2010<br />Parados_edad: 16.115160<br />grupo_edad: Mayores de 35<br />grupo_edad: black","Periodo: 2011<br />Parados_edad: 34.587603<br />grupo_edad: De 16 a 34 años<br />grupo_edad: black","Periodo: 2011<br />Parados_edad: 17.286060<br />grupo_edad: Mayores de 35<br />grupo_edad: black","Periodo: 2012<br />Parados_edad: 40.285940<br />grupo_edad: De 16 a 34 años<br />grupo_edad: black","Periodo: 2012<br />Parados_edad: 20.270203<br />grupo_edad: Mayores de 35<br />grupo_edad: black","Periodo: 2013<br />Parados_edad: 42.433890<br />grupo_edad: De 16 a 34 años<br />grupo_edad: black","Periodo: 2013<br />Parados_edad: 21.571035<br />grupo_edad: Mayores de 35<br />grupo_edad: black","Periodo: 2014<br />Parados_edad: 39.659318<br />grupo_edad: De 16 a 34 años<br />grupo_edad: black","Periodo: 2014<br />Parados_edad: 20.549046<br />grupo_edad: Mayores de 35<br />grupo_edad: black","Periodo: 2015<br />Parados_edad: 36.701548<br />grupo_edad: De 16 a 34 años<br />grupo_edad: black","Periodo: 2015<br />Parados_edad: 18.442377<br />grupo_edad: Mayores de 35<br />grupo_edad: black","Periodo: 2016<br />Parados_edad: 33.286793<br />grupo_edad: De 16 a 34 años<br />grupo_edad: black","Periodo: 2016<br />Parados_edad: 16.641501<br />grupo_edad: Mayores de 35<br />grupo_edad: black","Periodo: 2017<br />Parados_edad: 29.447122<br />grupo_edad: De 16 a 34 años<br />grupo_edad: black","Periodo: 2017<br />Parados_edad: 14.551008<br />grupo_edad: Mayores de 35<br />grupo_edad: black","Periodo: 2018<br />Parados_edad: 26.198924<br />grupo_edad: De 16 a 34 años<br />grupo_edad: black","Periodo: 2018<br />Parados_edad: 12.906880<br />grupo_edad: Mayores de 35<br />grupo_edad: black","Periodo: 2019<br />Parados_edad: 24.712727<br />grupo_edad: De 16 a 34 años<br />grupo_edad: black","Periodo: 2019<br />Parados_edad: 11.923588<br />grupo_edad: Mayores de 35<br />grupo_edad: black","Periodo: 2020<br />Parados_edad: 29.189494<br />grupo_edad: De 16 a 34 años<br />grupo_edad: black","Periodo: 2020<br />Parados_edad: 12.550290<br />grupo_edad: Mayores de 35<br />grupo_edad: black","Periodo: 2021<br />Parados_edad: 26.989417<br />grupo_edad: De 16 a 34 años<br />grupo_edad: black","Periodo: 2021<br />Parados_edad: 12.312963<br />grupo_edad: Mayores de 35<br />grupo_edad: black","Periodo: 2022<br />Parados_edad: 22.360807<br />grupo_edad: De 16 a 34 años<br />grupo_edad: black","Periodo: 2022<br />Parados_edad: 11.189826<br />grupo_edad: Mayores de 35<br />grupo_edad: black"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":7.559055118110237,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":53.858032378580326,"r":13.283520132835205,"b":38.522208385222093,"l":35.865504358655052},"plot_bgcolor":"transparent","paper_bgcolor":"rgba(213,228,235,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"<b> Porcentaje de parados según la edad <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":21.917808219178081},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,21.600000000000001],"tickmode":"array","ticktext":["2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021","2022"],"tickvals":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,14.999999999999998,15.999999999999998,17,18,19,20,21],"categoryorder":"array","categoryarray":["2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021","2022"],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":-6.6417600664175991,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.53134080531340799,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"Periodo","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[4.7054281472761037,44.230483231279251],"tickmode":"array","ticktext":["10","20","30","40"],"tickvals":[10,20,30,40],"categoryorder":"array","categoryarray":["10","20","30","40"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":-6.6417600664176026,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":1.16230801162308,"zeroline":false,"anchor":"x","title":{"text":"Porcentaje","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"transparent","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":18.264840182648406},"title":{"text":"grupo_edad","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"1c5c7cdc6b3":{"x":{},"y":{},"colour":{},"type":"scatter"},"1c5c1db97ab3":{"x":{},"y":{},"colour":{}}},"cur_data":"1c5c7cdc6b3","visdat":{"1c5c7cdc6b3":["function (y) ","x"],"1c5c1db97ab3":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>En este otro gráfico podemos observar además cómo la tasa de desempleo es muy superior en el caso de los menores de 35 años respecto a los mayores de 35 años, es decir, durante este primer tramo de edad, de 16 a 34 años, sufrirán un menor poder adquisitivo respecto a los mayores de 34 años.</p>
<hr></section><section id="porcentaje-de-contratos-de-jornada-completa-por-edad" class="level2"><h2 class="anchored" data-anchor-id="porcentaje-de-contratos-de-jornada-completa-por-edad">Porcentaje de contratos de Jornada completa por edad</h2>
<div class="cell" data-layout-align="center">
<details open=""><summary>Código</summary><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>p3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(contrato, <span class="fu">aes</span>(<span class="at">x =</span> Periodo, <span class="at">y =</span> jornada_completa, <span class="at">fill =</span> grupo_edad)) <span class="sc">+</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"blue3"</span>, <span class="st">"red3"</span>), <span class="at">name =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb5-4"><a href="#cb5-4"></a>  <span class="fu">theme_economist</span>() <span class="sc">+</span></span>
<span id="cb5-5"><a href="#cb5-5"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Contratos de jornada completa según la edad"</span>, <span class="at">x =</span> <span class="st">"Periodo"</span>, <span class="at">y =</span> <span class="st">"Porcentaje"</span>, <span class="at">caption =</span> <span class="st">"Elaboración propia a partir de datos de INE"</span>) </span>
<span id="cb5-6"><a href="#cb5-6"></a>plotly<span class="sc">::</span><span class="fu">ggplotly</span>(p3)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-891d1a442976217bc021" style="width:95%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-891d1a442976217bc021">{"x":{"data":[{"orientation":"v","width":[0.4499999999998181,0.4499999999998181,0.4499999999998181,0.4499999999998181,0.4499999999998181,0.4499999999998181,0.4499999999998181,0.4499999999998181,0.4499999999998181,0.4499999999998181,0.4499999999998181,0.4499999999998181,0.4499999999998181,0.4499999999998181,0.4499999999998181,0.4499999999998181,0.4499999999998181],"base":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"x":[2005.7750000000001,2006.7750000000001,2007.7750000000001,2008.7750000000001,2009.7750000000001,2010.7750000000001,2011.7750000000001,2012.7750000000001,2013.7750000000001,2014.7750000000001,2015.7750000000001,2016.7750000000001,2017.7750000000001,2018.7750000000001,2019.7750000000001,2020.7750000000001,2021.7750000000001],"y":[60,60.125,58.899999999999999,56.674999999999997,54.325000000000003,51.274999999999999,49.900000000000006,47.324999999999996,46.475000000000001,47.200000000000003,47.225000000000001,48.100000000000001,48.674999999999997,48.674999999999997,48.075000000000003,47.5,48.399999999999999],"text":["Periodo: 2006<br />jornada_completa: 60.0000<br />grupo_edad: De 16 a 34 años","Periodo: 2007<br />jornada_completa: 60.1250<br />grupo_edad: De 16 a 34 años","Periodo: 2008<br />jornada_completa: 58.9000<br />grupo_edad: De 16 a 34 años","Periodo: 2009<br />jornada_completa: 56.6750<br />grupo_edad: De 16 a 34 años","Periodo: 2010<br />jornada_completa: 54.3250<br />grupo_edad: De 16 a 34 años","Periodo: 2011<br />jornada_completa: 51.2750<br />grupo_edad: De 16 a 34 años","Periodo: 2012<br />jornada_completa: 49.9000<br />grupo_edad: De 16 a 34 años","Periodo: 2013<br />jornada_completa: 47.3250<br />grupo_edad: De 16 a 34 años","Periodo: 2014<br />jornada_completa: 46.4750<br />grupo_edad: De 16 a 34 años","Periodo: 2015<br />jornada_completa: 47.2000<br />grupo_edad: De 16 a 34 años","Periodo: 2016<br />jornada_completa: 47.2250<br />grupo_edad: De 16 a 34 años","Periodo: 2017<br />jornada_completa: 48.1000<br />grupo_edad: De 16 a 34 años","Periodo: 2018<br />jornada_completa: 48.6750<br />grupo_edad: De 16 a 34 años","Periodo: 2019<br />jornada_completa: 48.6750<br />grupo_edad: De 16 a 34 años","Periodo: 2020<br />jornada_completa: 48.0750<br />grupo_edad: De 16 a 34 años","Periodo: 2021<br />jornada_completa: 47.5000<br />grupo_edad: De 16 a 34 años","Periodo: 2022<br />jornada_completa: 48.4000<br />grupo_edad: De 16 a 34 años"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,0,205,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"De 16 a 34 años","legendgroup":"De 16 a 34 años","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.4499999999998181,0.4499999999998181,0.4499999999998181,0.4499999999998181,0.4499999999998181,0.4499999999998181,0.4499999999998181,0.4499999999998181,0.4499999999998181,0.4499999999998181,0.4499999999998181,0.4499999999998181,0.4499999999998181,0.4499999999998181,0.4499999999998181,0.4499999999998181,0.4499999999998181],"base":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"x":[2006.2249999999999,2007.2249999999999,2008.2249999999999,2009.2249999999999,2010.2249999999999,2011.2249999999999,2012.2249999999999,2013.2249999999999,2014.2249999999999,2015.2249999999999,2016.2249999999999,2017.2249999999999,2018.2249999999999,2019.2249999999999,2020.2249999999999,2021.2249999999999,2022.2249999999999],"y":[72.224999999999994,72.012500000000003,72.1875,71.637500000000003,72.450000000000003,72.349999999999994,71.737499999999997,71.125,70.325000000000003,71.775000000000006,71.637500000000003,72.462500000000006,71.737499999999997,71.637500000000003,71.9375,72.450000000000003,72.237499999999997],"text":["Periodo: 2006<br />jornada_completa: 72.2250<br />grupo_edad: Mayores de 35","Periodo: 2007<br />jornada_completa: 72.0125<br />grupo_edad: Mayores de 35","Periodo: 2008<br />jornada_completa: 72.1875<br />grupo_edad: Mayores de 35","Periodo: 2009<br />jornada_completa: 71.6375<br />grupo_edad: Mayores de 35","Periodo: 2010<br />jornada_completa: 72.4500<br />grupo_edad: Mayores de 35","Periodo: 2011<br />jornada_completa: 72.3500<br />grupo_edad: Mayores de 35","Periodo: 2012<br />jornada_completa: 71.7375<br />grupo_edad: Mayores de 35","Periodo: 2013<br />jornada_completa: 71.1250<br />grupo_edad: Mayores de 35","Periodo: 2014<br />jornada_completa: 70.3250<br />grupo_edad: Mayores de 35","Periodo: 2015<br />jornada_completa: 71.7750<br />grupo_edad: Mayores de 35","Periodo: 2016<br />jornada_completa: 71.6375<br />grupo_edad: Mayores de 35","Periodo: 2017<br />jornada_completa: 72.4625<br />grupo_edad: Mayores de 35","Periodo: 2018<br />jornada_completa: 71.7375<br />grupo_edad: Mayores de 35","Periodo: 2019<br />jornada_completa: 71.6375<br />grupo_edad: Mayores de 35","Periodo: 2020<br />jornada_completa: 71.9375<br />grupo_edad: Mayores de 35","Periodo: 2021<br />jornada_completa: 72.4500<br />grupo_edad: Mayores de 35","Periodo: 2022<br />jornada_completa: 72.2375<br />grupo_edad: Mayores de 35"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(205,0,0,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Mayores de 35","legendgroup":"Mayores de 35","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":53.858032378580326,"r":13.283520132835205,"b":38.522208385222093,"l":35.865504358655052},"plot_bgcolor":"transparent","paper_bgcolor":"rgba(213,228,235,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"<b> Contratos de jornada completa según la edad <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":21.917808219178081},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[2004.7050000000002,2023.2949999999998],"tickmode":"array","ticktext":["2005","2010","2015","2020"],"tickvals":[2005,2010,2015,2020],"categoryorder":"array","categoryarray":["2005","2010","2015","2020"],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":-6.6417600664175991,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.53134080531340799,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"Periodo","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-3.6231250000000004,76.085625000000007],"tickmode":"array","ticktext":["0","20","40","60"],"tickvals":[0,20,39.999999999999993,60],"categoryorder":"array","categoryarray":["0","20","40","60"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":-6.6417600664176026,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":1.16230801162308,"zeroline":false,"anchor":"x","title":{"text":"Porcentaje","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"transparent","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":18.264840182648406},"title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"1c5c2d9399d":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"1c5c2d9399d","visdat":{"1c5c2d9399d":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Además, en este gráfico de barras, podemos apreciar como los contratos a jornada completa han disminuido prácticamente 10 puntos porcentuales desde la Gran Recesión hasta nuestros días, mientras que los de los mayores de 35 años han permanecido estables.</p>
<p>El hecho de que los contratos no sean a jornada completa, influye de forma decisiva en que la renta final sea menor, ya que a menos horas trabajadas, menos horas cobradas.</p>
<hr></section></section><section id="índice-del-nivel-de-precios-de-la-vivienda-a-nivel-nacional" class="level1"><h1>Índice del nivel de Precios de la vivienda a nivel nacional</h1>
<p>Ahora vamos a analizar cómo se han comportado los precios de la vivienda en general. Primero lo vamos a hacer observando el comportamiento de los precios de forma general a nivel nacional. Luego veremos cómo se ha comportado en términos de tasas de variación, y más tarde, el nivel de precios por comunidades autónomas y en diferentes momentos del tiempo.</p>
<div class="cell" data-layout-align="center">
<details open=""><summary>Código</summary><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="co">#Paquetes preliminares</span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="co">#install.packages("mapSpain")</span></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="fu">library</span>(mapSpain)</span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co">#install.packages("pxR")</span></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="fu">library</span>(pxR)</span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="co">#install.packages("tidyverse")</span></span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="fu">library</span>(data.table)</span>
<span id="cb6-9"><a href="#cb6-9"></a><span class="fu">library</span>(rlist)</span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="fu">library</span>(fs)</span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="fu">library</span>(curl)</span>
<span id="cb6-12"><a href="#cb6-12"></a><span class="fu">library</span>(rio)</span>
<span id="cb6-13"><a href="#cb6-13"></a><span class="fu">library</span>(sf)</span>
<span id="cb6-14"><a href="#cb6-14"></a><span class="fu">library</span>(readxl)</span>
<span id="cb6-15"><a href="#cb6-15"></a><span class="fu">library</span>(downloader)</span>
<span id="cb6-16"><a href="#cb6-16"></a><span class="fu">library</span>(writexl)</span>
<span id="cb6-17"><a href="#cb6-17"></a><span class="co">#install.packages("rlist")</span></span>
<span id="cb6-18"><a href="#cb6-18"></a><span class="co"># install.packages("devtools")</span></span>
<span id="cb6-19"><a href="#cb6-19"></a><span class="co">#devtools::install_github("r-lib/conflicted")</span></span>
<span id="cb6-20"><a href="#cb6-20"></a><span class="co">#Creamos una carpeta para guardar los datos</span></span>
<span id="cb6-21"><a href="#cb6-21"></a><span class="co">#Descargamos los datos en formato PX desde el Ine</span></span>
<span id="cb6-22"><a href="#cb6-22"></a><span class="co">#Índice de Precios de Vivienda por CCAA: general, vivienda nueva y de segunda mano</span></span>
<span id="cb6-23"><a href="#cb6-23"></a><span class="co">#Como la URL es: "https://www.ine.es/jaxiT3/files/t/es/px/25171.px?nocab=1"</span></span>
<span id="cb6-24"><a href="#cb6-24"></a>url <span class="ot">&lt;-</span> <span class="st">"https://www.ine.es/jaxiT3/files/t/es/px/25171.px?nocab=1"</span></span>
<span id="cb6-25"><a href="#cb6-25"></a>aa <span class="ot">&lt;-</span> <span class="fu">read.px</span>(url)</span>
<span id="cb6-26"><a href="#cb6-26"></a><span class="co">#Lo convertimos a CSV para simplificar y creamos un dataframe</span></span>
<span id="cb6-27"><a href="#cb6-27"></a><span class="fu">write.csv</span>(aa, <span class="at">file =</span> <span class="st">"./datos_pulidos/data.csv"</span>, <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb6-28"><a href="#cb6-28"></a><span class="co">#Lo convertimos a CSV para simplificar y creamos un dataframe</span></span>
<span id="cb6-29"><a href="#cb6-29"></a><span class="fu">write.csv</span>(aa, <span class="at">file =</span> <span class="st">"./datos_pulidos/data.csv"</span>)</span>
<span id="cb6-30"><a href="#cb6-30"></a>df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"./datos_pulidos/data.csv"</span>)</span>
<span id="cb6-31"><a href="#cb6-31"></a><span class="co">#Ahora nos ponemos a curra un poquito:</span></span>
<span id="cb6-32"><a href="#cb6-32"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb6-33"><a href="#cb6-33"></a><span class="co">#install.packages("plotly")</span></span>
<span id="cb6-34"><a href="#cb6-34"></a><span class="fu">library</span>(plotly)</span>
<span id="cb6-35"><a href="#cb6-35"></a><span class="co">#install.packages("ggExtra")</span></span>
<span id="cb6-36"><a href="#cb6-36"></a><span class="fu">library</span>(ggExtra)</span>
<span id="cb6-37"><a href="#cb6-37"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb6-38"><a href="#cb6-38"></a><span class="co">#Os voy a matar con este código y esta sintaxis que me hacéis arreglar cada vez</span></span>
<span id="cb6-39"><a href="#cb6-39"></a>df1 <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">rename</span>(á<span class="at">mbito =</span> Comunidades.y.Ciudades.Autónomas, <span class="at">tipo =</span> </span>
<span id="cb6-40"><a href="#cb6-40"></a>                              General..vivienda.nueva.y.de.segunda.mano, <span class="at">Valor =</span> value) <span class="sc">%&gt;%</span> <span class="fu">filter</span> (tipo <span class="sc">==</span> <span class="st">"General"</span>, Índices.y.tasas <span class="sc">==</span> <span class="st">"Índice"</span>, ámbito <span class="sc">==</span> <span class="st">"Nacional"</span>)</span>
<span id="cb6-41"><a href="#cb6-41"></a><span class="co">#rm (list = ls())</span></span>
<span id="cb6-42"><a href="#cb6-42"></a>df1<span class="fl">.1</span> <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">Territorio =</span> Comunidades.y.Ciudades.Autónomas, <span class="at">tipo =</span> General..vivienda.nueva.y.de.segunda.mano, <span class="at">Valor =</span> value)</span>
<span id="cb6-43"><a href="#cb6-43"></a></span>
<span id="cb6-44"><a href="#cb6-44"></a>df1<span class="fl">.2</span> <span class="ot">&lt;-</span> df1<span class="fl">.1</span> <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Territorio =</span> <span class="fu">case_when</span>( </span>
<span id="cb6-45"><a href="#cb6-45"></a>  Territorio <span class="sc">==</span> <span class="st">"01 Andalucía"</span> <span class="sc">~</span> <span class="st">"Andalucía"</span>,</span>
<span id="cb6-46"><a href="#cb6-46"></a>  Territorio <span class="sc">==</span> <span class="st">"02 Aragón"</span> <span class="sc">~</span> <span class="st">"Aragón"</span>,</span>
<span id="cb6-47"><a href="#cb6-47"></a>  Territorio <span class="sc">==</span> <span class="st">"03 Asturias, Principado de"</span> <span class="sc">~</span> <span class="st">"Asturias, Principado de"</span>,</span>
<span id="cb6-48"><a href="#cb6-48"></a>  Territorio <span class="sc">==</span> <span class="st">"04 Balears, Illes"</span> <span class="sc">~</span> <span class="st">"Balears, Illes"</span>,</span>
<span id="cb6-49"><a href="#cb6-49"></a>  Territorio <span class="sc">==</span> <span class="st">"05 Canarias"</span> <span class="sc">~</span> <span class="st">"Canarias"</span>,</span>
<span id="cb6-50"><a href="#cb6-50"></a>  Territorio <span class="sc">==</span> <span class="st">"06 Cantabria"</span> <span class="sc">~</span> <span class="st">"Cantabria"</span>,</span>
<span id="cb6-51"><a href="#cb6-51"></a>  Territorio <span class="sc">==</span> <span class="st">"07 Castilla y León"</span> <span class="sc">~</span> <span class="st">"Castilla y León"</span>,</span>
<span id="cb6-52"><a href="#cb6-52"></a>  Territorio <span class="sc">==</span> <span class="st">"08 Castilla - La Mancha"</span> <span class="sc">~</span> <span class="st">"Castilla-La Mancha"</span>,</span>
<span id="cb6-53"><a href="#cb6-53"></a>  Territorio <span class="sc">==</span> <span class="st">"09 Cataluña"</span> <span class="sc">~</span> <span class="st">"Cataluña"</span>,</span>
<span id="cb6-54"><a href="#cb6-54"></a>  Territorio <span class="sc">==</span> <span class="st">"10 Comunitat Valenciana"</span> <span class="sc">~</span> <span class="st">"Comunitat Valenciana"</span>,</span>
<span id="cb6-55"><a href="#cb6-55"></a>  Territorio <span class="sc">==</span> <span class="st">"11 Extremadura"</span> <span class="sc">~</span> <span class="st">"Extremadura"</span>,</span>
<span id="cb6-56"><a href="#cb6-56"></a>  Territorio <span class="sc">==</span> <span class="st">"12 Galicia"</span> <span class="sc">~</span> <span class="st">"Galicia"</span>,</span>
<span id="cb6-57"><a href="#cb6-57"></a>  Territorio <span class="sc">==</span> <span class="st">"13 Madrid, Comunidad de"</span> <span class="sc">~</span> <span class="st">"Madrid, Comunidad de"</span>,</span>
<span id="cb6-58"><a href="#cb6-58"></a>  Territorio <span class="sc">==</span> <span class="st">"14 Murcia, Región de"</span> <span class="sc">~</span> <span class="st">"Murcia, Región de"</span>,</span>
<span id="cb6-59"><a href="#cb6-59"></a>  Territorio <span class="sc">==</span> <span class="st">"15 Navarra, Comunidad Foral de"</span> <span class="sc">~</span> <span class="st">"Navarra, Comunidad Foral de"</span>,</span>
<span id="cb6-60"><a href="#cb6-60"></a>  Territorio <span class="sc">==</span> <span class="st">"16 País Vasco"</span> <span class="sc">~</span> <span class="st">"País Vasco"</span>,</span>
<span id="cb6-61"><a href="#cb6-61"></a>  Territorio <span class="sc">==</span> <span class="st">"17 Rioja, La"</span> <span class="sc">~</span> <span class="st">"Rioja, La"</span>, </span>
<span id="cb6-62"><a href="#cb6-62"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> Territorio))</span>
<span id="cb6-63"><a href="#cb6-63"></a></span>
<span id="cb6-64"><a href="#cb6-64"></a>df3 <span class="ot">&lt;-</span> df1<span class="fl">.2</span> <span class="sc">%&gt;%</span> <span class="fu">filter</span> (tipo <span class="sc">==</span> <span class="st">"General"</span>, Índices.y.tasas <span class="sc">==</span> <span class="st">"Índice"</span>, <span class="sc">!</span>(Territorio <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Nacional"</span>, <span class="st">"18 Ceuta"</span>, <span class="st">"19 Melilla"</span>)))</span>
<span id="cb6-65"><a href="#cb6-65"></a>prov <span class="ot">&lt;-</span> pjpv.curso.R<span class="fl">.2022</span><span class="sc">::</span>LAU2_prov_2020_canarias</span>
<span id="cb6-66"><a href="#cb6-66"></a>ccaa <span class="ot">&lt;-</span> prov <span class="sc">%&gt;%</span></span>
<span id="cb6-67"><a href="#cb6-67"></a>  <span class="fu">group_by</span>(ine_ccaa, ine_ccaa.n, ine_ccaa.n.pjp) <span class="sc">%&gt;%</span></span>
<span id="cb6-68"><a href="#cb6-68"></a>  <span class="fu">summarise</span>() <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>()</span>
<span id="cb6-69"><a href="#cb6-69"></a></span>
<span id="cb6-70"><a href="#cb6-70"></a>ccaa <span class="ot">&lt;-</span> ccaa <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">Territorio =</span> ine_ccaa.n)</span>
<span id="cb6-71"><a href="#cb6-71"></a>df4 <span class="ot">&lt;-</span> df3 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Periodo <span class="sc">==</span> <span class="st">"2023T3"</span>)</span>
<span id="cb6-72"><a href="#cb6-72"></a>df5 <span class="ot">&lt;-</span> <span class="fu">full_join</span>(ccaa, df4, <span class="at">by =</span> <span class="st">"Territorio"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>( <span class="sc">!</span>(Territorio <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Ceuta"</span>, <span class="st">"Melilla"</span>)))</span>
<span id="cb6-73"><a href="#cb6-73"></a>df6 <span class="ot">&lt;-</span> df3 <span class="sc">%&gt;%</span> </span>
<span id="cb6-74"><a href="#cb6-74"></a>  <span class="fu">filter</span>(Periodo <span class="sc">==</span> <span class="st">"2018T3"</span>)</span>
<span id="cb6-75"><a href="#cb6-75"></a>df7 <span class="ot">&lt;-</span> <span class="fu">full_join</span>(ccaa, df6, <span class="at">by =</span> <span class="st">"Territorio"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>( <span class="sc">!</span>(Territorio <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Ceuta"</span>, <span class="st">"Melilla"</span>)))</span>
<span id="cb6-76"><a href="#cb6-76"></a>df8 <span class="ot">&lt;-</span> df3 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Periodo <span class="sc">==</span> <span class="st">"2015T3"</span>)</span>
<span id="cb6-77"><a href="#cb6-77"></a>df9 <span class="ot">&lt;-</span> <span class="fu">full_join</span>(ccaa, df8, <span class="at">by =</span> <span class="st">"Territorio"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>( <span class="sc">!</span>(Territorio <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Ceuta"</span>, <span class="st">"Melilla"</span>)))</span>
<span id="cb6-78"><a href="#cb6-78"></a>df10 <span class="ot">&lt;-</span> df3 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Periodo <span class="sc">==</span> <span class="st">"2011T3"</span>)</span>
<span id="cb6-79"><a href="#cb6-79"></a>df11 <span class="ot">&lt;-</span> <span class="fu">full_join</span>(ccaa, df10, <span class="at">by =</span> <span class="st">"Territorio"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>( <span class="sc">!</span>(Territorio <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Ceuta"</span>, <span class="st">"Melilla"</span>)))</span>
<span id="cb6-80"><a href="#cb6-80"></a>df12 <span class="ot">&lt;-</span> df3 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Periodo <span class="sc">==</span> <span class="st">"2013T3"</span>)</span>
<span id="cb6-81"><a href="#cb6-81"></a>df13 <span class="ot">&lt;-</span> <span class="fu">full_join</span>(ccaa, df12, <span class="at">by =</span> <span class="st">"Territorio"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>( <span class="sc">!</span>(Territorio <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Ceuta"</span>, <span class="st">"Melilla"</span>)))</span>
<span id="cb6-82"><a href="#cb6-82"></a>df14 <span class="ot">&lt;-</span> df3 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Periodo <span class="sc">==</span> <span class="st">"2007T3"</span>)</span>
<span id="cb6-83"><a href="#cb6-83"></a>df15 <span class="ot">&lt;-</span> <span class="fu">full_join</span>(ccaa, df14, <span class="at">by =</span> <span class="st">"Territorio"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>( <span class="sc">!</span>(Territorio <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Ceuta"</span>, <span class="st">"Melilla"</span>)))</span>
<span id="cb6-84"><a href="#cb6-84"></a></span>
<span id="cb6-85"><a href="#cb6-85"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb6-86"><a href="#cb6-86"></a>escala_limites <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">90</span>, <span class="dv">190</span>)</span>
<span id="cb6-87"><a href="#cb6-87"></a></span>
<span id="cb6-88"><a href="#cb6-88"></a>p4 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df5, <span class="fu">aes</span>(<span class="at">fill =</span> Valor)) <span class="sc">+</span></span>
<span id="cb6-89"><a href="#cb6-89"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb6-90"><a href="#cb6-90"></a>  <span class="fu">geom_sf_label</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">as.character</span>(Valor)), <span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb6-91"><a href="#cb6-91"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">guide =</span> <span class="st">"legend"</span>,<span class="at">limits =</span> escala_limites) <span class="sc">+</span></span>
<span id="cb6-92"><a href="#cb6-92"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Precios vivienda CCAA 2023T3 (100 = 2015)"</span>,<span class="at">caption =</span> <span class="st">"Elaboración propia a partir de datos extraídos de INE"</span>) <span class="sc">+</span></span>
<span id="cb6-93"><a href="#cb6-93"></a>  <span class="fu">theme_void</span>() </span>
<span id="cb6-94"><a href="#cb6-94"></a></span>
<span id="cb6-95"><a href="#cb6-95"></a>p7 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df13, <span class="fu">aes</span>(<span class="at">fill =</span> Valor)) <span class="sc">+</span></span>
<span id="cb6-96"><a href="#cb6-96"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb6-97"><a href="#cb6-97"></a>  <span class="fu">geom_sf_label</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">as.character</span>(Valor)), <span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb6-98"><a href="#cb6-98"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">guide =</span> <span class="st">"legend"</span>,<span class="at">limits =</span> escala_limites) <span class="sc">+</span></span>
<span id="cb6-99"><a href="#cb6-99"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Precios vivienda CCAA 2013T3 (100 = 2015)"</span>,<span class="at">caption =</span> <span class="st">"Elaboración propia a partir de datos extraídos de INE"</span>) <span class="sc">+</span></span>
<span id="cb6-100"><a href="#cb6-100"></a>  <span class="fu">theme_void</span>() </span>
<span id="cb6-101"><a href="#cb6-101"></a></span>
<span id="cb6-102"><a href="#cb6-102"></a>p9 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df15, <span class="fu">aes</span>(<span class="at">fill =</span> Valor)) <span class="sc">+</span></span>
<span id="cb6-103"><a href="#cb6-103"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb6-104"><a href="#cb6-104"></a>  <span class="fu">geom_sf_label</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">as.character</span>(Valor)), <span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb6-105"><a href="#cb6-105"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">guide =</span> <span class="st">"legend"</span>,<span class="at">limits =</span> escala_limites) <span class="sc">+</span></span>
<span id="cb6-106"><a href="#cb6-106"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Precios vivienda CCAA 20071T3 (100 = 2015)"</span>,<span class="at">caption =</span> <span class="st">"Elaboración propia a partir de datos extraídos de INE"</span>) <span class="sc">+</span></span>
<span id="cb6-107"><a href="#cb6-107"></a>  <span class="fu">theme_void</span>() </span>
<span id="cb6-108"><a href="#cb6-108"></a><span class="co"># Combinar los dos gráficos</span></span>
<span id="cb6-109"><a href="#cb6-109"></a>p9</span>
<span id="cb6-110"><a href="#cb6-110"></a></span>
<span id="cb6-111"><a href="#cb6-111"></a>p7</span>
<span id="cb6-112"><a href="#cb6-112"></a></span>
<span id="cb6-113"><a href="#cb6-113"></a>p4</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" style="width:95.0%"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-6-2.png" class="img-fluid figure-img" style="width:95.0%"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-6-3.png" class="img-fluid figure-img" style="width:95.0%"></p>
</figure>
</div>
</div>
</div>
<p>Estos mapas de coropletas reflejan los niveles de precios de la vivienda en 6 momentos diferentes del tiempo. El primero es del tercer trimestre del año 2007. En ese momento los precios, como podemos observar, son los más altos. Este es el punto más elevado de la burbuja. Los años siguientes reflejan el pinchazo de la burbuja, con un descenso continuado de los precios hasta 2013. Que es el punto más bajo. Hemos decidido poner el año 2015 por ser el año de la base 100. A partir de ahí, vemos cómo en los años posteriores los precios son ya más elevados que en 2015, y particularmente en 2023, ligeramente por debajo, pero sin haber una burbuja. O, al menos, no parece haberla.</p>
<p>Al ser mapas de coropletas podemos sacar conclusiones acerca de en qué comunidades han aumentado más los precios y por tanto, dónde es más difícil acceder a la vivienda, ceteris paribus. En el último gráfico destacan claramente la Comunidad de Madrid, Cataluña y Baleares. Esto no nos sorprende, tanto la Comunidad de Madrid, como Cataluña son regiones muy dinámicas donde, además, se encuentran las principales ciudades de España. Baleares, por su parte, es una de las regiones más turísticas, donde la oferta de inmuebles tampoco es demasiado elevada. Destacan también en segunda fila País Vasco (región muy dinámica), Andalucía y Canarias (regiones muy turísticas).</p>
<p>Tal vez os habéis fijado en que estos mapas no concuerdan exactamente con lo que hemos visto hace dos gráficos (se veía que el nivel general de precios de la vivienda es ahora igual al del punto más alto de la burbuja y, sin embargo, en los mapas parece que en 2007T3 los precios son mucho más elevados que en la actualidad).</p>
<p>Esto se debe a que hay más viviendas allá donde más está subiendo el precio como se observa en el gráfico (que hay que insertar). La explicación de la afirmación anterior que parece a priori contradictoria, es que aunque hay más vivienda en esta zona (oferta elevada), la demanda es todavía más elevada que la oferta.</p>
<hr></section><section id="régimen-de-viviendas-de-16-a-29-años" class="level1"><h1>Régimen de viviendas de 16 a 29 años</h1>
<div class="cell" data-layout-align="center">
<details open=""><summary>Código</summary><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="co">#Hogares por regimen de tenencia edad</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="co">#Cargamos liberías</span></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb7-6"><a href="#cb7-6"></a><span class="fu">library</span>(pxR)</span>
<span id="cb7-7"><a href="#cb7-7"></a></span>
<span id="cb7-8"><a href="#cb7-8"></a>url4 <span class="ot">&lt;-</span> <span class="st">"https://www.ine.es/jaxiT3/files/t/es/px/9994.px?nocab=1"</span></span>
<span id="cb7-9"><a href="#cb7-9"></a>ac <span class="ot">&lt;-</span> <span class="fu">read.px</span>(url4)</span>
<span id="cb7-10"><a href="#cb7-10"></a><span class="fu">write.csv</span>(ac, <span class="at">file =</span> <span class="st">"./datos_pulidos/data_1.csv"</span>, <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb7-11"><a href="#cb7-11"></a>vivienda_edad <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"./datos_pulidos/data_1.csv"</span>)</span>
<span id="cb7-12"><a href="#cb7-12"></a></span>
<span id="cb7-13"><a href="#cb7-13"></a>dd <span class="ot">&lt;-</span> vivienda_edad <span class="sc">%&gt;%</span></span>
<span id="cb7-14"><a href="#cb7-14"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">regimen =</span> Régimen.de.tenencia.de.la.vivienda.principal, <span class="at">edad =</span> Edad.de.la.persona.de.referencia, <span class="at">sexo =</span> Sexo.de.la.persona.de.referencia) <span class="sc">%&gt;%</span></span>
<span id="cb7-15"><a href="#cb7-15"></a>  <span class="fu">filter</span>(edad <span class="sc">==</span> <span class="st">"De 16 a 29 años"</span>, sexo <span class="sc">==</span> <span class="st">"Ambos sexos"</span>)</span>
<span id="cb7-16"><a href="#cb7-16"></a></span>
<span id="cb7-17"><a href="#cb7-17"></a>p30 <span class="ot">&lt;-</span> dd <span class="sc">%&gt;%</span></span>
<span id="cb7-18"><a href="#cb7-18"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Periodo, <span class="at">y =</span> value, <span class="at">fill =</span> regimen)) <span class="sc">+</span></span>
<span id="cb7-19"><a href="#cb7-19"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"stack"</span>) <span class="sc">+</span></span>
<span id="cb7-20"><a href="#cb7-20"></a>  <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb7-21"><a href="#cb7-21"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Año"</span>, <span class="at">y =</span> <span class="st">"% según régimen de tenencia"</span>, </span>
<span id="cb7-22"><a href="#cb7-22"></a>       <span class="at">title =</span> <span class="st">"Régimen de vivienda de 16 a 29 años"</span>,</span>
<span id="cb7-23"><a href="#cb7-23"></a>       <span class="at">subtitle =</span> <span class="st">"Datos porcentuales"</span>,</span>
<span id="cb7-24"><a href="#cb7-24"></a>       <span class="at">caption =</span> <span class="st">"Elaboración propia a partir de datos del INE"</span>) <span class="sc">+</span></span>
<span id="cb7-25"><a href="#cb7-25"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#66c2a5"</span>, <span class="st">"#fc8d62"</span>, <span class="st">"#8da0cb"</span>, <span class="st">"#e78ac3"</span>), </span>
<span id="cb7-26"><a href="#cb7-26"></a>                    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Alquiler a precios de mercado"</span>, <span class="st">"Alquiler inferior al precio de mercado"</span>, <span class="st">"Cesión"</span>, <span class="st">"Propiedad"</span>)) <span class="sc">+</span></span>
<span id="cb7-27"><a href="#cb7-27"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>), </span>
<span id="cb7-28"><a href="#cb7-28"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb7-29"><a href="#cb7-29"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">18</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb7-30"><a href="#cb7-30"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">14</span>))</span>
<span id="cb7-31"><a href="#cb7-31"></a>  </span>
<span id="cb7-32"><a href="#cb7-32"></a></span>
<span id="cb7-33"><a href="#cb7-33"></a>p30</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" style="width:95.0%"></p>
</figure>
</div>
</div>
</div>
<p>En este gráfico podemos observar cómo el régimen de vivienda entre los jóvenes ha ido variando a lo largo del tiempo. La mayor sustitución ha sido de régimen de propiedad al de alquiler a precios de mercado. También ha aumentado ligeramente el régimen de cesión, es decir; los jóvenes se han trasladado a opciones más asequibles. Aunque los alquileres también suben en las grandes ciudades, siguen siendo opciones más asumibles que pagar la entrada de la hipoteca y su mensualidad, por no hablar de fórmulas utilizadas como el compartir piso.</p>
<hr></section><section id="otros-gráficos-bonitos-pero-poco-útiles-sobre-el-salario" class="level1"><h1>Otros gráficos bonitos pero poco útiles sobre el salario</h1>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">Rigeline por grupo de edad</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Barras agrupadas por edad</a></li>
</ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="cell" data-layout-align="center">
<details open=""><summary>Código</summary><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="fu">library</span>(rio)</span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="fu">library</span>(ggridges)</span>
<span id="cb8-5"><a href="#cb8-5"></a></span>
<span id="cb8-6"><a href="#cb8-6"></a>df_edad <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"./datos_pulidos/salario_grupo_edad.csv"</span>)</span>
<span id="cb8-7"><a href="#cb8-7"></a></span>
<span id="cb8-8"><a href="#cb8-8"></a>p1<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_edad, <span class="fu">aes</span>(<span class="at">x =</span> salario, <span class="at">y =</span> grupo_edad, <span class="at">fill =</span> grupo_edad)) <span class="sc">+</span></span>
<span id="cb8-9"><a href="#cb8-9"></a>  <span class="fu">geom_density_ridges</span>() <span class="sc">+</span></span>
<span id="cb8-10"><a href="#cb8-10"></a>  <span class="fu">theme_ridges</span>() <span class="sc">+</span> </span>
<span id="cb8-11"><a href="#cb8-11"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb8-12"><a href="#cb8-12"></a></span>
<span id="cb8-13"><a href="#cb8-13"></a>p1</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" style="width:95.0%"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell" data-layout-align="center">
<details open=""><summary>Código</summary><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="fu">library</span>(rio)</span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="fu">library</span>(ggridges)</span>
<span id="cb9-5"><a href="#cb9-5"></a></span>
<span id="cb9-6"><a href="#cb9-6"></a>df_edad <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"./datos_pulidos/salario_grupo_edad.csv"</span>)</span>
<span id="cb9-7"><a href="#cb9-7"></a></span>
<span id="cb9-8"><a href="#cb9-8"></a>df_edad_01 <span class="ot">&lt;-</span> df_edad <span class="sc">|&gt;</span> </span>
<span id="cb9-9"><a href="#cb9-9"></a>  <span class="fu">filter</span>(grupo_edad <span class="sc">!=</span> <span class="st">"Total"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb9-10"><a href="#cb9-10"></a>  <span class="fu">filter</span>()</span>
<span id="cb9-11"><a href="#cb9-11"></a></span>
<span id="cb9-12"><a href="#cb9-12"></a>df_edad_01<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">factor</span>(df_edad_01<span class="sc">$</span>year)</span>
<span id="cb9-13"><a href="#cb9-13"></a></span>
<span id="cb9-14"><a href="#cb9-14"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_edad_01, <span class="fu">aes</span>(<span class="at">fill =</span> grupo_edad, <span class="at">y =</span> salario, <span class="at">x =</span> year))<span class="sc">+</span></span>
<span id="cb9-15"><a href="#cb9-15"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"dodge"</span>, <span class="at">stat =</span> <span class="st">"identity"</span>)<span class="sc">+</span></span>
<span id="cb9-16"><a href="#cb9-16"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Salario por grupo de edad"</span>, <span class="at">caption =</span> <span class="st">"Elaboración propia a partir de datos extraídos de INE"</span>)</span>
<span id="cb9-17"><a href="#cb9-17"></a></span>
<span id="cb9-18"><a href="#cb9-18"></a>p2</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" style="width:95.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<hr></section><section id="conclusiones" class="level1"><h1>Conclusiones:</h1>
<p>Con este trabajo hemos podido comprobar la situación precaria en la que se encuentran los jóvenes a la hora de acceder a la vivienda: salarios bajos, tasa de paro muy por encima del resto de las edades, pobreza relativa creciente, niveles de precios de la vivienda astronómicos… Si bien no hemos ahondado en las causas de esta situación ni en posibles soluciones, hemos querido al menos señalar de forma clara la situación. Nos afecta directamente y por ello creemos que es algo a lo que, por lo menos, deberíamos prestar atención.</p>
<p>Además este tema está de actualidad en la academia por el lanzamiento del libro “La juventud atracada” de Ignacio Conde-Ruiz. En él se repasa lo visto en este trabajo además de la problemática con las pensiones y ahonda más en causas, consecuencias y soluciones. El propio Ignacio dio una charla en la UV hace unas semanas. Os adjuntamos una entrevista que hizo con el también economista Juan Ramón Rallo, en la que habla extensamente de su libro y su contenido.</p>
</section><section id="mas-información-sobre-el-tema" class="level1"><h1>Mas información sobre el tema</h1>
<center>
<iframe width="560" height="315" src="https://www.youtube.com/live/EtIErMd1EYM?si=-LNzHLRcepGHZ-r5">
</iframe>
</center>


<!-- -->

</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiado");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiado");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
      }
    }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Ejecutar el código</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb10" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb10-1"><a href="#cb10-1"></a><span class="co">---</span></span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="an">title:</span><span class="co"> "VIVIENDA EN ESPAÑA"</span></span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="an">description:</span><span class="co"> |</span></span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="co">  Vamos a analizar el mercado de la vivienda y comprarlo con su accesibilidad de los jóvenes </span></span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="an">author:</span><span class="co">   </span></span>
<span id="cb10-6"><a href="#cb10-6"></a><span class="co">  - Joel Seguí\n</span></span>
<span id="cb10-7"><a href="#cb10-7"></a><span class="co">  - Saúl Gil\n   </span></span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="co">  - Pedro Peñalver</span></span>
<span id="cb10-9"><a href="#cb10-9"></a><span class="an">date:</span><span class="co"> 2023-12-20                           #--</span></span>
<span id="cb10-10"><a href="#cb10-10"></a><span class="an">categories:</span><span class="co"> [Trabajo BigData, Vivienda]      #--</span></span>
<span id="cb10-11"><a href="#cb10-11"></a><span class="an">image:</span><span class="co"> "./imagenes/my_favicon.png"</span></span>
<span id="cb10-12"><a href="#cb10-12"></a><span class="an">title-block-banner:</span><span class="co"> true #- {true, false, "green","#AA0000"}</span></span>
<span id="cb10-13"><a href="#cb10-13"></a><span class="an">title-block-banner-color:</span><span class="co"> "lightgrey"    #-"#FFFFFF" </span></span>
<span id="cb10-14"><a href="#cb10-14"></a><span class="an">toc-depth:</span><span class="co"> 3</span></span>
<span id="cb10-15"><a href="#cb10-15"></a><span class="an">smooth-scroll:</span><span class="co"> true</span></span>
<span id="cb10-16"><a href="#cb10-16"></a><span class="an">format:</span><span class="co"> </span></span>
<span id="cb10-17"><a href="#cb10-17"></a><span class="co">  html:</span></span>
<span id="cb10-18"><a href="#cb10-18"></a><span class="co">    #backgroundcolor: "#F1F3F4"</span></span>
<span id="cb10-19"><a href="#cb10-19"></a><span class="co">    #embed-resources: true</span></span>
<span id="cb10-20"><a href="#cb10-20"></a><span class="co">    link-external-newwindow: true</span></span>
<span id="cb10-21"><a href="#cb10-21"></a><span class="co">    #css: ./assets/my_css_file.css   #- CUIDADO!!!!</span></span>
<span id="cb10-22"><a href="#cb10-22"></a><span class="an">code-tools:</span><span class="co"> true</span></span>
<span id="cb10-23"><a href="#cb10-23"></a><span class="an">code-link:</span><span class="co"> true</span></span>
<span id="cb10-24"><a href="#cb10-24"></a><span class="co">---</span></span>
<span id="cb10-25"><a href="#cb10-25"></a></span>
<span id="cb10-26"><a href="#cb10-26"></a><span class="fu"># Introducción </span></span>
<span id="cb10-27"><a href="#cb10-27"></a></span>
<span id="cb10-28"><a href="#cb10-28"></a>El objetivo de este trabajo es analizar la situación en la que se encuentran los jóvenes a la hora de acceder al mercado laboral. Para ello analizaremos diferentes métricas entre las que se encuentran: Evolución de los niveles de precios de la vivienda a nivel nacional y autonómico, comparación de esta con la de los salarios reales…</span>
<span id="cb10-29"><a href="#cb10-29"></a></span>
<span id="cb10-30"><a href="#cb10-30"></a>De esta manera constataremos las dificultades a alas que se enfrentan los jóvenes españoles para emanciparse. También extraeremos conclusiones sobre si es así en todo el país o si por el contrario hay diferencias según el área geográfica. </span>
<span id="cb10-31"><a href="#cb10-31"></a></span>
<span id="cb10-32"><a href="#cb10-32"></a><span class="fu"># Datos del trabajo</span></span>
<span id="cb10-33"><a href="#cb10-33"></a></span>
<span id="cb10-34"><a href="#cb10-34"></a>::: {.panel-tabset}</span>
<span id="cb10-35"><a href="#cb10-35"></a></span>
<span id="cb10-36"><a href="#cb10-36"></a><span class="fu"># Datos</span></span>
<span id="cb10-37"><a href="#cb10-37"></a></span>
<span id="cb10-38"><a href="#cb10-38"></a>Vamos a utilizar datos de los paquetes <span class="in">`pxR`</span> <span class="kw">&lt;i&gt;</span>(ine)<span class="kw">&lt;/I&gt;</span>, <span class="in">`eurostat`</span> además de proveedores de datos externos.</span>
<span id="cb10-39"><a href="#cb10-39"></a></span>
<span id="cb10-40"><a href="#cb10-40"></a><span class="fu"># Código</span></span>
<span id="cb10-41"><a href="#cb10-41"></a></span>
<span id="cb10-44"><a href="#cb10-44"></a><span class="in">```{R}</span></span>
<span id="cb10-45"><a href="#cb10-45"></a><span class="co">#Paquetes Preliminares</span></span>
<span id="cb10-46"><a href="#cb10-46"></a><span class="fu">library</span>(pxR)</span>
<span id="cb10-47"><a href="#cb10-47"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb10-48"><a href="#cb10-48"></a><span class="fu">library</span>(data.table)</span>
<span id="cb10-49"><a href="#cb10-49"></a><span class="fu">library</span>(rlist)</span>
<span id="cb10-50"><a href="#cb10-50"></a><span class="fu">library</span>(fs)</span>
<span id="cb10-51"><a href="#cb10-51"></a><span class="fu">library</span>(curl)</span>
<span id="cb10-52"><a href="#cb10-52"></a><span class="fu">library</span>(rio)</span>
<span id="cb10-53"><a href="#cb10-53"></a><span class="fu">library</span>(readxl)</span>
<span id="cb10-54"><a href="#cb10-54"></a><span class="fu">library</span>(downloader)</span>
<span id="cb10-55"><a href="#cb10-55"></a><span class="fu">library</span>(writexl)</span>
<span id="cb10-56"><a href="#cb10-56"></a></span>
<span id="cb10-57"><a href="#cb10-57"></a><span class="co">#-------------------Creamos una carpeta para guardar los datos------------------</span></span>
<span id="cb10-58"><a href="#cb10-58"></a></span>
<span id="cb10-59"><a href="#cb10-59"></a><span class="fu">dir_create</span>(<span class="st">"./docs/datos"</span>)</span>
<span id="cb10-60"><a href="#cb10-60"></a></span>
<span id="cb10-61"><a href="#cb10-61"></a><span class="co">#Descargamos los datos y los exportamos sin pulir: </span></span>
<span id="cb10-62"><a href="#cb10-62"></a></span>
<span id="cb10-63"><a href="#cb10-63"></a><span class="co">#---------------------Índice de Precios de Vivienda-----------------------------</span></span>
<span id="cb10-64"><a href="#cb10-64"></a></span>
<span id="cb10-65"><a href="#cb10-65"></a>url <span class="ot">&lt;-</span> <span class="st">"https://www.ine.es/jaxiT3/files/t/es/px/25171.px?nocab=1"</span></span>
<span id="cb10-66"><a href="#cb10-66"></a>aa <span class="ot">&lt;-</span> <span class="fu">read.px</span>(url)</span>
<span id="cb10-67"><a href="#cb10-67"></a></span>
<span id="cb10-68"><a href="#cb10-68"></a><span class="co">#Lo convertimos a CSV para simplificar y creamos un dataframe</span></span>
<span id="cb10-69"><a href="#cb10-69"></a></span>
<span id="cb10-70"><a href="#cb10-70"></a><span class="fu">write.csv</span>(aa, <span class="at">file =</span> <span class="st">"data.csv"</span>, <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb10-71"><a href="#cb10-71"></a>IPV <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data.csv"</span>)</span>
<span id="cb10-72"><a href="#cb10-72"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()[<span class="sc">!</span><span class="fu">ls</span>() <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"IPV"</span>)])</span>
<span id="cb10-73"><a href="#cb10-73"></a></span>
<span id="cb10-74"><a href="#cb10-74"></a><span class="co">#Los guardamos sin arreglar</span></span>
<span id="cb10-75"><a href="#cb10-75"></a><span class="fu">write.csv</span>(IPV,  <span class="at">file =</span> <span class="st">"./docs/datos/ipv.csv"</span>)</span>
<span id="cb10-76"><a href="#cb10-76"></a><span class="co">#-------------------------Compra-venta de vivienda------------------------------</span></span>
<span id="cb10-77"><a href="#cb10-77"></a></span>
<span id="cb10-78"><a href="#cb10-78"></a>ruta_xls <span class="ot">&lt;-</span> <span class="st">"https://apps.fomento.gob.es/BoletinOnline2/sedal/34010110.XLS"</span></span>
<span id="cb10-79"><a href="#cb10-79"></a></span>
<span id="cb10-80"><a href="#cb10-80"></a><span class="fu">download.file</span>(ruta_xls, <span class="st">"datos.xls"</span>, <span class="at">mode =</span> <span class="st">"wb"</span>)</span>
<span id="cb10-81"><a href="#cb10-81"></a></span>
<span id="cb10-82"><a href="#cb10-82"></a>nombres_hojas <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"2004,2005,2006,2007,2008"</span>, <span class="st">"2009,2010,2011,2012,2013"</span>, </span>
<span id="cb10-83"><a href="#cb10-83"></a>                   <span class="st">"2014,2015,2016,2017,2018"</span>, <span class="st">"2019,2020,2021,2022,2023"</span>)</span>
<span id="cb10-84"><a href="#cb10-84"></a><span class="co"># Leer todas las hojas en una lista</span></span>
<span id="cb10-85"><a href="#cb10-85"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(nombres_hojas)) {</span>
<span id="cb10-86"><a href="#cb10-86"></a>  hoja <span class="ot">&lt;-</span> nombres_hojas[i]</span>
<span id="cb10-87"><a href="#cb10-87"></a>  df <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">"datos.xls"</span>, <span class="at">sheet =</span> i) </span>
<span id="cb10-88"><a href="#cb10-88"></a>  <span class="fu">write.csv</span>(df, <span class="at">file =</span> <span class="fu">paste0</span>(hoja, <span class="st">".csv"</span>), <span class="at">row.names =</span> <span class="cn">FALSE</span>)}</span>
<span id="cb10-89"><a href="#cb10-89"></a></span>
<span id="cb10-90"><a href="#cb10-90"></a><span class="co">#Juntamos las cuatro sheets en una y después arreglaremos el desastre</span></span>
<span id="cb10-91"><a href="#cb10-91"></a>compraventa_2004 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"2004,2005,2006,2007,2008.csv"</span>)</span>
<span id="cb10-92"><a href="#cb10-92"></a>compraventa_2009 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"2009,2010,2011,2012,2013.csv"</span>)</span>
<span id="cb10-93"><a href="#cb10-93"></a>compraventa_2014 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"2014,2015,2016,2017,2018.csv"</span>)</span>
<span id="cb10-94"><a href="#cb10-94"></a>compraventa_2019 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"2019,2020,2021,2022,2023.csv"</span>)</span>
<span id="cb10-95"><a href="#cb10-95"></a></span>
<span id="cb10-96"><a href="#cb10-96"></a>cv <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(compraventa_2009,compraventa_2014)</span>
<span id="cb10-97"><a href="#cb10-97"></a>cv <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(cv,compraventa_2019)</span>
<span id="cb10-98"><a href="#cb10-98"></a>compraventa_2004 <span class="ot">&lt;-</span> compraventa_2004[<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(cv), ]</span>
<span id="cb10-99"><a href="#cb10-99"></a>cv <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(cv,compraventa_2004)</span>
<span id="cb10-100"><a href="#cb10-100"></a></span>
<span id="cb10-101"><a href="#cb10-101"></a></span>
<span id="cb10-102"><a href="#cb10-102"></a>cv <span class="ot">&lt;-</span> cv <span class="sc">%&gt;%</span></span>
<span id="cb10-103"><a href="#cb10-103"></a>  <span class="fu">filter</span>(<span class="fu">row_number</span>() <span class="sc">%in%</span> <span class="dv">6</span><span class="sc">:</span><span class="dv">72</span>)</span>
<span id="cb10-104"><a href="#cb10-104"></a>cv <span class="ot">&lt;-</span> cv <span class="sc">%&gt;%</span></span>
<span id="cb10-105"><a href="#cb10-105"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">row_number</span>() <span class="sc">%in%</span> <span class="dv">2</span>)</span>
<span id="cb10-106"><a href="#cb10-106"></a></span>
<span id="cb10-107"><a href="#cb10-107"></a><span class="co">#Los guardamos sin arreglar</span></span>
<span id="cb10-108"><a href="#cb10-108"></a><span class="fu">write.csv</span>(cv,  <span class="at">file =</span> <span class="st">"./docs/datos/cv.csv"</span>)</span>
<span id="cb10-109"><a href="#cb10-109"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb10-110"><a href="#cb10-110"></a></span>
<span id="cb10-111"><a href="#cb10-111"></a></span>
<span id="cb10-112"><a href="#cb10-112"></a><span class="co">#--------------------------Renta por edad y sexo--------------------------------</span></span>
<span id="cb10-113"><a href="#cb10-113"></a></span>
<span id="cb10-114"><a href="#cb10-114"></a>url3 <span class="ot">&lt;-</span> <span class="st">"https://www.ine.es/jaxiT3/files/t/es/px/9942.px?nocab=1"</span></span>
<span id="cb10-115"><a href="#cb10-115"></a>aa <span class="ot">&lt;-</span> <span class="fu">read.px</span>(url3)</span>
<span id="cb10-116"><a href="#cb10-116"></a></span>
<span id="cb10-117"><a href="#cb10-117"></a><span class="co">#Lo convertimos a CSV para simplificar y creamos un dataframe</span></span>
<span id="cb10-118"><a href="#cb10-118"></a></span>
<span id="cb10-119"><a href="#cb10-119"></a><span class="fu">write.csv</span>(aa, <span class="at">file =</span> <span class="st">"data.csv"</span>, <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb10-120"><a href="#cb10-120"></a>renta_edad <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data.csv"</span>)</span>
<span id="cb10-121"><a href="#cb10-121"></a></span>
<span id="cb10-122"><a href="#cb10-122"></a><span class="co">#Los guardamos sin arreglar</span></span>
<span id="cb10-123"><a href="#cb10-123"></a><span class="fu">write.csv</span>(renta_edad, <span class="at">file =</span> <span class="st">"./docs/datos/renta_edad.csv"</span>)</span>
<span id="cb10-124"><a href="#cb10-124"></a></span>
<span id="cb10-125"><a href="#cb10-125"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb10-126"><a href="#cb10-126"></a><span class="co">#---------------------------Renta por nacionalidad------------------------------</span></span>
<span id="cb10-127"><a href="#cb10-127"></a></span>
<span id="cb10-128"><a href="#cb10-128"></a>url4 <span class="ot">&lt;-</span> <span class="st">"https://www.ine.es/jaxiT3/files/t/es/px/9945.px?nocab=1"</span></span>
<span id="cb10-129"><a href="#cb10-129"></a>aa <span class="ot">&lt;-</span> <span class="fu">read.px</span>(url4)</span>
<span id="cb10-130"><a href="#cb10-130"></a></span>
<span id="cb10-131"><a href="#cb10-131"></a><span class="co">#Lo convertimos a CSV para simplificar y creamos un dataframe</span></span>
<span id="cb10-132"><a href="#cb10-132"></a></span>
<span id="cb10-133"><a href="#cb10-133"></a><span class="fu">write.csv</span>(aa, <span class="at">file =</span> <span class="st">"data.csv"</span>, <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb10-134"><a href="#cb10-134"></a>renta_nacionalidad <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data.csv"</span>)</span>
<span id="cb10-135"><a href="#cb10-135"></a></span>
<span id="cb10-136"><a href="#cb10-136"></a><span class="co">#Los guardamos sin arreglar</span></span>
<span id="cb10-137"><a href="#cb10-137"></a><span class="fu">write.csv</span>(renta_nacionalidad, <span class="at">file =</span> <span class="st">"./docs/datos/renta_nacionalidad.csv"</span>)</span>
<span id="cb10-138"><a href="#cb10-138"></a></span>
<span id="cb10-139"><a href="#cb10-139"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb10-140"><a href="#cb10-140"></a></span>
<span id="cb10-141"><a href="#cb10-141"></a></span>
<span id="cb10-142"><a href="#cb10-142"></a><span class="co">#---------------------Hogares por regimen de tenencia edad----------------------</span></span>
<span id="cb10-143"><a href="#cb10-143"></a></span>
<span id="cb10-144"><a href="#cb10-144"></a>url4 <span class="ot">&lt;-</span> <span class="st">"https://www.ine.es/jaxiT3/files/t/es/px/9994.px?nocab=1"</span></span>
<span id="cb10-145"><a href="#cb10-145"></a>aa <span class="ot">&lt;-</span> <span class="fu">read.px</span>(url4)</span>
<span id="cb10-146"><a href="#cb10-146"></a></span>
<span id="cb10-147"><a href="#cb10-147"></a><span class="co">#Lo convertimos a CSV para simplificar y creamos un dataframe</span></span>
<span id="cb10-148"><a href="#cb10-148"></a></span>
<span id="cb10-149"><a href="#cb10-149"></a><span class="fu">write.csv</span>(aa, <span class="at">file =</span> <span class="st">"data.csv"</span>, <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb10-150"><a href="#cb10-150"></a>vivienda_edad <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data.csv"</span>)</span>
<span id="cb10-151"><a href="#cb10-151"></a></span>
<span id="cb10-152"><a href="#cb10-152"></a><span class="co">#Los guardamos sin arreglar</span></span>
<span id="cb10-153"><a href="#cb10-153"></a><span class="fu">write.csv</span>(vivienda_edad, <span class="at">file =</span> <span class="st">"./docs/datos/vivienda_datos.csv"</span>)</span>
<span id="cb10-154"><a href="#cb10-154"></a></span>
<span id="cb10-155"><a href="#cb10-155"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb10-156"><a href="#cb10-156"></a></span>
<span id="cb10-157"><a href="#cb10-157"></a><span class="co">#Borramos archivos como las sheets separadas y otros datos</span></span>
<span id="cb10-158"><a href="#cb10-158"></a><span class="fu">file.remove</span>(<span class="st">"2004,2005,2006,2007,2008.csv"</span>, <span class="st">"2009,2010,2011,2012,2013.csv"</span>,</span>
<span id="cb10-159"><a href="#cb10-159"></a>            <span class="st">"2014,2015,2016,2017,2018.csv"</span>, <span class="st">"2019,2020,2021,2022,2023.csv"</span>, </span>
<span id="cb10-160"><a href="#cb10-160"></a>            <span class="st">"compraventa.csv"</span>, <span class="st">"data.csv"</span>, <span class="st">"datos.xls"</span>, <span class="st">"./docs/datos/25171.px"</span>,</span>
<span id="cb10-161"><a href="#cb10-161"></a>            <span class="st">"./docs/datos/34010110.XLS"</span>)</span>
<span id="cb10-162"><a href="#cb10-162"></a></span>
<span id="cb10-163"><a href="#cb10-163"></a><span class="co">#----------------------Procedemos a limpiar los datos---------------------------</span></span>
<span id="cb10-164"><a href="#cb10-164"></a></span>
<span id="cb10-165"><a href="#cb10-165"></a><span class="co">#-------------Creamos una carpeta para guardar los datos pulidos----------------</span></span>
<span id="cb10-166"><a href="#cb10-166"></a></span>
<span id="cb10-167"><a href="#cb10-167"></a><span class="fu">dir_create</span>(<span class="st">"./datos_pulidos"</span>)</span>
<span id="cb10-168"><a href="#cb10-168"></a><span class="fu">library</span>(zoo)</span>
<span id="cb10-169"><a href="#cb10-169"></a></span>
<span id="cb10-170"><a href="#cb10-170"></a><span class="do">###AHORA LIMPIAMOS LOS DATOS PARA TRABAJAR MEJOR CON ELLOS###</span></span>
<span id="cb10-171"><a href="#cb10-171"></a></span>
<span id="cb10-172"><a href="#cb10-172"></a><span class="co">#-------------------Indice de precios de la Vivienda----------------------------</span></span>
<span id="cb10-173"><a href="#cb10-173"></a></span>
<span id="cb10-174"><a href="#cb10-174"></a>cv <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="at">file =</span> <span class="st">"./docs/datos/cv.csv"</span>)</span>
<span id="cb10-175"><a href="#cb10-175"></a></span>
<span id="cb10-176"><a href="#cb10-176"></a><span class="co">#Elimino las columnas duplicadas indicando el nombre de la provincia </span></span>
<span id="cb10-177"><a href="#cb10-177"></a><span class="co">#para dejar solo una columna de provincias</span></span>
<span id="cb10-178"><a href="#cb10-178"></a></span>
<span id="cb10-179"><a href="#cb10-179"></a>cv <span class="ot">&lt;-</span> cv[<span class="sc">-</span><span class="dv">1</span>,]</span>
<span id="cb10-180"><a href="#cb10-180"></a><span class="fu">colnames</span>(cv) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb10-181"><a href="#cb10-181"></a>columnas_duplicadas <span class="ot">&lt;-</span> <span class="fu">duplicated</span>(<span class="fu">t</span>(cv))</span>
<span id="cb10-182"><a href="#cb10-182"></a><span class="fu">print</span>(columnas_duplicadas)</span>
<span id="cb10-183"><a href="#cb10-183"></a></span>
<span id="cb10-184"><a href="#cb10-184"></a>cv <span class="ot">&lt;-</span> cv[, <span class="sc">!</span>columnas_duplicadas]</span>
<span id="cb10-185"><a href="#cb10-185"></a><span class="fu">colnames</span>(cv) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"col_"</span>, <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(cv))</span>
<span id="cb10-186"><a href="#cb10-186"></a><span class="co">#Elimino otra columnaa duplicadaa que el argumento no encuenrtra </span></span>
<span id="cb10-187"><a href="#cb10-187"></a></span>
<span id="cb10-188"><a href="#cb10-188"></a>cv <span class="ot">&lt;-</span> cv[, <span class="sc">-</span><span class="dv">62</span>]</span>
<span id="cb10-189"><a href="#cb10-189"></a></span>
<span id="cb10-190"><a href="#cb10-190"></a><span class="co">#Doy nombre a la posición [1,2] de provincias para después poder trabajar mejor</span></span>
<span id="cb10-191"><a href="#cb10-191"></a><span class="co">#Ya que convertiremos la primera fila en colnames</span></span>
<span id="cb10-192"><a href="#cb10-192"></a></span>
<span id="cb10-193"><a href="#cb10-193"></a>cv[<span class="dv">1</span>,<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="st">"Provincia"</span></span>
<span id="cb10-194"><a href="#cb10-194"></a><span class="fu">colnames</span>(cv)</span>
<span id="cb10-195"><a href="#cb10-195"></a></span>
<span id="cb10-196"><a href="#cb10-196"></a><span class="co">#Seleccionamos la primera fila del df y lo convertimos en un vector. Después, </span></span>
<span id="cb10-197"><a href="#cb10-197"></a><span class="co">#Hacemos que los NA se sustituyan por el texto de su izquierda (Remplazamos NA`s</span></span>
<span id="cb10-198"><a href="#cb10-198"></a><span class="co">#por el año al que corresponde esa columnas)</span></span>
<span id="cb10-199"><a href="#cb10-199"></a></span>
<span id="cb10-200"><a href="#cb10-200"></a>df <span class="ot">&lt;-</span> cv <span class="sc">%&gt;%</span></span>
<span id="cb10-201"><a href="#cb10-201"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-202"><a href="#cb10-202"></a>  <span class="fu">unlist</span>()</span>
<span id="cb10-203"><a href="#cb10-203"></a></span>
<span id="cb10-204"><a href="#cb10-204"></a>df <span class="ot">&lt;-</span> <span class="fu">na.locf</span>(df)</span>
<span id="cb10-205"><a href="#cb10-205"></a></span>
<span id="cb10-206"><a href="#cb10-206"></a><span class="co">#Ahora convertimos el vector en la fila 1 que después convrtiremos en colnames</span></span>
<span id="cb10-207"><a href="#cb10-207"></a><span class="co">#para trabajar mejor.</span></span>
<span id="cb10-208"><a href="#cb10-208"></a></span>
<span id="cb10-209"><a href="#cb10-209"></a>cv[<span class="dv">1</span>,] <span class="ot">&lt;-</span> df </span>
<span id="cb10-210"><a href="#cb10-210"></a></span>
<span id="cb10-211"><a href="#cb10-211"></a><span class="co">#Juntamos la fila 1 y 2 a partir de la tercer columna separando el texto con "_" </span></span>
<span id="cb10-212"><a href="#cb10-212"></a><span class="co">#y le rellenamos las dos columnas restantes con los nombres que nos vengan mejor </span></span>
<span id="cb10-213"><a href="#cb10-213"></a><span class="co">#para trabajar</span></span>
<span id="cb10-214"><a href="#cb10-214"></a>aa <span class="ot">&lt;-</span> cv[<span class="dv">1</span>,]</span>
<span id="cb10-215"><a href="#cb10-215"></a>aa <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">""</span>,<span class="st">"Provincia"</span>,<span class="fu">paste</span>(cv[<span class="dv">1</span>,<span class="dv">3</span><span class="sc">:</span><span class="fu">ncol</span>(cv)],cv[<span class="dv">2</span>,<span class="dv">3</span><span class="sc">:</span><span class="fu">ncol</span>(cv)], <span class="at">sep =</span> <span class="st">"_"</span>))</span>
<span id="cb10-216"><a href="#cb10-216"></a></span>
<span id="cb10-217"><a href="#cb10-217"></a><span class="co">#Convertimos el vector aa en colnames</span></span>
<span id="cb10-218"><a href="#cb10-218"></a></span>
<span id="cb10-219"><a href="#cb10-219"></a><span class="fu">colnames</span>(cv) <span class="ot">=</span> aa</span>
<span id="cb10-220"><a href="#cb10-220"></a></span>
<span id="cb10-221"><a href="#cb10-221"></a><span class="co">#Quitamos la primera y la segunda fila, es información que ya indica colnames</span></span>
<span id="cb10-222"><a href="#cb10-222"></a></span>
<span id="cb10-223"><a href="#cb10-223"></a>cv <span class="ot">&lt;-</span> cv[<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>), <span class="sc">-</span>(<span class="dv">1</span>)]</span>
<span id="cb10-224"><a href="#cb10-224"></a><span class="fu">colnames</span>(cv)</span>
<span id="cb10-225"><a href="#cb10-225"></a></span>
<span id="cb10-226"><a href="#cb10-226"></a><span class="co">#Hacemos que todas las columnas que indican año_trimestre pivoten y dejen los</span></span>
<span id="cb10-227"><a href="#cb10-227"></a><span class="co">#valores que contenían las transacciones por un lado y el año_trimestre por otro</span></span>
<span id="cb10-228"><a href="#cb10-228"></a></span>
<span id="cb10-229"><a href="#cb10-229"></a>Transacciones_por_provincia <span class="ot">&lt;-</span> cv <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"Año"</span>), </span>
<span id="cb10-230"><a href="#cb10-230"></a>                                                   <span class="at">names_to =</span> <span class="st">"Año_Trimestre"</span>, </span>
<span id="cb10-231"><a href="#cb10-231"></a>                                                   <span class="at">names_prefix =</span> <span class="st">"Año"</span>, </span>
<span id="cb10-232"><a href="#cb10-232"></a>                                                   <span class="at">values_to =</span> <span class="st">"Transacciones"</span>,</span>
<span id="cb10-233"><a href="#cb10-233"></a>                                                   <span class="at">values_drop_na =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-234"><a href="#cb10-234"></a></span>
<span id="cb10-235"><a href="#cb10-235"></a><span class="co">#Guardamos en la carpeta(en formato .csv) de datos pulidos y seguimos</span></span>
<span id="cb10-236"><a href="#cb10-236"></a></span>
<span id="cb10-237"><a href="#cb10-237"></a><span class="fu">write.csv</span>(Transacciones_por_provincia, </span>
<span id="cb10-238"><a href="#cb10-238"></a>          <span class="at">file =</span> <span class="st">"datos_pulidos/Transacciones_por_povincia.csv"</span>)</span>
<span id="cb10-239"><a href="#cb10-239"></a></span>
<span id="cb10-240"><a href="#cb10-240"></a><span class="co">#----------------Índice de precios de la vivienda-------------------------------</span></span>
<span id="cb10-241"><a href="#cb10-241"></a></span>
<span id="cb10-242"><a href="#cb10-242"></a></span>
<span id="cb10-243"><a href="#cb10-243"></a>ipv <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="at">file =</span> <span class="st">"./docs/datos/ipv.csv"</span>)</span>
<span id="cb10-244"><a href="#cb10-244"></a></span>
<span id="cb10-245"><a href="#cb10-245"></a><span class="co">#Estos datos están bien, quitamos las dos columnas que no aportan y los guardamos</span></span>
<span id="cb10-246"><a href="#cb10-246"></a>ipv <span class="ot">&lt;-</span> ipv[,<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)]</span>
<span id="cb10-247"><a href="#cb10-247"></a></span>
<span id="cb10-248"><a href="#cb10-248"></a><span class="fu">write.csv</span>(ipv, <span class="at">file =</span> <span class="st">"./datos_pulidos/indice_precio_vivienda.csv"</span>)</span>
<span id="cb10-249"><a href="#cb10-249"></a></span>
<span id="cb10-250"><a href="#cb10-250"></a><span class="co">#rm(list = ls())</span></span>
<span id="cb10-251"><a href="#cb10-251"></a></span>
<span id="cb10-252"><a href="#cb10-252"></a></span>
<span id="cb10-253"><a href="#cb10-253"></a><span class="co">#----------------Renta por edad-------------------------------------------------</span></span>
<span id="cb10-254"><a href="#cb10-254"></a></span>
<span id="cb10-255"><a href="#cb10-255"></a>re <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="at">file  =</span> <span class="st">"./docs/datos/renta_edad.csv"</span>)</span>
<span id="cb10-256"><a href="#cb10-256"></a></span>
<span id="cb10-257"><a href="#cb10-257"></a><span class="co">#Renombramos las columnas, seleccionamos lo que nos interesa y borramos el restante</span></span>
<span id="cb10-258"><a href="#cb10-258"></a><span class="co">#Exportamos</span></span>
<span id="cb10-259"><a href="#cb10-259"></a>re <span class="ot">&lt;-</span> re <span class="sc">%&gt;%</span></span>
<span id="cb10-260"><a href="#cb10-260"></a>  <span class="fu">rename</span>(<span class="at">renta =</span> <span class="st">"value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-261"><a href="#cb10-261"></a>  <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(<span class="st">"V1"</span>, <span class="st">"X"</span>))</span>
<span id="cb10-262"><a href="#cb10-262"></a></span>
<span id="cb10-263"><a href="#cb10-263"></a><span class="fu">write.csv</span>(re, <span class="at">file =</span> <span class="st">"./datos_pulidos/renta_por_edad.csv"</span>)</span>
<span id="cb10-264"><a href="#cb10-264"></a></span>
<span id="cb10-265"><a href="#cb10-265"></a></span>
<span id="cb10-266"><a href="#cb10-266"></a></span>
<span id="cb10-267"><a href="#cb10-267"></a></span>
<span id="cb10-268"><a href="#cb10-268"></a><span class="co">#----------------Régimen tenencia de vivienda por edad--------------------------</span></span>
<span id="cb10-269"><a href="#cb10-269"></a></span>
<span id="cb10-270"><a href="#cb10-270"></a>vd <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="at">file  =</span> <span class="st">"./docs/datos/vivienda_datos.csv"</span>)</span>
<span id="cb10-271"><a href="#cb10-271"></a></span>
<span id="cb10-272"><a href="#cb10-272"></a><span class="co">#Renombramos las columnas, seleccionamos lo que nos interesa y borramos el restante</span></span>
<span id="cb10-273"><a href="#cb10-273"></a><span class="co">#Exportamos</span></span>
<span id="cb10-274"><a href="#cb10-274"></a>vd<span class="ot">&lt;-</span> vd <span class="sc">%&gt;%</span></span>
<span id="cb10-275"><a href="#cb10-275"></a>  <span class="fu">rename</span>(<span class="at">Porcentaje =</span> <span class="st">"value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-276"><a href="#cb10-276"></a>  <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(<span class="st">"V1"</span>, <span class="st">"X"</span>))</span>
<span id="cb10-277"><a href="#cb10-277"></a></span>
<span id="cb10-278"><a href="#cb10-278"></a><span class="fu">write.csv</span>(vd, <span class="at">file =</span> <span class="st">"./datos_pulidos/tenencia_de_vivienda.csv"</span>)</span>
<span id="cb10-279"><a href="#cb10-279"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb10-280"><a href="#cb10-280"></a></span>
<span id="cb10-281"><a href="#cb10-281"></a><span class="co">#--------------------IMPORTAR DATOS CE / EUROSTAT-------------------------------</span></span>
<span id="cb10-282"><a href="#cb10-282"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">999</span>) <span class="co">#- para quitar la notación científica</span></span>
<span id="cb10-283"><a href="#cb10-283"></a></span>
<span id="cb10-284"><a href="#cb10-284"></a><span class="fu">library</span>(eurostat) </span>
<span id="cb10-285"><a href="#cb10-285"></a><span class="fu">library</span>(DT) </span>
<span id="cb10-286"><a href="#cb10-286"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb10-287"><a href="#cb10-287"></a></span>
<span id="cb10-288"><a href="#cb10-288"></a>info <span class="ot">&lt;-</span> <span class="fu">search_eurostat</span>(<span class="st">"GDP"</span>, <span class="at">type =</span> <span class="st">"all"</span>)</span>
<span id="cb10-289"><a href="#cb10-289"></a>my_table <span class="ot">&lt;-</span><span class="st">"sdg_08_10"</span></span>
<span id="cb10-290"><a href="#cb10-290"></a></span>
<span id="cb10-291"><a href="#cb10-291"></a><span class="co">#Comprobamos que es el PIB pc</span></span>
<span id="cb10-292"><a href="#cb10-292"></a><span class="fu">label_eurostat_tables</span>(my_table)</span>
<span id="cb10-293"><a href="#cb10-293"></a></span>
<span id="cb10-294"><a href="#cb10-294"></a>df_original <span class="ot">&lt;-</span> <span class="fu">get_eurostat</span>(my_table, <span class="at">time_format =</span> <span class="st">'raw'</span>, <span class="at">keepFlags =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-295"><a href="#cb10-295"></a>df_names <span class="ot">&lt;-</span> <span class="fu">names</span>(df_original)</span>
<span id="cb10-296"><a href="#cb10-296"></a>df_original <span class="ot">&lt;-</span> <span class="fu">label_eurostat</span>(df_original, <span class="at">code =</span> df_names, <span class="at">fix_duplicated =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-297"><a href="#cb10-297"></a></span>
<span id="cb10-298"><a href="#cb10-298"></a><span class="co">#Creamos otro df para trabajor con él </span></span>
<span id="cb10-299"><a href="#cb10-299"></a></span>
<span id="cb10-300"><a href="#cb10-300"></a>df <span class="ot">&lt;-</span> df_original</span>
<span id="cb10-301"><a href="#cb10-301"></a></span>
<span id="cb10-302"><a href="#cb10-302"></a><span class="co">#Ver que hay en el df</span></span>
<span id="cb10-303"><a href="#cb10-303"></a>df_aa <span class="ot">&lt;-</span> pjpv.curso.R<span class="fl">.2022</span><span class="sc">::</span><span class="fu">pjp_dicc</span>(df)</span>
<span id="cb10-304"><a href="#cb10-304"></a>df_bb <span class="ot">&lt;-</span> pjpv.curso.R<span class="fl">.2022</span><span class="sc">::</span><span class="fu">pjp_valores_unicos</span>(df, <span class="at">nn =</span> <span class="dv">400</span>)</span>
<span id="cb10-305"><a href="#cb10-305"></a></span>
<span id="cb10-306"><a href="#cb10-306"></a><span class="co">#Vamos a hacer un poco de limpieza</span></span>
<span id="cb10-307"><a href="#cb10-307"></a>obj_buenos <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"df"</span>, <span class="st">"df_original"</span>, <span class="st">"df_bb"</span>)</span>
<span id="cb10-308"><a href="#cb10-308"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">setdiff</span>(<span class="fu">ls</span>(), obj_buenos))</span>
<span id="cb10-309"><a href="#cb10-309"></a></span>
<span id="cb10-310"><a href="#cb10-310"></a><span class="co">#Vamos a seguir arreglando el df</span></span>
<span id="cb10-311"><a href="#cb10-311"></a></span>
<span id="cb10-312"><a href="#cb10-312"></a>df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb10-313"><a href="#cb10-313"></a>  <span class="fu">rename</span>(<span class="at">year =</span> time_code) <span class="sc">|&gt;</span> </span>
<span id="cb10-314"><a href="#cb10-314"></a>  <span class="fu">rename</span>(<span class="at">PIB_pc =</span> values) <span class="sc">|&gt;</span> </span>
<span id="cb10-315"><a href="#cb10-315"></a>  <span class="fu">rename</span>(<span class="at">country =</span> geo)</span>
<span id="cb10-316"><a href="#cb10-316"></a></span>
<span id="cb10-317"><a href="#cb10-317"></a><span class="co">#Chain linked volumes (2010), euro per capita</span></span>
<span id="cb10-318"><a href="#cb10-318"></a><span class="co">#Solo queremos el PIB_pc</span></span>
<span id="cb10-319"><a href="#cb10-319"></a>df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb10-320"><a href="#cb10-320"></a>  <span class="fu">filter</span>(unit <span class="sc">==</span> <span class="st">"Chain linked volumes (2010), euro per capita"</span>)</span>
<span id="cb10-321"><a href="#cb10-321"></a></span>
<span id="cb10-322"><a href="#cb10-322"></a><span class="co">#Eliminamos todo lo que nos molesta a la vista </span></span>
<span id="cb10-323"><a href="#cb10-323"></a>df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb10-324"><a href="#cb10-324"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(unit_code, values_code, unit, time, na_item_code, na_item, flags))</span>
<span id="cb10-325"><a href="#cb10-325"></a></span>
<span id="cb10-326"><a href="#cb10-326"></a>df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span>  <span class="fu">mutate</span>(<span class="at">year =</span>  <span class="fu">as.numeric</span>(year))</span>
<span id="cb10-327"><a href="#cb10-327"></a></span>
<span id="cb10-328"><a href="#cb10-328"></a>df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span>  <span class="fu">mutate</span>(<span class="at">iso_2_code =</span>  eurostat<span class="sc">::</span><span class="fu">harmonize_country_code</span>(geo_code))</span>
<span id="cb10-329"><a href="#cb10-329"></a></span>
<span id="cb10-330"><a href="#cb10-330"></a>df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb10-331"><a href="#cb10-331"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(geo_code, flags_code))</span>
<span id="cb10-332"><a href="#cb10-332"></a></span>
<span id="cb10-333"><a href="#cb10-333"></a></span>
<span id="cb10-334"><a href="#cb10-334"></a><span class="fu">library</span>(fs)</span>
<span id="cb10-335"><a href="#cb10-335"></a><span class="fu">dir_create</span>(<span class="st">"datos_pulidos"</span>)</span>
<span id="cb10-336"><a href="#cb10-336"></a></span>
<span id="cb10-337"><a href="#cb10-337"></a><span class="co">#A continuación vamos a exportar los datos para luego importarlas más fácilmente #library(rio)</span></span>
<span id="cb10-338"><a href="#cb10-338"></a></span>
<span id="cb10-339"><a href="#cb10-339"></a><span class="fu">export</span>(df, <span class="st">"./datos_pulidos/PIB_pc.csv"</span>, <span class="at">type =</span> <span class="st">"csv"</span>)</span>
<span id="cb10-340"><a href="#cb10-340"></a><span class="co">#---------------DATOS SOBRE EL SALARIO POR NIVEL DE FORMACIÓN-------------------</span></span>
<span id="cb10-341"><a href="#cb10-341"></a></span>
<span id="cb10-342"><a href="#cb10-342"></a><span class="fu">library</span>(rio)</span>
<span id="cb10-343"><a href="#cb10-343"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb10-344"><a href="#cb10-344"></a>url <span class="ot">&lt;-</span> <span class="st">"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/13931.csv?nocab=1"</span></span>
<span id="cb10-345"><a href="#cb10-345"></a>df_ine <span class="ot">&lt;-</span> <span class="fu">import</span>(url)</span>
<span id="cb10-346"><a href="#cb10-346"></a>df_ine_01 <span class="ot">&lt;-</span> df_ine <span class="sc">|&gt;</span> </span>
<span id="cb10-347"><a href="#cb10-347"></a>  <span class="fu">filter</span>(Decil <span class="sc">%in%</span> (<span class="st">"Total decil"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb10-348"><a href="#cb10-348"></a>  <span class="fu">select</span>(<span class="st">"Periodo"</span>, <span class="st">"Tipo de jornada"</span>, <span class="st">"NIVELES DE FORMACION"</span>, <span class="st">"Total"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb10-349"><a href="#cb10-349"></a>  <span class="fu">rename</span>(<span class="at">year =</span> Periodo) <span class="sc">|&gt;</span> </span>
<span id="cb10-350"><a href="#cb10-350"></a>  <span class="fu">rename</span>(<span class="at">jornada =</span> <span class="st">'Tipo de jornada'</span>) <span class="sc">|&gt;</span> </span>
<span id="cb10-351"><a href="#cb10-351"></a>  <span class="fu">rename</span>(<span class="at">formacion =</span> <span class="st">'NIVELES DE FORMACION'</span>) <span class="sc">|&gt;</span></span>
<span id="cb10-352"><a href="#cb10-352"></a>  <span class="fu">rename</span>(<span class="at">salario =</span> Total)</span>
<span id="cb10-353"><a href="#cb10-353"></a></span>
<span id="cb10-354"><a href="#cb10-354"></a><span class="co">#VAMOS A CONVERTIR LA VARIABLE salario A NUMERIC</span></span>
<span id="cb10-355"><a href="#cb10-355"></a></span>
<span id="cb10-356"><a href="#cb10-356"></a><span class="co">#R y el INE me han jodiedo la vida para pasar esto a numeric (antes no funcionaba)</span></span>
<span id="cb10-357"><a href="#cb10-357"></a>df_ine_01 <span class="ot">&lt;-</span> df_ine_01 <span class="sc">|&gt;</span> </span>
<span id="cb10-358"><a href="#cb10-358"></a>  <span class="fu">mutate</span>(<span class="at">salario =</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">","</span>, <span class="st">"."</span>, <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>, salario))))</span>
<span id="cb10-359"><a href="#cb10-359"></a></span>
<span id="cb10-360"><a href="#cb10-360"></a><span class="fu">export</span>(df_ine_01,<span class="st">"./datos_pulidos/salario_formacion.csv"</span>, <span class="at">type =</span> <span class="st">"csv"</span>)</span>
<span id="cb10-361"><a href="#cb10-361"></a></span>
<span id="cb10-362"><a href="#cb10-362"></a><span class="co">#salarios por edades</span></span>
<span id="cb10-363"><a href="#cb10-363"></a>url_1 <span class="ot">&lt;-</span> <span class="st">"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/13928.csv?nocab=1"</span></span>
<span id="cb10-364"><a href="#cb10-364"></a>df_ine_x1 <span class="ot">&lt;-</span> <span class="fu">import</span>(url_1)</span>
<span id="cb10-365"><a href="#cb10-365"></a></span>
<span id="cb10-366"><a href="#cb10-366"></a>df_ine_02 <span class="ot">&lt;-</span> df_ine_x1 <span class="sc">|&gt;</span> </span>
<span id="cb10-367"><a href="#cb10-367"></a>  <span class="fu">filter</span>(Decil <span class="sc">%in%</span> (<span class="st">"Total decil"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb10-368"><a href="#cb10-368"></a>  <span class="fu">select</span>(<span class="st">"Periodo"</span>, <span class="st">"Tipo de jornada"</span>, <span class="st">"Grupo de edad"</span>, <span class="st">"Total"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb10-369"><a href="#cb10-369"></a>  <span class="fu">rename</span>(<span class="at">year =</span> Periodo) <span class="sc">|&gt;</span> </span>
<span id="cb10-370"><a href="#cb10-370"></a>  <span class="fu">rename</span>(<span class="at">jornada =</span> <span class="st">'Tipo de jornada'</span>) <span class="sc">|&gt;</span> </span>
<span id="cb10-371"><a href="#cb10-371"></a>  <span class="fu">rename</span>(<span class="at">grupo_edad =</span> <span class="st">'Grupo de edad'</span>) <span class="sc">|&gt;</span></span>
<span id="cb10-372"><a href="#cb10-372"></a>  <span class="fu">rename</span>(<span class="at">salario =</span> Total)</span>
<span id="cb10-373"><a href="#cb10-373"></a></span>
<span id="cb10-374"><a href="#cb10-374"></a><span class="co">#PASAMOS A NUMERIC</span></span>
<span id="cb10-375"><a href="#cb10-375"></a>df_ine_02 <span class="ot">&lt;-</span> df_ine_02 <span class="sc">|&gt;</span> </span>
<span id="cb10-376"><a href="#cb10-376"></a>  <span class="fu">mutate</span>(<span class="at">salario =</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">","</span>, <span class="st">"."</span>, <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>, salario))))</span>
<span id="cb10-377"><a href="#cb10-377"></a></span>
<span id="cb10-378"><a href="#cb10-378"></a><span class="fu">export</span>(df_ine_02,<span class="st">"./datos_pulidos/salario_grupo_edad.csv"</span>, <span class="at">type =</span> <span class="st">"csv"</span>)</span>
<span id="cb10-379"><a href="#cb10-379"></a><span class="co">#Datos sobre el IPC</span></span>
<span id="cb10-380"><a href="#cb10-380"></a></span>
<span id="cb10-381"><a href="#cb10-381"></a>url_2 <span class="ot">&lt;-</span> <span class="st">"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/50908.csv?nocab=1"</span></span>
<span id="cb10-382"><a href="#cb10-382"></a>df_ipc <span class="ot">&lt;-</span> <span class="fu">import</span>(url_2)</span>
<span id="cb10-383"><a href="#cb10-383"></a></span>
<span id="cb10-384"><a href="#cb10-384"></a>df_ipc_01 <span class="ot">&lt;-</span> df_ipc <span class="sc">|&gt;</span> </span>
<span id="cb10-385"><a href="#cb10-385"></a>  <span class="fu">filter</span>(<span class="st">`</span><span class="at">Grupos ECOICOP</span><span class="st">`</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Índice general"</span>, <span class="st">"04 Vivienda, agua, electricidad, gas y otros combustibles"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb10-386"><a href="#cb10-386"></a>  <span class="fu">select</span>(<span class="st">"Periodo"</span>, <span class="st">"Grupos ECOICOP"</span>, <span class="st">"Tipo de dato"</span>, <span class="st">"Total"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb10-387"><a href="#cb10-387"></a>  <span class="fu">rename</span>(<span class="at">year =</span> Periodo) <span class="sc">|&gt;</span></span>
<span id="cb10-388"><a href="#cb10-388"></a>  <span class="fu">rename</span>(<span class="at">grupo =</span> <span class="st">'Grupos ECOICOP'</span>) <span class="sc">|&gt;</span> </span>
<span id="cb10-389"><a href="#cb10-389"></a>  <span class="fu">rename</span>(<span class="at">tipo_dato =</span> <span class="st">`</span><span class="at">Tipo de dato</span><span class="st">`</span> ) </span>
<span id="cb10-390"><a href="#cb10-390"></a></span>
<span id="cb10-391"><a href="#cb10-391"></a><span class="co">#PASAMOS A NUMERIC</span></span>
<span id="cb10-392"><a href="#cb10-392"></a>df_ipc_01 <span class="ot">&lt;-</span> df_ipc_01 <span class="sc">|&gt;</span> </span>
<span id="cb10-393"><a href="#cb10-393"></a>  <span class="fu">mutate</span>(<span class="at">Total =</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">","</span>, <span class="st">"."</span>, <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>, Total))))</span>
<span id="cb10-394"><a href="#cb10-394"></a></span>
<span id="cb10-395"><a href="#cb10-395"></a><span class="co">#PARA SEPARAR EN LA VARIABLE YEAR LOS DATOS POR AÑOS Y MESES</span></span>
<span id="cb10-396"><a href="#cb10-396"></a><span class="co">#df_sep &lt;- df_ipc_01 |&gt; </span></span>
<span id="cb10-397"><a href="#cb10-397"></a><span class="co">#  separate(col = year, into = c("year", "month"), sep = "M")</span></span>
<span id="cb10-398"><a href="#cb10-398"></a></span>
<span id="cb10-399"><a href="#cb10-399"></a><span class="co">#df_sep &lt;- df_sep |&gt; </span></span>
<span id="cb10-400"><a href="#cb10-400"></a><span class="co">#  mutate(month = paste0("M", month))</span></span>
<span id="cb10-401"><a href="#cb10-401"></a></span>
<span id="cb10-402"><a href="#cb10-402"></a><span class="fu">export</span>(df_ipc_01, <span class="st">"./datos_pulidos/IPC_mas_vivienda.csv"</span>, <span class="at">type =</span> <span class="st">"csv"</span>)</span>
<span id="cb10-403"><a href="#cb10-403"></a></span>
<span id="cb10-404"><a href="#cb10-404"></a><span class="co">#Por tipo de jornada</span></span>
<span id="cb10-405"><a href="#cb10-405"></a>df_temporal <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/10894.csv?nocab=1"</span>)</span>
<span id="cb10-406"><a href="#cb10-406"></a>df_contrato <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/4854.csv?nocab=1"</span>)</span>
<span id="cb10-407"><a href="#cb10-407"></a>df_contrato <span class="ot">&lt;-</span> df_contrato <span class="sc">%&gt;%</span></span>
<span id="cb10-408"><a href="#cb10-408"></a><span class="fu">filter</span>(Sexo <span class="sc">%in%</span> <span class="st">"Ambos sexos"</span>)</span>
<span id="cb10-409"><a href="#cb10-409"></a><span class="fu">write.csv</span>(df_temporal, <span class="at">file=</span> <span class="st">"./datos_pulidos/temporalidad_edad.csv"</span>)</span>
<span id="cb10-410"><a href="#cb10-410"></a><span class="fu">write.csv</span>(df_contrato, <span class="at">file =</span> <span class="st">"./datos_pulidos/contrato_edad.csv"</span>)</span>
<span id="cb10-411"><a href="#cb10-411"></a></span>
<span id="cb10-412"><a href="#cb10-412"></a><span class="co">#-------------------------Paro-----------------------------------</span></span>
<span id="cb10-413"><a href="#cb10-413"></a>df_activos <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/4049.csv?nocab=1"</span>)</span>
<span id="cb10-414"><a href="#cb10-414"></a>df_parados <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/4084.csv?nocab=1"</span>)</span>
<span id="cb10-415"><a href="#cb10-415"></a>df_activos <span class="ot">&lt;-</span> df_activos <span class="sc">%&gt;%</span></span>
<span id="cb10-416"><a href="#cb10-416"></a><span class="fu">filter</span>(Sexo <span class="sc">%in%</span> <span class="st">"Ambos sexos"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-417"><a href="#cb10-417"></a><span class="fu">filter</span>(Unidad <span class="sc">%in%</span> <span class="st">"Valor absoluto"</span>)</span>
<span id="cb10-418"><a href="#cb10-418"></a>df_parados <span class="ot">&lt;-</span> df_parados <span class="sc">%&gt;%</span></span>
<span id="cb10-419"><a href="#cb10-419"></a><span class="fu">filter</span>(Sexo <span class="sc">%in%</span> <span class="st">"Ambos sexos"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-420"><a href="#cb10-420"></a><span class="fu">filter</span>(Unidad <span class="sc">%in%</span> <span class="st">"Valor absoluto"</span>)</span>
<span id="cb10-421"><a href="#cb10-421"></a></span>
<span id="cb10-422"><a href="#cb10-422"></a><span class="co">#Saúl</span></span>
<span id="cb10-423"><a href="#cb10-423"></a><span class="co">#-------------------------Por tipo de jornada-----------------------------------</span></span>
<span id="cb10-424"><a href="#cb10-424"></a></span>
<span id="cb10-425"><a href="#cb10-425"></a>df_temporal <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/10894.csv?nocab=1"</span>)</span>
<span id="cb10-426"><a href="#cb10-426"></a>df_contrato <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/4854.csv?nocab=1"</span>)</span>
<span id="cb10-427"><a href="#cb10-427"></a></span>
<span id="cb10-428"><a href="#cb10-428"></a>df_contrato <span class="ot">&lt;-</span> df_contrato <span class="sc">%&gt;%</span></span>
<span id="cb10-429"><a href="#cb10-429"></a>  <span class="fu">filter</span>(Sexo <span class="sc">%in%</span> <span class="st">"Ambos sexos"</span>)</span>
<span id="cb10-430"><a href="#cb10-430"></a></span>
<span id="cb10-431"><a href="#cb10-431"></a></span>
<span id="cb10-432"><a href="#cb10-432"></a></span>
<span id="cb10-433"><a href="#cb10-433"></a><span class="fu">write.csv</span>(df_temporal, <span class="at">file=</span> <span class="st">"./datos_pulidos/temporalidad_edad.csv"</span>)</span>
<span id="cb10-434"><a href="#cb10-434"></a><span class="fu">write.csv</span>(df_contrato, <span class="at">file =</span> <span class="st">"./datos_pulidos/contrato_edad.csv"</span>)</span>
<span id="cb10-435"><a href="#cb10-435"></a></span>
<span id="cb10-436"><a href="#cb10-436"></a><span class="co">#Saúl</span></span>
<span id="cb10-437"><a href="#cb10-437"></a><span class="co">#-------------------------Paro-----------------------------------</span></span>
<span id="cb10-438"><a href="#cb10-438"></a></span>
<span id="cb10-439"><a href="#cb10-439"></a></span>
<span id="cb10-440"><a href="#cb10-440"></a>df_activos <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/4049.csv?nocab=1"</span>)</span>
<span id="cb10-441"><a href="#cb10-441"></a>df_parados <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/4084.csv?nocab=1"</span>)</span>
<span id="cb10-442"><a href="#cb10-442"></a></span>
<span id="cb10-443"><a href="#cb10-443"></a></span>
<span id="cb10-444"><a href="#cb10-444"></a>df_activos <span class="ot">&lt;-</span> df_activos <span class="sc">%&gt;%</span></span>
<span id="cb10-445"><a href="#cb10-445"></a>  <span class="fu">filter</span>(Sexo <span class="sc">%in%</span> <span class="st">"Ambos sexos"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-446"><a href="#cb10-446"></a>  <span class="fu">filter</span>(Unidad <span class="sc">%in%</span> <span class="st">"Valor absoluto"</span>)</span>
<span id="cb10-447"><a href="#cb10-447"></a></span>
<span id="cb10-448"><a href="#cb10-448"></a></span>
<span id="cb10-449"><a href="#cb10-449"></a>df_parados <span class="ot">&lt;-</span> df_parados <span class="sc">%&gt;%</span></span>
<span id="cb10-450"><a href="#cb10-450"></a>  <span class="fu">filter</span>(Sexo <span class="sc">%in%</span> <span class="st">"Ambos sexos"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-451"><a href="#cb10-451"></a>  <span class="fu">filter</span>(Unidad <span class="sc">%in%</span> <span class="st">"Valor absoluto"</span>)</span>
<span id="cb10-452"><a href="#cb10-452"></a></span>
<span id="cb10-453"><a href="#cb10-453"></a><span class="fu">export</span>(df_activos, <span class="at">file =</span> <span class="st">"./datos_pulidos/activos.csv"</span>, <span class="at">format=</span><span class="st">"csv"</span>)</span>
<span id="cb10-454"><a href="#cb10-454"></a><span class="fu">export</span>(df_parados, <span class="at">file =</span> <span class="st">"./datos_pulidos/parados.csv"</span>, <span class="at">format=</span><span class="st">"csv"</span>)</span>
<span id="cb10-455"><a href="#cb10-455"></a></span>
<span id="cb10-456"><a href="#cb10-456"></a><span class="in">```</span></span>
<span id="cb10-457"><a href="#cb10-457"></a></span>
<span id="cb10-458"><a href="#cb10-458"></a>:::</span>
<span id="cb10-459"><a href="#cb10-459"></a></span>
<span id="cb10-460"><a href="#cb10-460"></a>---</span>
<span id="cb10-461"><a href="#cb10-461"></a></span>
<span id="cb10-462"><a href="#cb10-462"></a><span class="fu"># Evolución de la renta neta por edad</span></span>
<span id="cb10-463"><a href="#cb10-463"></a></span>
<span id="cb10-464"><a href="#cb10-464"></a>Iniciaremos analizando los datos de renta según la edad (como pueden imaginar, los jóvenes constituyen el grupo poblacional que dispone de menos renta), para, a continuación, adentrarnos en datos que muestran la evolución de los precios de la vivienda.</span>
<span id="cb10-465"><a href="#cb10-465"></a></span>
<span id="cb10-466"><a href="#cb10-466"></a></span>
<span id="cb10-467"><a href="#cb10-467"></a>::: {.panel-tabset}</span>
<span id="cb10-468"><a href="#cb10-468"></a></span>
<span id="cb10-469"><a href="#cb10-469"></a><span class="fu"># Gráfico en movimiento</span></span>
<span id="cb10-470"><a href="#cb10-470"></a></span>
<span id="cb10-473"><a href="#cb10-473"></a><span class="in">```{R}</span></span>
<span id="cb10-474"><a href="#cb10-474"></a><span class="co">#Cargamos datos</span></span>
<span id="cb10-475"><a href="#cb10-475"></a><span class="fu">library</span>(rio)</span>
<span id="cb10-476"><a href="#cb10-476"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb10-477"><a href="#cb10-477"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb10-478"><a href="#cb10-478"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb10-479"><a href="#cb10-479"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb10-480"><a href="#cb10-480"></a></span>
<span id="cb10-481"><a href="#cb10-481"></a><span class="co">#-</span></span>
<span id="cb10-482"><a href="#cb10-482"></a></span>
<span id="cb10-483"><a href="#cb10-483"></a>renta_edad <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"./datos_pulidos/renta_por_edad.csv"</span>)</span>
<span id="cb10-484"><a href="#cb10-484"></a></span>
<span id="cb10-485"><a href="#cb10-485"></a>dff  <span class="ot">&lt;-</span> renta_edad <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">tipo =</span> Renta.anual.neta.media.por.persona.y.por.unidad.de.consumo) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(tipo <span class="sc">==</span> <span class="st">"Renta neta media por persona"</span>, Sexo <span class="sc">==</span> <span class="st">"Ambos sexos"</span>, <span class="sc">!</span>(Edad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"De 18 a 64 años"</span>, <span class="st">"Menos de 18 años"</span>, <span class="st">"Total"</span>)))</span>
<span id="cb10-486"><a href="#cb10-486"></a></span>
<span id="cb10-487"><a href="#cb10-487"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(dff, <span class="fu">aes</span>(<span class="at">x =</span> Periodo, <span class="at">y =</span> renta, <span class="at">color =</span> Edad)) <span class="sc">+</span></span>
<span id="cb10-488"><a href="#cb10-488"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb10-489"><a href="#cb10-489"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Evolución de la renta neta media por edad"</span>, <span class="at">subtitle =</span> <span class="st">"(Euros corrientes)"</span>,</span>
<span id="cb10-490"><a href="#cb10-490"></a>       <span class="at">x =</span> <span class="st">"Año"</span>, <span class="at">y =</span> <span class="st">"Renta neta"</span>, <span class="at">caption =</span> <span class="st">"Elaboración propia a partir de datos de INE"</span>) <span class="sc">+</span></span>
<span id="cb10-491"><a href="#cb10-491"></a>  <span class="fu">theme_ipsum</span>() <span class="sc">+</span> </span>
<span id="cb10-492"><a href="#cb10-492"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb10-493"><a href="#cb10-493"></a>        <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"gray87"</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>),</span>
<span id="cb10-494"><a href="#cb10-494"></a>        <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"aliceblue"</span>),</span>
<span id="cb10-495"><a href="#cb10-495"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb10-496"><a href="#cb10-496"></a>        <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"serif"</span>, <span class="at">size =</span> <span class="dv">9</span>, <span class="at">colour =</span> <span class="st">"gray17"</span>)) <span class="sc">+</span> <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"green4"</span>, <span class="st">"black"</span>, <span class="st">"blue"</span>, <span class="st">"red"</span>, <span class="st">"orange"</span>)) <span class="sc">+</span></span>
<span id="cb10-497"><a href="#cb10-497"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> Edad), <span class="at">nudge_x =</span> <span class="fl">0.5</span>, <span class="at">nudge_y =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">0</span>)</span>
<span id="cb10-498"><a href="#cb10-498"></a></span>
<span id="cb10-499"><a href="#cb10-499"></a>p_animated <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">transition_reveal</span>(Periodo) <span class="sc">+</span></span>
<span id="cb10-500"><a href="#cb10-500"></a>  <span class="fu">enter_fade</span>() <span class="sc">+</span> </span>
<span id="cb10-501"><a href="#cb10-501"></a>  <span class="fu">exit_fade</span>()</span>
<span id="cb10-502"><a href="#cb10-502"></a></span>
<span id="cb10-503"><a href="#cb10-503"></a><span class="fu">animate</span>(p_animated, <span class="at">nframes =</span> <span class="dv">200</span>, <span class="at">fps =</span> <span class="dv">20</span>)</span>
<span id="cb10-504"><a href="#cb10-504"></a></span>
<span id="cb10-505"><a href="#cb10-505"></a><span class="in">```</span></span>
<span id="cb10-506"><a href="#cb10-506"></a></span>
<span id="cb10-507"><a href="#cb10-507"></a><span class="fu"># Gráfico fijo interactivo</span></span>
<span id="cb10-508"><a href="#cb10-508"></a></span>
<span id="cb10-511"><a href="#cb10-511"></a><span class="in">```{R}</span></span>
<span id="cb10-512"><a href="#cb10-512"></a><span class="fu">library</span>(rio)</span>
<span id="cb10-513"><a href="#cb10-513"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb10-514"><a href="#cb10-514"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb10-515"><a href="#cb10-515"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb10-516"><a href="#cb10-516"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb10-517"><a href="#cb10-517"></a></span>
<span id="cb10-518"><a href="#cb10-518"></a>renta_edad <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"./datos_pulidos/renta_por_edad.csv"</span>)</span>
<span id="cb10-519"><a href="#cb10-519"></a></span>
<span id="cb10-520"><a href="#cb10-520"></a>dff  <span class="ot">&lt;-</span> renta_edad <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">tipo =</span> Renta.anual.neta.media.por.persona.y.por.unidad.de.consumo) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(tipo <span class="sc">==</span> <span class="st">"Renta neta media por persona"</span>, Sexo <span class="sc">==</span> <span class="st">"Ambos sexos"</span>, <span class="sc">!</span>(Edad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"De 18 a 64 años"</span>, <span class="st">"Menos de 18 años"</span>, <span class="st">"Total"</span>)))</span>
<span id="cb10-521"><a href="#cb10-521"></a></span>
<span id="cb10-522"><a href="#cb10-522"></a>p6 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data=</span>dff) <span class="sc">+</span></span>
<span id="cb10-523"><a href="#cb10-523"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> Periodo, <span class="at">y =</span> renta, <span class="at">color =</span> Edad, <span class="at">group =</span> Edad)) <span class="sc">+</span><span class="fu">labs</span> (<span class="at">title =</span> <span class="st">"Evolución de la renta neta media por edad"</span>, <span class="at">subtitle =</span> <span class="st">"(En euros corrientes)"</span>, <span class="at">y =</span> <span class="st">"Renta"</span>, <span class="at">x =</span> <span class="st">"Año"</span>) <span class="sc">+</span> <span class="fu">theme_ipsum</span>()</span>
<span id="cb10-524"><a href="#cb10-524"></a></span>
<span id="cb10-525"><a href="#cb10-525"></a>plotly<span class="sc">::</span><span class="fu">ggplotly</span>(p6)</span>
<span id="cb10-526"><a href="#cb10-526"></a><span class="in">```</span></span>
<span id="cb10-527"><a href="#cb10-527"></a></span>
<span id="cb10-528"><a href="#cb10-528"></a>:::</span>
<span id="cb10-529"><a href="#cb10-529"></a></span>
<span id="cb10-530"><a href="#cb10-530"></a>Tenemos este primer gráfico dinámico, que básicamente lo hemos hecho para demostrar que lo podemos hacer. Sabemos que no es especialmente útil, pero sí vistoso, por eso hemos hecho esta presión interactiva pero estática del mismo gráfico, para un mejor análisis acceded al fijo interactivo.</span>
<span id="cb10-531"><a href="#cb10-531"></a></span>
<span id="cb10-532"><a href="#cb10-532"></a>En este gráfico, cuyos datos están extraídos del INE podemos observar, como ya anticipábamos, que los jóvenes (16-29 años de edad) son el rango de edad que dispone de menos renta. Más notorio es, claro está, con los menores de 16 años. Los jóvenes de 16 a 29 años contaban con una renta media neta o disponible (después de impuestos) de 11.660€.</span>
<span id="cb10-533"><a href="#cb10-533"></a></span>
<span id="cb10-534"><a href="#cb10-534"></a><span class="ss">- </span>La diferencia con el grupo de 30 a 44 años ha pasado de un 6’38% en 2008 a 10’13% en 2022. Un incremento de un 58’78%.</span>
<span id="cb10-535"><a href="#cb10-535"></a></span>
<span id="cb10-536"><a href="#cb10-536"></a><span class="ss">- </span>Con el grupo de 45 a 64 años del 16’86% mencionado arriba a un 18’03%. Un incremento de un 6’94%.</span>
<span id="cb10-537"><a href="#cb10-537"></a></span>
<span id="cb10-538"><a href="#cb10-538"></a><span class="ss">- </span>La mayor divergencia se da con el grupo de los mayores de 65 años. De una diferencia del 6’03% en 2008 a una del 21% en 2022. Un espectacular incremento del 248’23%.</span>
<span id="cb10-539"><a href="#cb10-539"></a></span>
<span id="cb10-540"><a href="#cb10-540"></a>Por tanto, la renta de lo jóvenes de entre 16 y 29 años es la que menos ha crecido: tan solo un 12’97% en 14 años.</span>
<span id="cb10-541"><a href="#cb10-541"></a></span>
<span id="cb10-542"><a href="#cb10-542"></a>Como podemos observar, no sólo es que los jóvenes tengan una renta disponible menor, si no que cada vez se queda más atrás respecto al resto. Los jóvenes, en términos de renta, son cada vez relativamente más pobres.</span>
<span id="cb10-543"><a href="#cb10-543"></a></span>
<span id="cb10-544"><a href="#cb10-544"></a>---</span>
<span id="cb10-545"><a href="#cb10-545"></a></span>
<span id="cb10-546"><a href="#cb10-546"></a><span class="fu">## Porcentaje de parados según la edad</span></span>
<span id="cb10-547"><a href="#cb10-547"></a></span>
<span id="cb10-550"><a href="#cb10-550"></a><span class="in">```{R}</span></span>
<span id="cb10-551"><a href="#cb10-551"></a><span class="co">#Paquetes</span></span>
<span id="cb10-552"><a href="#cb10-552"></a><span class="fu">library</span>(reshape2)</span>
<span id="cb10-553"><a href="#cb10-553"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb10-554"><a href="#cb10-554"></a><span class="fu">library</span>(car) <span class="co"># regression analysis</span></span>
<span id="cb10-555"><a href="#cb10-555"></a><span class="fu">library</span>(plotly)</span>
<span id="cb10-556"><a href="#cb10-556"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb10-557"><a href="#cb10-557"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb10-558"><a href="#cb10-558"></a><span class="fu">library</span>(xts)</span>
<span id="cb10-559"><a href="#cb10-559"></a><span class="fu">library</span>(dygraphs)</span>
<span id="cb10-560"><a href="#cb10-560"></a><span class="fu">library</span>(gifski)</span>
<span id="cb10-561"><a href="#cb10-561"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb10-562"><a href="#cb10-562"></a><span class="co">#rm(list = ls())</span></span>
<span id="cb10-563"><a href="#cb10-563"></a><span class="co">#Df`s</span></span>
<span id="cb10-564"><a href="#cb10-564"></a><span class="co">#---------------------Tipo de contrato------------------------------------------</span></span>
<span id="cb10-565"><a href="#cb10-565"></a>df_contrato <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"./datos_pulidos/contrato_edad.csv"</span>)</span>
<span id="cb10-566"><a href="#cb10-566"></a><span class="co">#----------------------Arreglamos-----------------------------------------------</span></span>
<span id="cb10-567"><a href="#cb10-567"></a><span class="fu">head</span>(df_contrato)</span>
<span id="cb10-568"><a href="#cb10-568"></a>df_contrato <span class="ot">&lt;-</span> df_contrato <span class="sc">%&gt;%</span></span>
<span id="cb10-569"><a href="#cb10-569"></a><span class="fu">mutate</span>(<span class="at">Total =</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>, Total))</span>
<span id="cb10-570"><a href="#cb10-570"></a>df_contrato <span class="ot">&lt;-</span> df_contrato <span class="sc">%&gt;%</span></span>
<span id="cb10-571"><a href="#cb10-571"></a><span class="fu">mutate</span>(<span class="at">Total =</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">","</span>, <span class="st">"."</span>, Total)))</span>
<span id="cb10-572"><a href="#cb10-572"></a><span class="fu">head</span>(df_contrato)</span>
<span id="cb10-573"><a href="#cb10-573"></a>df_contrato <span class="ot">&lt;-</span> df_contrato <span class="sc">%&gt;%</span></span>
<span id="cb10-574"><a href="#cb10-574"></a><span class="fu">filter</span>(Tipo.de.jornada <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Jornada a tiempo completo"</span>, <span class="st">"Jornada a tiempo parcial"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb10-575"><a href="#cb10-575"></a><span class="fu">filter</span>(Tipo.de.dato <span class="sc">%in%</span> <span class="st">"Porcentaje"</span>)</span>
<span id="cb10-576"><a href="#cb10-576"></a>df_contrato_pivot <span class="ot">&lt;-</span> df_contrato <span class="sc">%&gt;%</span></span>
<span id="cb10-577"><a href="#cb10-577"></a><span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">"Tipo.de.jornada"</span>, <span class="at">values_from =</span> <span class="st">"Total"</span>)</span>
<span id="cb10-578"><a href="#cb10-578"></a>df_contrato_pivot <span class="ot">&lt;-</span> df_contrato_pivot[,<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)]</span>
<span id="cb10-579"><a href="#cb10-579"></a>de16a34 <span class="ot">&lt;-</span> df_contrato_pivot <span class="sc">%&gt;%</span></span>
<span id="cb10-580"><a href="#cb10-580"></a><span class="fu">filter</span>(Edad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"De 25 a 29 años"</span>, <span class="st">"De 16 a 19 años"</span>, <span class="st">"De 20 a 24 años"</span>, <span class="st">"De 30 a 34</span></span>
<span id="cb10-581"><a href="#cb10-581"></a><span class="st">años"</span>))</span>
<span id="cb10-582"><a href="#cb10-582"></a>columna <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"De 16 a 34 años"</span>, <span class="at">times =</span> <span class="dv">17</span>)</span>
<span id="cb10-583"><a href="#cb10-583"></a>de16a34 <span class="ot">&lt;-</span> de16a34 <span class="sc">%&gt;%</span></span>
<span id="cb10-584"><a href="#cb10-584"></a><span class="fu">mutate_all</span>(<span class="sc">~</span><span class="fu">replace</span>(., <span class="fu">is.na</span>(.), <span class="dv">0</span>))</span>
<span id="cb10-585"><a href="#cb10-585"></a><span class="do">##</span></span>
<span id="cb10-586"><a href="#cb10-586"></a>de16a34 <span class="ot">&lt;-</span> de16a34 <span class="sc">%&gt;%</span></span>
<span id="cb10-587"><a href="#cb10-587"></a><span class="fu">group_by</span>(Periodo) <span class="sc">%&gt;%</span></span>
<span id="cb10-588"><a href="#cb10-588"></a><span class="fu">summarise</span>(<span class="at">tiempo_completo =</span> <span class="fu">sum</span>(<span class="st">`</span><span class="at">Jornada a tiempo completo</span><span class="st">`</span>)<span class="sc">/</span><span class="dv">4</span>,</span>
<span id="cb10-589"><a href="#cb10-589"></a><span class="at">tiempo_parcial =</span> <span class="fu">sum</span>(<span class="st">`</span><span class="at">Jornada a tiempo parcial</span><span class="st">`</span>)<span class="sc">/</span><span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-590"><a href="#cb10-590"></a><span class="fu">mutate</span>(<span class="at">Edad =</span> columna)</span>
<span id="cb10-591"><a href="#cb10-591"></a>mas35 <span class="ot">&lt;-</span> df_contrato_pivot <span class="sc">%&gt;%</span></span>
<span id="cb10-592"><a href="#cb10-592"></a><span class="fu">filter</span>(Edad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"70 y más años"</span>, <span class="st">"De 35 a 39 años"</span>, <span class="st">"De 40 a 44 años"</span>, <span class="st">"De 45 a 49</span></span>
<span id="cb10-593"><a href="#cb10-593"></a><span class="st">años"</span>, <span class="st">"De 50 a 54 años"</span>, <span class="st">"De 55 a 59 años"</span>, <span class="st">"De 60 a 64 años"</span>, <span class="st">"De 65 a 69 años"</span>))</span>
<span id="cb10-594"><a href="#cb10-594"></a>columna <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"Mayores de 35"</span>, <span class="at">times =</span> <span class="dv">17</span>)</span>
<span id="cb10-595"><a href="#cb10-595"></a>mas35 <span class="ot">&lt;-</span> mas35 <span class="sc">%&gt;%</span></span>
<span id="cb10-596"><a href="#cb10-596"></a><span class="fu">mutate_all</span>(<span class="sc">~</span><span class="fu">replace</span>(., <span class="fu">is.na</span>(.), <span class="dv">0</span>))</span>
<span id="cb10-597"><a href="#cb10-597"></a>mas35 <span class="ot">&lt;-</span> mas35 <span class="sc">%&gt;%</span></span>
<span id="cb10-598"><a href="#cb10-598"></a><span class="fu">group_by</span>(Periodo) <span class="sc">%&gt;%</span></span>
<span id="cb10-599"><a href="#cb10-599"></a><span class="fu">summarise</span>(<span class="at">tiempo_completo =</span> <span class="fu">sum</span>(<span class="st">`</span><span class="at">Jornada a tiempo completo</span><span class="st">`</span>)<span class="sc">/</span><span class="dv">8</span>,</span>
<span id="cb10-600"><a href="#cb10-600"></a><span class="at">tiempo_parcial =</span> <span class="fu">sum</span>(<span class="st">`</span><span class="at">Jornada a tiempo parcial</span><span class="st">`</span>)<span class="sc">/</span><span class="dv">8</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-601"><a href="#cb10-601"></a><span class="fu">mutate</span>(<span class="at">Edad =</span> columna)</span>
<span id="cb10-602"><a href="#cb10-602"></a>contrato <span class="ot">&lt;-</span> <span class="fu">rbind</span>(mas35, de16a34)</span>
<span id="cb10-603"><a href="#cb10-603"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()[<span class="sc">!</span><span class="fu">ls</span>() <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"salario"</span>,<span class="st">"contrato"</span>)])</span>
<span id="cb10-604"><a href="#cb10-604"></a><span class="do">##-------------------------Póblación Activa----------------------------------------------</span></span>
<span id="cb10-605"><a href="#cb10-605"></a>df_activos <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"./datos_pulidos/activos.csv"</span>)</span>
<span id="cb10-606"><a href="#cb10-606"></a><span class="do">##-------------------------Arreglamos-----------------------------------------------------</span></span>
<span id="cb10-607"><a href="#cb10-607"></a><span class="fu">head</span>(df_activos)</span>
<span id="cb10-608"><a href="#cb10-608"></a>df_activos <span class="ot">&lt;-</span> df_activos <span class="sc">%&gt;%</span></span>
<span id="cb10-609"><a href="#cb10-609"></a><span class="fu">mutate</span>(<span class="at">Total =</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>, Total))</span>
<span id="cb10-610"><a href="#cb10-610"></a>df_activos <span class="ot">&lt;-</span> df_activos <span class="sc">%&gt;%</span></span>
<span id="cb10-611"><a href="#cb10-611"></a><span class="fu">mutate</span>(<span class="at">Total =</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">","</span>, <span class="st">"."</span>, Total)))</span>
<span id="cb10-612"><a href="#cb10-612"></a><span class="fu">head</span>(df_activos)</span>
<span id="cb10-613"><a href="#cb10-613"></a>menos35 <span class="ot">&lt;-</span> df_activos <span class="sc">%&gt;%</span></span>
<span id="cb10-614"><a href="#cb10-614"></a><span class="fu">filter</span>(Edad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"De 25 a 29 años"</span>, <span class="st">"De 16 a 19 años"</span>, <span class="st">"De 20 a 24 años"</span>, <span class="st">"De 30 a 34</span></span>
<span id="cb10-615"><a href="#cb10-615"></a><span class="st">años"</span>))</span>
<span id="cb10-616"><a href="#cb10-616"></a><span class="fu">head</span>(menos35)</span>
<span id="cb10-617"><a href="#cb10-617"></a>menos35 <span class="ot">&lt;-</span> menos35 <span class="sc">%&gt;%</span></span>
<span id="cb10-618"><a href="#cb10-618"></a><span class="fu">mutate</span>(Año <span class="ot">=</span> <span class="fu">substr</span>(Periodo, <span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb10-619"><a href="#cb10-619"></a><span class="fu">group_by</span>(Edad, Sexo, Unidad, Año) <span class="sc">%&gt;%</span></span>
<span id="cb10-620"><a href="#cb10-620"></a><span class="fu">summarise</span>(<span class="at">Total =</span> <span class="fu">sum</span>(Total)<span class="sc">/</span><span class="dv">4</span>)</span>
<span id="cb10-621"><a href="#cb10-621"></a>menos35 <span class="ot">&lt;-</span> menos35[,<span class="sc">-</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>)]</span>
<span id="cb10-622"><a href="#cb10-622"></a>columna <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"De 16 a 34 años"</span>, <span class="at">times =</span> <span class="dv">22</span>)</span>
<span id="cb10-623"><a href="#cb10-623"></a>menos35 <span class="ot">&lt;-</span> menos35 <span class="sc">%&gt;%</span></span>
<span id="cb10-624"><a href="#cb10-624"></a><span class="fu">group_by</span>(Año) <span class="sc">%&gt;%</span></span>
<span id="cb10-625"><a href="#cb10-625"></a><span class="fu">summarise</span>(<span class="at">total =</span> <span class="fu">sum</span>(Total)) <span class="sc">%&gt;%</span></span>
<span id="cb10-626"><a href="#cb10-626"></a><span class="fu">mutate</span>(<span class="at">grupo_edad =</span> columna) <span class="sc">%&gt;%</span></span>
<span id="cb10-627"><a href="#cb10-627"></a><span class="fu">filter</span>(<span class="sc">!</span>Año <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"2023"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb10-628"><a href="#cb10-628"></a><span class="fu">rename</span>(<span class="at">num_activos =</span> <span class="st">"total"</span>)</span>
<span id="cb10-629"><a href="#cb10-629"></a>mas35 <span class="ot">&lt;-</span> df_activos <span class="sc">%&gt;%</span></span>
<span id="cb10-630"><a href="#cb10-630"></a><span class="fu">filter</span>(Edad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"70 y más años"</span>, <span class="st">"De 35 a 39 años"</span>, <span class="st">"De 40 a 44 años"</span>, <span class="st">"De 45 a 49</span></span>
<span id="cb10-631"><a href="#cb10-631"></a><span class="st">años"</span>, <span class="st">"De 50 a 54 años"</span>, <span class="st">"De 55 a 59 años"</span>, <span class="st">"De 60 a 64 años"</span>, <span class="st">"De 65 a 69 años"</span>))</span>
<span id="cb10-632"><a href="#cb10-632"></a>mas35 <span class="ot">&lt;-</span> mas35 <span class="sc">%&gt;%</span></span>
<span id="cb10-633"><a href="#cb10-633"></a><span class="fu">mutate</span>(Año <span class="ot">=</span> <span class="fu">substr</span>(Periodo, <span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb10-634"><a href="#cb10-634"></a><span class="fu">group_by</span>(Edad, Sexo, Unidad, Año) <span class="sc">%&gt;%</span></span>
<span id="cb10-635"><a href="#cb10-635"></a><span class="fu">summarise</span>(<span class="at">Total =</span> <span class="fu">sum</span>(Total)<span class="sc">/</span><span class="dv">4</span>)</span>
<span id="cb10-636"><a href="#cb10-636"></a>mas35 <span class="ot">&lt;-</span> mas35[,<span class="sc">-</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>)]</span>
<span id="cb10-637"><a href="#cb10-637"></a>columna <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"Mayores de 35"</span>, <span class="at">times =</span> <span class="dv">22</span>)</span>
<span id="cb10-638"><a href="#cb10-638"></a>mas35 <span class="ot">&lt;-</span> mas35 <span class="sc">%&gt;%</span></span>
<span id="cb10-639"><a href="#cb10-639"></a><span class="fu">group_by</span>(Año) <span class="sc">%&gt;%</span></span>
<span id="cb10-640"><a href="#cb10-640"></a><span class="fu">summarise</span>(<span class="at">total =</span> <span class="fu">sum</span>(Total)) <span class="sc">%&gt;%</span></span>
<span id="cb10-641"><a href="#cb10-641"></a><span class="fu">mutate</span>(<span class="at">grupo_edad =</span> columna) <span class="sc">%&gt;%</span></span>
<span id="cb10-642"><a href="#cb10-642"></a><span class="fu">filter</span>(<span class="sc">!</span>Año <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"2023"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb10-643"><a href="#cb10-643"></a><span class="fu">rename</span>(<span class="at">num_activos =</span> <span class="st">"total"</span>)</span>
<span id="cb10-644"><a href="#cb10-644"></a>activos <span class="ot">&lt;-</span> <span class="fu">rbind</span>(mas35, menos35)</span>
<span id="cb10-645"><a href="#cb10-645"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()[<span class="sc">!</span><span class="fu">ls</span>() <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"salario"</span>,<span class="st">"contrato"</span>, <span class="st">"activos"</span>)])</span>
<span id="cb10-646"><a href="#cb10-646"></a><span class="do">##-----------------------------Póblación parada---------------------------------</span></span>
<span id="cb10-647"><a href="#cb10-647"></a>df_parados <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"./datos_pulidos/parados.csv"</span>)</span>
<span id="cb10-648"><a href="#cb10-648"></a><span class="do">##-----------------------------Arreglamos y sacamos la población ocupada--------</span></span>
<span id="cb10-649"><a href="#cb10-649"></a><span class="fu">head</span>(df_parados)</span>
<span id="cb10-650"><a href="#cb10-650"></a>df_parados <span class="ot">&lt;-</span> df_parados <span class="sc">%&gt;%</span></span>
<span id="cb10-651"><a href="#cb10-651"></a><span class="fu">mutate</span>(<span class="at">Total =</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>, Total))</span>
<span id="cb10-652"><a href="#cb10-652"></a>df_parados <span class="ot">&lt;-</span> df_parados <span class="sc">%&gt;%</span></span>
<span id="cb10-653"><a href="#cb10-653"></a><span class="fu">mutate</span>(<span class="at">Total =</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">","</span>, <span class="st">"."</span>, Total)))</span>
<span id="cb10-654"><a href="#cb10-654"></a><span class="fu">head</span>(df_parados)</span>
<span id="cb10-655"><a href="#cb10-655"></a>menos35 <span class="ot">&lt;-</span> df_parados <span class="sc">%&gt;%</span></span>
<span id="cb10-656"><a href="#cb10-656"></a><span class="fu">filter</span>(Edad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"De 25 a 29 años"</span>, <span class="st">"De 16 a 19 años"</span>, <span class="st">"De 20 a 24 años"</span>, <span class="st">"De 30 a 34</span></span>
<span id="cb10-657"><a href="#cb10-657"></a><span class="st">años"</span>))</span>
<span id="cb10-658"><a href="#cb10-658"></a><span class="fu">head</span>(menos35)</span>
<span id="cb10-659"><a href="#cb10-659"></a>menos35 <span class="ot">&lt;-</span> menos35 <span class="sc">%&gt;%</span></span>
<span id="cb10-660"><a href="#cb10-660"></a><span class="fu">mutate</span>(Año <span class="ot">=</span> <span class="fu">substr</span>(Periodo, <span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb10-661"><a href="#cb10-661"></a><span class="fu">group_by</span>(Edad, Sexo, Unidad, Año) <span class="sc">%&gt;%</span></span>
<span id="cb10-662"><a href="#cb10-662"></a><span class="fu">summarise</span>(<span class="at">Total =</span> <span class="fu">sum</span>(Total)<span class="sc">/</span><span class="dv">4</span>)</span>
<span id="cb10-663"><a href="#cb10-663"></a>menos35 <span class="ot">&lt;-</span> menos35[,<span class="sc">-</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>)]</span>
<span id="cb10-664"><a href="#cb10-664"></a>columna <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"De 16 a 34 años"</span>, <span class="at">times =</span> <span class="dv">22</span>)</span>
<span id="cb10-665"><a href="#cb10-665"></a>menos35 <span class="ot">&lt;-</span> menos35 <span class="sc">%&gt;%</span></span>
<span id="cb10-666"><a href="#cb10-666"></a><span class="fu">group_by</span>(Año) <span class="sc">%&gt;%</span></span>
<span id="cb10-667"><a href="#cb10-667"></a><span class="fu">summarise</span>(<span class="at">total =</span> <span class="fu">sum</span>(Total)) <span class="sc">%&gt;%</span></span>
<span id="cb10-668"><a href="#cb10-668"></a><span class="fu">mutate</span>(<span class="at">grupo_edad =</span> columna) <span class="sc">%&gt;%</span></span>
<span id="cb10-669"><a href="#cb10-669"></a><span class="fu">filter</span>(<span class="sc">!</span>Año <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"2023"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb10-670"><a href="#cb10-670"></a><span class="fu">rename</span>(<span class="at">num_parados =</span> <span class="st">"total"</span>)</span>
<span id="cb10-671"><a href="#cb10-671"></a>mas35 <span class="ot">&lt;-</span> df_parados <span class="sc">%&gt;%</span></span>
<span id="cb10-672"><a href="#cb10-672"></a><span class="fu">filter</span>(Edad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"70 y más años"</span>, <span class="st">"De 35 a 39 años"</span>, <span class="st">"De 40 a 44 años"</span>, <span class="st">"De 45 a 49</span></span>
<span id="cb10-673"><a href="#cb10-673"></a><span class="st">años"</span>, <span class="st">"De 50 a 54 años"</span>, <span class="st">"De 55 a 59 años"</span>, <span class="st">"De 60 a 64 años"</span>, <span class="st">"De 65 a 69 años"</span>))</span>
<span id="cb10-674"><a href="#cb10-674"></a>mas35 <span class="ot">&lt;-</span> mas35 <span class="sc">%&gt;%</span></span>
<span id="cb10-675"><a href="#cb10-675"></a><span class="fu">mutate</span>(Año <span class="ot">=</span> <span class="fu">substr</span>(Periodo, <span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb10-676"><a href="#cb10-676"></a><span class="fu">group_by</span>(Edad, Sexo, Unidad, Año) <span class="sc">%&gt;%</span></span>
<span id="cb10-677"><a href="#cb10-677"></a><span class="fu">summarise</span>(<span class="at">Total =</span> <span class="fu">sum</span>(Total)<span class="sc">/</span><span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-678"><a href="#cb10-678"></a><span class="fu">mutate_all</span>(<span class="sc">~</span><span class="fu">replace</span>(., <span class="fu">is.na</span>(.), <span class="dv">0</span>))</span>
<span id="cb10-679"><a href="#cb10-679"></a>mas35 <span class="ot">&lt;-</span> mas35[,<span class="sc">-</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>)]</span>
<span id="cb10-680"><a href="#cb10-680"></a>columna <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"Mayores de 35"</span>, <span class="at">times =</span> <span class="dv">22</span>)</span>
<span id="cb10-681"><a href="#cb10-681"></a>mas35 <span class="ot">&lt;-</span> mas35 <span class="sc">%&gt;%</span></span>
<span id="cb10-682"><a href="#cb10-682"></a><span class="fu">group_by</span>(Año) <span class="sc">%&gt;%</span></span>
<span id="cb10-683"><a href="#cb10-683"></a><span class="fu">summarise</span>(<span class="at">total =</span> <span class="fu">sum</span>(Total)) <span class="sc">%&gt;%</span></span>
<span id="cb10-684"><a href="#cb10-684"></a><span class="fu">mutate</span>(<span class="at">grupo_edad =</span> columna) <span class="sc">%&gt;%</span></span>
<span id="cb10-685"><a href="#cb10-685"></a><span class="fu">filter</span>(<span class="sc">!</span>Año <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"2023"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb10-686"><a href="#cb10-686"></a><span class="fu">rename</span>(<span class="at">num_parados =</span> <span class="st">"total"</span>)</span>
<span id="cb10-687"><a href="#cb10-687"></a>parados <span class="ot">&lt;-</span> <span class="fu">rbind</span>(mas35, menos35)</span>
<span id="cb10-688"><a href="#cb10-688"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()[<span class="sc">!</span><span class="fu">ls</span>() <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"salario"</span>,<span class="st">"contrato"</span>, <span class="st">"activos"</span>, <span class="st">"parados"</span>)])</span>
<span id="cb10-689"><a href="#cb10-689"></a>act_parad <span class="ot">&lt;-</span> <span class="fu">merge</span>(parados, activos, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Año"</span>, <span class="st">"grupo_edad"</span>))</span>
<span id="cb10-690"><a href="#cb10-690"></a>act_parad <span class="ot">&lt;-</span> act_parad <span class="sc">%&gt;%</span></span>
<span id="cb10-691"><a href="#cb10-691"></a><span class="fu">mutate</span>(<span class="at">num_ocupados =</span> num_activos <span class="sc">-</span> num_parados)</span>
<span id="cb10-692"><a href="#cb10-692"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()[<span class="sc">!</span><span class="fu">ls</span>() <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"salario"</span>,<span class="st">"contrato"</span>, <span class="st">"act_parad"</span>)])</span>
<span id="cb10-693"><a href="#cb10-693"></a><span class="do">##------------------------------Gráficos----------------------------------------</span></span>
<span id="cb10-694"><a href="#cb10-694"></a><span class="fu">head</span>(act_parad)</span>
<span id="cb10-695"><a href="#cb10-695"></a>porcentaje_parados <span class="ot">&lt;-</span> act_parad <span class="sc">%&gt;%</span></span>
<span id="cb10-696"><a href="#cb10-696"></a><span class="fu">group_by</span>(Año) <span class="sc">%&gt;%</span></span>
<span id="cb10-697"><a href="#cb10-697"></a><span class="fu">group_by</span>(Año, grupo_edad) <span class="sc">%&gt;%</span></span>
<span id="cb10-698"><a href="#cb10-698"></a><span class="fu">mutate</span>(<span class="at">Ocupados_edad =</span> (num_ocupados <span class="sc">/</span> num_activos) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb10-699"><a href="#cb10-699"></a><span class="at">Parados_edad =</span> (num_parados <span class="sc">/</span> num_activos) <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-700"><a href="#cb10-700"></a><span class="fu">rename</span>(<span class="at">Periodo =</span> Año)</span>
<span id="cb10-701"><a href="#cb10-701"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()[<span class="sc">!</span><span class="fu">ls</span>() <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"salario"</span>,<span class="st">"contrato"</span>, <span class="st">"porcentaje_parados"</span>, <span class="st">"vivienda"</span>,</span>
<span id="cb10-702"><a href="#cb10-702"></a><span class="st">"act_parad"</span>)])</span>
<span id="cb10-703"><a href="#cb10-703"></a>contrato <span class="ot">&lt;-</span> contrato <span class="sc">%&gt;%</span></span>
<span id="cb10-704"><a href="#cb10-704"></a><span class="fu">rename</span>(<span class="at">jornada_completa =</span> tiempo_completo,</span>
<span id="cb10-705"><a href="#cb10-705"></a><span class="at">jornada_parcial =</span> tiempo_parcial,</span>
<span id="cb10-706"><a href="#cb10-706"></a><span class="at">grupo_edad =</span> Edad)</span>
<span id="cb10-707"><a href="#cb10-707"></a>P2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(porcentaje_parados, <span class="fu">aes</span>(<span class="at">x =</span> Periodo, <span class="at">y =</span> Parados_edad, <span class="at">group =</span> grupo_edad,</span>
<span id="cb10-708"><a href="#cb10-708"></a><span class="at">color =</span> grupo_edad)) <span class="sc">+</span></span>
<span id="cb10-709"><a href="#cb10-709"></a><span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb10-710"><a href="#cb10-710"></a><span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"red"</span>)) <span class="sc">+</span></span>
<span id="cb10-711"><a href="#cb10-711"></a><span class="fu">geom_point</span>( <span class="at">color=</span><span class="st">"black"</span>, <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb10-712"><a href="#cb10-712"></a><span class="fu">theme_economist</span>() <span class="sc">+</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Porcentaje de parados según la edad"</span>, <span class="at">x =</span> <span class="st">"Periodo"</span>, <span class="at">y =</span></span>
<span id="cb10-713"><a href="#cb10-713"></a><span class="st">"Porcentaje"</span>, <span class="at">caption =</span> <span class="st">"Elaboración propia a partir de datos de INE"</span>)</span>
<span id="cb10-714"><a href="#cb10-714"></a></span>
<span id="cb10-715"><a href="#cb10-715"></a>plotly<span class="sc">::</span><span class="fu">ggplotly</span>(P2)</span>
<span id="cb10-716"><a href="#cb10-716"></a></span>
<span id="cb10-717"><a href="#cb10-717"></a><span class="in">```</span></span>
<span id="cb10-718"><a href="#cb10-718"></a></span>
<span id="cb10-719"><a href="#cb10-719"></a></span>
<span id="cb10-720"><a href="#cb10-720"></a>En este otro gráfico podemos observar además cómo la tasa de desempleo es muy superior en el caso de los menores de 35 años respecto a los mayores de 35 años, es decir, durante este primer tramo de edad, de 16 a 34 años, sufrirán un menor poder adquisitivo respecto a los mayores de 34 años.</span>
<span id="cb10-721"><a href="#cb10-721"></a></span>
<span id="cb10-722"><a href="#cb10-722"></a>---</span>
<span id="cb10-723"><a href="#cb10-723"></a></span>
<span id="cb10-724"><a href="#cb10-724"></a><span class="fu">## Porcentaje de contratos de Jornada completa por edad</span></span>
<span id="cb10-725"><a href="#cb10-725"></a></span>
<span id="cb10-728"><a href="#cb10-728"></a><span class="in">```{R}</span></span>
<span id="cb10-729"><a href="#cb10-729"></a>p3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(contrato, <span class="fu">aes</span>(<span class="at">x =</span> Periodo, <span class="at">y =</span> jornada_completa, <span class="at">fill =</span> grupo_edad)) <span class="sc">+</span></span>
<span id="cb10-730"><a href="#cb10-730"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb10-731"><a href="#cb10-731"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"blue3"</span>, <span class="st">"red3"</span>), <span class="at">name =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb10-732"><a href="#cb10-732"></a>  <span class="fu">theme_economist</span>() <span class="sc">+</span></span>
<span id="cb10-733"><a href="#cb10-733"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Contratos de jornada completa según la edad"</span>, <span class="at">x =</span> <span class="st">"Periodo"</span>, <span class="at">y =</span> <span class="st">"Porcentaje"</span>, <span class="at">caption =</span> <span class="st">"Elaboración propia a partir de datos de INE"</span>) </span>
<span id="cb10-734"><a href="#cb10-734"></a>plotly<span class="sc">::</span><span class="fu">ggplotly</span>(p3)</span>
<span id="cb10-735"><a href="#cb10-735"></a><span class="in">```</span></span>
<span id="cb10-736"><a href="#cb10-736"></a></span>
<span id="cb10-737"><a href="#cb10-737"></a></span>
<span id="cb10-738"><a href="#cb10-738"></a>Además, en este gráfico de barras, podemos apreciar como los contratos a jornada completa han disminuido prácticamente 10 puntos porcentuales desde la Gran Recesión hasta nuestros días, mientras que los de los mayores de 35 años han permanecido estables.</span>
<span id="cb10-739"><a href="#cb10-739"></a></span>
<span id="cb10-740"><a href="#cb10-740"></a>El hecho de que los contratos no sean a jornada completa, influye de forma decisiva en que la renta final sea menor, ya que a menos horas trabajadas, menos horas cobradas.</span>
<span id="cb10-741"><a href="#cb10-741"></a></span>
<span id="cb10-742"><a href="#cb10-742"></a>---</span>
<span id="cb10-743"><a href="#cb10-743"></a></span>
<span id="cb10-744"><a href="#cb10-744"></a><span class="fu"># Índice del nivel de Precios de la vivienda a nivel nacional</span></span>
<span id="cb10-745"><a href="#cb10-745"></a></span>
<span id="cb10-746"><a href="#cb10-746"></a>Ahora vamos a analizar cómo se han comportado los precios de la vivienda en general. Primero lo vamos a hacer observando el comportamiento de los precios de forma general a nivel nacional. Luego veremos cómo se ha comportado en términos de tasas de variación, y más tarde, el nivel de precios por comunidades autónomas y en diferentes momentos del tiempo.</span>
<span id="cb10-747"><a href="#cb10-747"></a></span>
<span id="cb10-750"><a href="#cb10-750"></a><span class="in">```{R}</span></span>
<span id="cb10-751"><a href="#cb10-751"></a><span class="co">#Paquetes preliminares</span></span>
<span id="cb10-752"><a href="#cb10-752"></a><span class="co">#install.packages("mapSpain")</span></span>
<span id="cb10-753"><a href="#cb10-753"></a><span class="fu">library</span>(mapSpain)</span>
<span id="cb10-754"><a href="#cb10-754"></a><span class="co">#install.packages("pxR")</span></span>
<span id="cb10-755"><a href="#cb10-755"></a><span class="fu">library</span>(pxR)</span>
<span id="cb10-756"><a href="#cb10-756"></a><span class="co">#install.packages("tidyverse")</span></span>
<span id="cb10-757"><a href="#cb10-757"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb10-758"><a href="#cb10-758"></a><span class="fu">library</span>(data.table)</span>
<span id="cb10-759"><a href="#cb10-759"></a><span class="fu">library</span>(rlist)</span>
<span id="cb10-760"><a href="#cb10-760"></a><span class="fu">library</span>(fs)</span>
<span id="cb10-761"><a href="#cb10-761"></a><span class="fu">library</span>(curl)</span>
<span id="cb10-762"><a href="#cb10-762"></a><span class="fu">library</span>(rio)</span>
<span id="cb10-763"><a href="#cb10-763"></a><span class="fu">library</span>(sf)</span>
<span id="cb10-764"><a href="#cb10-764"></a><span class="fu">library</span>(readxl)</span>
<span id="cb10-765"><a href="#cb10-765"></a><span class="fu">library</span>(downloader)</span>
<span id="cb10-766"><a href="#cb10-766"></a><span class="fu">library</span>(writexl)</span>
<span id="cb10-767"><a href="#cb10-767"></a><span class="co">#install.packages("rlist")</span></span>
<span id="cb10-768"><a href="#cb10-768"></a><span class="co"># install.packages("devtools")</span></span>
<span id="cb10-769"><a href="#cb10-769"></a><span class="co">#devtools::install_github("r-lib/conflicted")</span></span>
<span id="cb10-770"><a href="#cb10-770"></a><span class="co">#Creamos una carpeta para guardar los datos</span></span>
<span id="cb10-771"><a href="#cb10-771"></a><span class="co">#Descargamos los datos en formato PX desde el Ine</span></span>
<span id="cb10-772"><a href="#cb10-772"></a><span class="co">#Índice de Precios de Vivienda por CCAA: general, vivienda nueva y de segunda mano</span></span>
<span id="cb10-773"><a href="#cb10-773"></a><span class="co">#Como la URL es: "https://www.ine.es/jaxiT3/files/t/es/px/25171.px?nocab=1"</span></span>
<span id="cb10-774"><a href="#cb10-774"></a>url <span class="ot">&lt;-</span> <span class="st">"https://www.ine.es/jaxiT3/files/t/es/px/25171.px?nocab=1"</span></span>
<span id="cb10-775"><a href="#cb10-775"></a>aa <span class="ot">&lt;-</span> <span class="fu">read.px</span>(url)</span>
<span id="cb10-776"><a href="#cb10-776"></a><span class="co">#Lo convertimos a CSV para simplificar y creamos un dataframe</span></span>
<span id="cb10-777"><a href="#cb10-777"></a><span class="fu">write.csv</span>(aa, <span class="at">file =</span> <span class="st">"./datos_pulidos/data.csv"</span>, <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb10-778"><a href="#cb10-778"></a><span class="co">#Lo convertimos a CSV para simplificar y creamos un dataframe</span></span>
<span id="cb10-779"><a href="#cb10-779"></a><span class="fu">write.csv</span>(aa, <span class="at">file =</span> <span class="st">"./datos_pulidos/data.csv"</span>)</span>
<span id="cb10-780"><a href="#cb10-780"></a>df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"./datos_pulidos/data.csv"</span>)</span>
<span id="cb10-781"><a href="#cb10-781"></a><span class="co">#Ahora nos ponemos a curra un poquito:</span></span>
<span id="cb10-782"><a href="#cb10-782"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb10-783"><a href="#cb10-783"></a><span class="co">#install.packages("plotly")</span></span>
<span id="cb10-784"><a href="#cb10-784"></a><span class="fu">library</span>(plotly)</span>
<span id="cb10-785"><a href="#cb10-785"></a><span class="co">#install.packages("ggExtra")</span></span>
<span id="cb10-786"><a href="#cb10-786"></a><span class="fu">library</span>(ggExtra)</span>
<span id="cb10-787"><a href="#cb10-787"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb10-788"><a href="#cb10-788"></a><span class="co">#Os voy a matar con este código y esta sintaxis que me hacéis arreglar cada vez</span></span>
<span id="cb10-789"><a href="#cb10-789"></a>df1 <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">rename</span>(á<span class="at">mbito =</span> Comunidades.y.Ciudades.Autónomas, <span class="at">tipo =</span> </span>
<span id="cb10-790"><a href="#cb10-790"></a>                              General..vivienda.nueva.y.de.segunda.mano, <span class="at">Valor =</span> value) <span class="sc">%&gt;%</span> <span class="fu">filter</span> (tipo <span class="sc">==</span> <span class="st">"General"</span>, Índices.y.tasas <span class="sc">==</span> <span class="st">"Índice"</span>, ámbito <span class="sc">==</span> <span class="st">"Nacional"</span>)</span>
<span id="cb10-791"><a href="#cb10-791"></a><span class="co">#rm (list = ls())</span></span>
<span id="cb10-792"><a href="#cb10-792"></a>df1<span class="fl">.1</span> <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">Territorio =</span> Comunidades.y.Ciudades.Autónomas, <span class="at">tipo =</span> General..vivienda.nueva.y.de.segunda.mano, <span class="at">Valor =</span> value)</span>
<span id="cb10-793"><a href="#cb10-793"></a></span>
<span id="cb10-794"><a href="#cb10-794"></a>df1<span class="fl">.2</span> <span class="ot">&lt;-</span> df1<span class="fl">.1</span> <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Territorio =</span> <span class="fu">case_when</span>( </span>
<span id="cb10-795"><a href="#cb10-795"></a>  Territorio <span class="sc">==</span> <span class="st">"01 Andalucía"</span> <span class="sc">~</span> <span class="st">"Andalucía"</span>,</span>
<span id="cb10-796"><a href="#cb10-796"></a>  Territorio <span class="sc">==</span> <span class="st">"02 Aragón"</span> <span class="sc">~</span> <span class="st">"Aragón"</span>,</span>
<span id="cb10-797"><a href="#cb10-797"></a>  Territorio <span class="sc">==</span> <span class="st">"03 Asturias, Principado de"</span> <span class="sc">~</span> <span class="st">"Asturias, Principado de"</span>,</span>
<span id="cb10-798"><a href="#cb10-798"></a>  Territorio <span class="sc">==</span> <span class="st">"04 Balears, Illes"</span> <span class="sc">~</span> <span class="st">"Balears, Illes"</span>,</span>
<span id="cb10-799"><a href="#cb10-799"></a>  Territorio <span class="sc">==</span> <span class="st">"05 Canarias"</span> <span class="sc">~</span> <span class="st">"Canarias"</span>,</span>
<span id="cb10-800"><a href="#cb10-800"></a>  Territorio <span class="sc">==</span> <span class="st">"06 Cantabria"</span> <span class="sc">~</span> <span class="st">"Cantabria"</span>,</span>
<span id="cb10-801"><a href="#cb10-801"></a>  Territorio <span class="sc">==</span> <span class="st">"07 Castilla y León"</span> <span class="sc">~</span> <span class="st">"Castilla y León"</span>,</span>
<span id="cb10-802"><a href="#cb10-802"></a>  Territorio <span class="sc">==</span> <span class="st">"08 Castilla - La Mancha"</span> <span class="sc">~</span> <span class="st">"Castilla-La Mancha"</span>,</span>
<span id="cb10-803"><a href="#cb10-803"></a>  Territorio <span class="sc">==</span> <span class="st">"09 Cataluña"</span> <span class="sc">~</span> <span class="st">"Cataluña"</span>,</span>
<span id="cb10-804"><a href="#cb10-804"></a>  Territorio <span class="sc">==</span> <span class="st">"10 Comunitat Valenciana"</span> <span class="sc">~</span> <span class="st">"Comunitat Valenciana"</span>,</span>
<span id="cb10-805"><a href="#cb10-805"></a>  Territorio <span class="sc">==</span> <span class="st">"11 Extremadura"</span> <span class="sc">~</span> <span class="st">"Extremadura"</span>,</span>
<span id="cb10-806"><a href="#cb10-806"></a>  Territorio <span class="sc">==</span> <span class="st">"12 Galicia"</span> <span class="sc">~</span> <span class="st">"Galicia"</span>,</span>
<span id="cb10-807"><a href="#cb10-807"></a>  Territorio <span class="sc">==</span> <span class="st">"13 Madrid, Comunidad de"</span> <span class="sc">~</span> <span class="st">"Madrid, Comunidad de"</span>,</span>
<span id="cb10-808"><a href="#cb10-808"></a>  Territorio <span class="sc">==</span> <span class="st">"14 Murcia, Región de"</span> <span class="sc">~</span> <span class="st">"Murcia, Región de"</span>,</span>
<span id="cb10-809"><a href="#cb10-809"></a>  Territorio <span class="sc">==</span> <span class="st">"15 Navarra, Comunidad Foral de"</span> <span class="sc">~</span> <span class="st">"Navarra, Comunidad Foral de"</span>,</span>
<span id="cb10-810"><a href="#cb10-810"></a>  Territorio <span class="sc">==</span> <span class="st">"16 País Vasco"</span> <span class="sc">~</span> <span class="st">"País Vasco"</span>,</span>
<span id="cb10-811"><a href="#cb10-811"></a>  Territorio <span class="sc">==</span> <span class="st">"17 Rioja, La"</span> <span class="sc">~</span> <span class="st">"Rioja, La"</span>, </span>
<span id="cb10-812"><a href="#cb10-812"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> Territorio))</span>
<span id="cb10-813"><a href="#cb10-813"></a></span>
<span id="cb10-814"><a href="#cb10-814"></a>df3 <span class="ot">&lt;-</span> df1<span class="fl">.2</span> <span class="sc">%&gt;%</span> <span class="fu">filter</span> (tipo <span class="sc">==</span> <span class="st">"General"</span>, Índices.y.tasas <span class="sc">==</span> <span class="st">"Índice"</span>, <span class="sc">!</span>(Territorio <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Nacional"</span>, <span class="st">"18 Ceuta"</span>, <span class="st">"19 Melilla"</span>)))</span>
<span id="cb10-815"><a href="#cb10-815"></a>prov <span class="ot">&lt;-</span> pjpv.curso.R<span class="fl">.2022</span><span class="sc">::</span>LAU2_prov_2020_canarias</span>
<span id="cb10-816"><a href="#cb10-816"></a>ccaa <span class="ot">&lt;-</span> prov <span class="sc">%&gt;%</span></span>
<span id="cb10-817"><a href="#cb10-817"></a>  <span class="fu">group_by</span>(ine_ccaa, ine_ccaa.n, ine_ccaa.n.pjp) <span class="sc">%&gt;%</span></span>
<span id="cb10-818"><a href="#cb10-818"></a>  <span class="fu">summarise</span>() <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>()</span>
<span id="cb10-819"><a href="#cb10-819"></a></span>
<span id="cb10-820"><a href="#cb10-820"></a>ccaa <span class="ot">&lt;-</span> ccaa <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">Territorio =</span> ine_ccaa.n)</span>
<span id="cb10-821"><a href="#cb10-821"></a>df4 <span class="ot">&lt;-</span> df3 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Periodo <span class="sc">==</span> <span class="st">"2023T3"</span>)</span>
<span id="cb10-822"><a href="#cb10-822"></a>df5 <span class="ot">&lt;-</span> <span class="fu">full_join</span>(ccaa, df4, <span class="at">by =</span> <span class="st">"Territorio"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>( <span class="sc">!</span>(Territorio <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Ceuta"</span>, <span class="st">"Melilla"</span>)))</span>
<span id="cb10-823"><a href="#cb10-823"></a>df6 <span class="ot">&lt;-</span> df3 <span class="sc">%&gt;%</span> </span>
<span id="cb10-824"><a href="#cb10-824"></a>  <span class="fu">filter</span>(Periodo <span class="sc">==</span> <span class="st">"2018T3"</span>)</span>
<span id="cb10-825"><a href="#cb10-825"></a>df7 <span class="ot">&lt;-</span> <span class="fu">full_join</span>(ccaa, df6, <span class="at">by =</span> <span class="st">"Territorio"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>( <span class="sc">!</span>(Territorio <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Ceuta"</span>, <span class="st">"Melilla"</span>)))</span>
<span id="cb10-826"><a href="#cb10-826"></a>df8 <span class="ot">&lt;-</span> df3 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Periodo <span class="sc">==</span> <span class="st">"2015T3"</span>)</span>
<span id="cb10-827"><a href="#cb10-827"></a>df9 <span class="ot">&lt;-</span> <span class="fu">full_join</span>(ccaa, df8, <span class="at">by =</span> <span class="st">"Territorio"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>( <span class="sc">!</span>(Territorio <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Ceuta"</span>, <span class="st">"Melilla"</span>)))</span>
<span id="cb10-828"><a href="#cb10-828"></a>df10 <span class="ot">&lt;-</span> df3 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Periodo <span class="sc">==</span> <span class="st">"2011T3"</span>)</span>
<span id="cb10-829"><a href="#cb10-829"></a>df11 <span class="ot">&lt;-</span> <span class="fu">full_join</span>(ccaa, df10, <span class="at">by =</span> <span class="st">"Territorio"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>( <span class="sc">!</span>(Territorio <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Ceuta"</span>, <span class="st">"Melilla"</span>)))</span>
<span id="cb10-830"><a href="#cb10-830"></a>df12 <span class="ot">&lt;-</span> df3 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Periodo <span class="sc">==</span> <span class="st">"2013T3"</span>)</span>
<span id="cb10-831"><a href="#cb10-831"></a>df13 <span class="ot">&lt;-</span> <span class="fu">full_join</span>(ccaa, df12, <span class="at">by =</span> <span class="st">"Territorio"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>( <span class="sc">!</span>(Territorio <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Ceuta"</span>, <span class="st">"Melilla"</span>)))</span>
<span id="cb10-832"><a href="#cb10-832"></a>df14 <span class="ot">&lt;-</span> df3 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Periodo <span class="sc">==</span> <span class="st">"2007T3"</span>)</span>
<span id="cb10-833"><a href="#cb10-833"></a>df15 <span class="ot">&lt;-</span> <span class="fu">full_join</span>(ccaa, df14, <span class="at">by =</span> <span class="st">"Territorio"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>( <span class="sc">!</span>(Territorio <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Ceuta"</span>, <span class="st">"Melilla"</span>)))</span>
<span id="cb10-834"><a href="#cb10-834"></a></span>
<span id="cb10-835"><a href="#cb10-835"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb10-836"><a href="#cb10-836"></a>escala_limites <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">90</span>, <span class="dv">190</span>)</span>
<span id="cb10-837"><a href="#cb10-837"></a></span>
<span id="cb10-838"><a href="#cb10-838"></a>p4 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df5, <span class="fu">aes</span>(<span class="at">fill =</span> Valor)) <span class="sc">+</span></span>
<span id="cb10-839"><a href="#cb10-839"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb10-840"><a href="#cb10-840"></a>  <span class="fu">geom_sf_label</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">as.character</span>(Valor)), <span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb10-841"><a href="#cb10-841"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">guide =</span> <span class="st">"legend"</span>,<span class="at">limits =</span> escala_limites) <span class="sc">+</span></span>
<span id="cb10-842"><a href="#cb10-842"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Precios vivienda CCAA 2023T3 (100 = 2015)"</span>,<span class="at">caption =</span> <span class="st">"Elaboración propia a partir de datos extraídos de INE"</span>) <span class="sc">+</span></span>
<span id="cb10-843"><a href="#cb10-843"></a>  <span class="fu">theme_void</span>() </span>
<span id="cb10-844"><a href="#cb10-844"></a></span>
<span id="cb10-845"><a href="#cb10-845"></a>p7 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df13, <span class="fu">aes</span>(<span class="at">fill =</span> Valor)) <span class="sc">+</span></span>
<span id="cb10-846"><a href="#cb10-846"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb10-847"><a href="#cb10-847"></a>  <span class="fu">geom_sf_label</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">as.character</span>(Valor)), <span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb10-848"><a href="#cb10-848"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">guide =</span> <span class="st">"legend"</span>,<span class="at">limits =</span> escala_limites) <span class="sc">+</span></span>
<span id="cb10-849"><a href="#cb10-849"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Precios vivienda CCAA 2013T3 (100 = 2015)"</span>,<span class="at">caption =</span> <span class="st">"Elaboración propia a partir de datos extraídos de INE"</span>) <span class="sc">+</span></span>
<span id="cb10-850"><a href="#cb10-850"></a>  <span class="fu">theme_void</span>() </span>
<span id="cb10-851"><a href="#cb10-851"></a></span>
<span id="cb10-852"><a href="#cb10-852"></a>p9 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df15, <span class="fu">aes</span>(<span class="at">fill =</span> Valor)) <span class="sc">+</span></span>
<span id="cb10-853"><a href="#cb10-853"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb10-854"><a href="#cb10-854"></a>  <span class="fu">geom_sf_label</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">as.character</span>(Valor)), <span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb10-855"><a href="#cb10-855"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">guide =</span> <span class="st">"legend"</span>,<span class="at">limits =</span> escala_limites) <span class="sc">+</span></span>
<span id="cb10-856"><a href="#cb10-856"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Precios vivienda CCAA 20071T3 (100 = 2015)"</span>,<span class="at">caption =</span> <span class="st">"Elaboración propia a partir de datos extraídos de INE"</span>) <span class="sc">+</span></span>
<span id="cb10-857"><a href="#cb10-857"></a>  <span class="fu">theme_void</span>() </span>
<span id="cb10-858"><a href="#cb10-858"></a><span class="co"># Combinar los dos gráficos</span></span>
<span id="cb10-859"><a href="#cb10-859"></a>p9</span>
<span id="cb10-860"><a href="#cb10-860"></a></span>
<span id="cb10-861"><a href="#cb10-861"></a>p7</span>
<span id="cb10-862"><a href="#cb10-862"></a></span>
<span id="cb10-863"><a href="#cb10-863"></a>p4</span>
<span id="cb10-864"><a href="#cb10-864"></a></span>
<span id="cb10-865"><a href="#cb10-865"></a><span class="in">```</span></span>
<span id="cb10-866"><a href="#cb10-866"></a></span>
<span id="cb10-867"><a href="#cb10-867"></a>Estos mapas de coropletas reflejan los niveles de precios de la vivienda en 6 momentos diferentes del tiempo. El primero es del tercer trimestre del año 2007. En ese momento los precios, como podemos observar, son los más altos. Este es el punto más elevado de la burbuja. Los años siguientes reflejan el pinchazo de la burbuja, con un descenso continuado de los precios hasta 2013. Que es el punto más bajo. Hemos decidido poner el año 2015 por ser el año de la base 100. A partir de ahí, vemos cómo en los años posteriores los precios son ya más elevados que en 2015, y particularmente en 2023, ligeramente por</span>
<span id="cb10-868"><a href="#cb10-868"></a>debajo, pero sin haber una burbuja. O, al menos, no parece haberla.</span>
<span id="cb10-869"><a href="#cb10-869"></a></span>
<span id="cb10-870"><a href="#cb10-870"></a>Al ser mapas de coropletas podemos sacar conclusiones acerca de en qué comunidades han aumentado más los precios y por tanto, dónde es más difícil acceder a la vivienda, ceteris paribus. En el último gráfico destacan claramente la Comunidad de Madrid, Cataluña y Baleares. Esto no nos sorprende, tanto la Comunidad de Madrid, como Cataluña son regiones muy dinámicas donde, además, se encuentran las principales ciudades de España. Baleares, por su parte, es una de las regiones más turísticas, donde la oferta de inmuebles tampoco es demasiado elevada. Destacan también en segunda fila País Vasco (región muy dinámica), Andalucía y Canarias (regiones muy turísticas).</span>
<span id="cb10-871"><a href="#cb10-871"></a></span>
<span id="cb10-872"><a href="#cb10-872"></a>Tal vez os habéis fijado en que estos mapas no concuerdan exactamente con lo que hemos visto hace dos gráficos (se veía que el nivel general de precios de la vivienda es ahora igual al del punto más alto de la burbuja y, sin embargo, en los mapas parece que en 2007T3 los precios son mucho más elevados que en la actualidad).</span>
<span id="cb10-873"><a href="#cb10-873"></a></span>
<span id="cb10-874"><a href="#cb10-874"></a>Esto se debe a que hay más viviendas allá donde más está subiendo el precio como se observa en el gráfico (que hay que insertar). La explicación de la afirmación anterior que parece a priori contradictoria, es que aunque hay más vivienda en esta zona (oferta elevada), la demanda es todavía más elevada que la oferta.</span>
<span id="cb10-875"><a href="#cb10-875"></a></span>
<span id="cb10-876"><a href="#cb10-876"></a></span>
<span id="cb10-877"><a href="#cb10-877"></a>---</span>
<span id="cb10-878"><a href="#cb10-878"></a> </span>
<span id="cb10-879"><a href="#cb10-879"></a><span class="fu"># Régimen de viviendas de 16 a 29 años</span></span>
<span id="cb10-880"><a href="#cb10-880"></a></span>
<span id="cb10-883"><a href="#cb10-883"></a><span class="in">```{R}</span></span>
<span id="cb10-884"><a href="#cb10-884"></a><span class="co">#Hogares por regimen de tenencia edad</span></span>
<span id="cb10-885"><a href="#cb10-885"></a><span class="co">#Cargamos liberías</span></span>
<span id="cb10-886"><a href="#cb10-886"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb10-887"><a href="#cb10-887"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb10-888"><a href="#cb10-888"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb10-889"><a href="#cb10-889"></a><span class="fu">library</span>(pxR)</span>
<span id="cb10-890"><a href="#cb10-890"></a></span>
<span id="cb10-891"><a href="#cb10-891"></a>url4 <span class="ot">&lt;-</span> <span class="st">"https://www.ine.es/jaxiT3/files/t/es/px/9994.px?nocab=1"</span></span>
<span id="cb10-892"><a href="#cb10-892"></a>ac <span class="ot">&lt;-</span> <span class="fu">read.px</span>(url4)</span>
<span id="cb10-893"><a href="#cb10-893"></a><span class="fu">write.csv</span>(ac, <span class="at">file =</span> <span class="st">"./datos_pulidos/data_1.csv"</span>, <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb10-894"><a href="#cb10-894"></a>vivienda_edad <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"./datos_pulidos/data_1.csv"</span>)</span>
<span id="cb10-895"><a href="#cb10-895"></a></span>
<span id="cb10-896"><a href="#cb10-896"></a>dd <span class="ot">&lt;-</span> vivienda_edad <span class="sc">%&gt;%</span></span>
<span id="cb10-897"><a href="#cb10-897"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">regimen =</span> Régimen.de.tenencia.de.la.vivienda.principal, <span class="at">edad =</span> Edad.de.la.persona.de.referencia, <span class="at">sexo =</span> Sexo.de.la.persona.de.referencia) <span class="sc">%&gt;%</span></span>
<span id="cb10-898"><a href="#cb10-898"></a>  <span class="fu">filter</span>(edad <span class="sc">==</span> <span class="st">"De 16 a 29 años"</span>, sexo <span class="sc">==</span> <span class="st">"Ambos sexos"</span>)</span>
<span id="cb10-899"><a href="#cb10-899"></a></span>
<span id="cb10-900"><a href="#cb10-900"></a>p30 <span class="ot">&lt;-</span> dd <span class="sc">%&gt;%</span></span>
<span id="cb10-901"><a href="#cb10-901"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Periodo, <span class="at">y =</span> value, <span class="at">fill =</span> regimen)) <span class="sc">+</span></span>
<span id="cb10-902"><a href="#cb10-902"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"stack"</span>) <span class="sc">+</span></span>
<span id="cb10-903"><a href="#cb10-903"></a>  <span class="fu">theme_ipsum</span>() <span class="sc">+</span></span>
<span id="cb10-904"><a href="#cb10-904"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Año"</span>, <span class="at">y =</span> <span class="st">"% según régimen de tenencia"</span>, </span>
<span id="cb10-905"><a href="#cb10-905"></a>       <span class="at">title =</span> <span class="st">"Régimen de vivienda de 16 a 29 años"</span>,</span>
<span id="cb10-906"><a href="#cb10-906"></a>       <span class="at">subtitle =</span> <span class="st">"Datos porcentuales"</span>,</span>
<span id="cb10-907"><a href="#cb10-907"></a>       <span class="at">caption =</span> <span class="st">"Elaboración propia a partir de datos del INE"</span>) <span class="sc">+</span></span>
<span id="cb10-908"><a href="#cb10-908"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#66c2a5"</span>, <span class="st">"#fc8d62"</span>, <span class="st">"#8da0cb"</span>, <span class="st">"#e78ac3"</span>), </span>
<span id="cb10-909"><a href="#cb10-909"></a>                    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Alquiler a precios de mercado"</span>, <span class="st">"Alquiler inferior al precio de mercado"</span>, <span class="st">"Cesión"</span>, <span class="st">"Propiedad"</span>)) <span class="sc">+</span></span>
<span id="cb10-910"><a href="#cb10-910"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>), </span>
<span id="cb10-911"><a href="#cb10-911"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb10-912"><a href="#cb10-912"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">18</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb10-913"><a href="#cb10-913"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">14</span>))</span>
<span id="cb10-914"><a href="#cb10-914"></a>  </span>
<span id="cb10-915"><a href="#cb10-915"></a></span>
<span id="cb10-916"><a href="#cb10-916"></a>p30</span>
<span id="cb10-917"><a href="#cb10-917"></a><span class="in">```</span></span>
<span id="cb10-918"><a href="#cb10-918"></a></span>
<span id="cb10-919"><a href="#cb10-919"></a>En este gráfico podemos observar cómo el régimen de vivienda entre los jóvenes ha ido variando a lo largo del tiempo. La mayor sustitución ha sido de régimen de propiedad al de alquiler a precios de mercado. También ha aumentado ligeramente el régimen de cesión, es decir; los jóvenes se han trasladado a opciones más asequibles. Aunque los alquileres también suben en las grandes ciudades, siguen siendo opciones más asumibles que pagar la entrada de la hipoteca y su mensualidad, por no hablar de fórmulas utilizadas como el compartir piso.</span>
<span id="cb10-920"><a href="#cb10-920"></a></span>
<span id="cb10-921"><a href="#cb10-921"></a>---</span>
<span id="cb10-922"><a href="#cb10-922"></a></span>
<span id="cb10-923"><a href="#cb10-923"></a><span class="fu"># Otros gráficos bonitos pero poco útiles sobre el salario</span></span>
<span id="cb10-924"><a href="#cb10-924"></a></span>
<span id="cb10-925"><a href="#cb10-925"></a>::: {.panel-tabset}</span>
<span id="cb10-926"><a href="#cb10-926"></a></span>
<span id="cb10-927"><a href="#cb10-927"></a><span class="fu"># Rigeline por grupo de edad</span></span>
<span id="cb10-928"><a href="#cb10-928"></a></span>
<span id="cb10-931"><a href="#cb10-931"></a><span class="in">```{R}</span></span>
<span id="cb10-932"><a href="#cb10-932"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb10-933"><a href="#cb10-933"></a><span class="fu">library</span>(rio)</span>
<span id="cb10-934"><a href="#cb10-934"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb10-935"><a href="#cb10-935"></a><span class="fu">library</span>(ggridges)</span>
<span id="cb10-936"><a href="#cb10-936"></a></span>
<span id="cb10-937"><a href="#cb10-937"></a>df_edad <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"./datos_pulidos/salario_grupo_edad.csv"</span>)</span>
<span id="cb10-938"><a href="#cb10-938"></a></span>
<span id="cb10-939"><a href="#cb10-939"></a>p1<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_edad, <span class="fu">aes</span>(<span class="at">x =</span> salario, <span class="at">y =</span> grupo_edad, <span class="at">fill =</span> grupo_edad)) <span class="sc">+</span></span>
<span id="cb10-940"><a href="#cb10-940"></a>  <span class="fu">geom_density_ridges</span>() <span class="sc">+</span></span>
<span id="cb10-941"><a href="#cb10-941"></a>  <span class="fu">theme_ridges</span>() <span class="sc">+</span> </span>
<span id="cb10-942"><a href="#cb10-942"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb10-943"><a href="#cb10-943"></a></span>
<span id="cb10-944"><a href="#cb10-944"></a>p1</span>
<span id="cb10-945"><a href="#cb10-945"></a><span class="in">```</span></span>
<span id="cb10-946"><a href="#cb10-946"></a></span>
<span id="cb10-947"><a href="#cb10-947"></a><span class="fu"># Barras agrupadas por edad</span></span>
<span id="cb10-948"><a href="#cb10-948"></a></span>
<span id="cb10-951"><a href="#cb10-951"></a><span class="in">```{R}</span></span>
<span id="cb10-952"><a href="#cb10-952"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb10-953"><a href="#cb10-953"></a><span class="fu">library</span>(rio)</span>
<span id="cb10-954"><a href="#cb10-954"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb10-955"><a href="#cb10-955"></a><span class="fu">library</span>(ggridges)</span>
<span id="cb10-956"><a href="#cb10-956"></a></span>
<span id="cb10-957"><a href="#cb10-957"></a>df_edad <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"./datos_pulidos/salario_grupo_edad.csv"</span>)</span>
<span id="cb10-958"><a href="#cb10-958"></a></span>
<span id="cb10-959"><a href="#cb10-959"></a>df_edad_01 <span class="ot">&lt;-</span> df_edad <span class="sc">|&gt;</span> </span>
<span id="cb10-960"><a href="#cb10-960"></a>  <span class="fu">filter</span>(grupo_edad <span class="sc">!=</span> <span class="st">"Total"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb10-961"><a href="#cb10-961"></a>  <span class="fu">filter</span>()</span>
<span id="cb10-962"><a href="#cb10-962"></a></span>
<span id="cb10-963"><a href="#cb10-963"></a>df_edad_01<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">factor</span>(df_edad_01<span class="sc">$</span>year)</span>
<span id="cb10-964"><a href="#cb10-964"></a></span>
<span id="cb10-965"><a href="#cb10-965"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_edad_01, <span class="fu">aes</span>(<span class="at">fill =</span> grupo_edad, <span class="at">y =</span> salario, <span class="at">x =</span> year))<span class="sc">+</span></span>
<span id="cb10-966"><a href="#cb10-966"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"dodge"</span>, <span class="at">stat =</span> <span class="st">"identity"</span>)<span class="sc">+</span></span>
<span id="cb10-967"><a href="#cb10-967"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Salario por grupo de edad"</span>, <span class="at">caption =</span> <span class="st">"Elaboración propia a partir de datos extraídos de INE"</span>)</span>
<span id="cb10-968"><a href="#cb10-968"></a></span>
<span id="cb10-969"><a href="#cb10-969"></a>p2</span>
<span id="cb10-970"><a href="#cb10-970"></a><span class="in">```</span></span>
<span id="cb10-971"><a href="#cb10-971"></a></span>
<span id="cb10-972"><a href="#cb10-972"></a>:::</span>
<span id="cb10-973"><a href="#cb10-973"></a></span>
<span id="cb10-974"><a href="#cb10-974"></a>--- </span>
<span id="cb10-975"><a href="#cb10-975"></a></span>
<span id="cb10-976"><a href="#cb10-976"></a><span class="fu"># Conclusiones:</span></span>
<span id="cb10-977"><a href="#cb10-977"></a></span>
<span id="cb10-978"><a href="#cb10-978"></a>Con este trabajo hemos podido comprobar la situación precaria en la que se encuentran los jóvenes a la hora de acceder a la vivienda: salarios bajos, tasa de paro muy por encima del resto de las edades, pobreza relativa creciente, niveles de precios de la vivienda astronómicos…</span>
<span id="cb10-979"><a href="#cb10-979"></a>Si bien no hemos ahondado en las causas de esta situación ni en posibles soluciones, hemos querido al menos señalar de forma clara la situación. Nos afecta directamente y por ello creemos que es algo a lo que, por lo menos, deberíamos prestar atención. </span>
<span id="cb10-980"><a href="#cb10-980"></a></span>
<span id="cb10-981"><a href="#cb10-981"></a>Además este tema está de actualidad en la academia por el lanzamiento del libro “La juventud atracada” de Ignacio Conde-Ruiz. En él se repasa lo visto en este trabajo además de la problemática con las pensiones y ahonda más en causas, consecuencias y soluciones. El propio Ignacio dio una charla en la UV hace unas semanas. Os adjuntamos una entrevista que hizo con el también economista Juan Ramón Rallo, en la que habla extensamente de su libro y su contenido.</span>
<span id="cb10-982"><a href="#cb10-982"></a></span>
<span id="cb10-983"><a href="#cb10-983"></a><span class="fu"># Mas información sobre el tema</span></span>
<span id="cb10-984"><a href="#cb10-984"></a></span>
<span id="cb10-985"><a href="#cb10-985"></a><span class="kw">&lt;center&gt;&lt;iframe</span> <span class="er">width</span><span class="ot">=</span><span class="st">"560"</span> <span class="er">height</span><span class="ot">=</span><span class="st">"315"</span> <span class="er">src</span><span class="ot">=</span><span class="st">"https://www.youtube.com/live/EtIErMd1EYM?si=-LNzHLRcepGHZ-r5"</span><span class="kw">&gt;&lt;/iframe&gt;&lt;/center&gt;</span></span>
<span id="cb10-986"><a href="#cb10-986"></a></span>
</code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">© 2023 Joel y su equipo de devolopers (Saúl &amp; Pedro)</div>   
    <div class="nav-footer-center">Hecho con <a href="https://quarto.org">Quarto</a></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
<li class="nav-item compact">
    <a class="nav-link" href="https://github.com/<tu-usuario-github>">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:josefar@alumni.uv.es">
      <i class="bi bi-envelope" role="img">
</i> 
    </a>
  </li>  
</ul>
</div>
  </div>
</footer>


<script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>