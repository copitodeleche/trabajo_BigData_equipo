{"title":"VIVIENDA EN ESPAÑA","markdown":{"yaml":{"title":"VIVIENDA EN ESPAÑA","description":"Vamos a analizar el mercado de la vivienda y comprarlo con su accesibilidad de los jóvenes\n","author":["Joel Seguí\\n","Saúl Gil\\n","Pedro Peñalver"],"date":"2023-12-20","categories":["Trabajo BigData","Vivienda"],"image":"./imagenes/my_favicon.png","title-block-banner":true,"title-block-banner-color":"lightgrey","toc-depth":3,"smooth-scroll":true,"format":{"html":{"link-external-newwindow":true}},"code-tools":true,"code-link":true},"headingText":"Introducción","containsRefs":false,"markdown":"\n\n\nEl objetivo de este trabajo es analizar la situación en la que se encuentran los jóvenes a la hora de acceder al mercado laboral. Para ello analizaremos diferentes métricas entre las que se encuentran: Evolución de los niveles de precios de la vivienda a nivel nacional y autonómico, comparación de esta con la de los salarios reales…\n\nDe esta manera constataremos las dificultades a alas que se enfrentan los jóvenes españoles para emanciparse. También extraeremos conclusiones sobre si es así en todo el país o si por el contrario hay diferencias según el área geográfica. \n\n# Datos del trabajo\n\n::: {.panel-tabset}\n\n# Datos\n\nVamos a utilizar datos de los paquetes `pxR` <i>(ine)</I>, `eurostat` además de proveedores de datos externos.\n\n# Código\n\n```{R}\n#Paquetes Preliminares\nlibrary(pxR)\nlibrary(tidyverse)\nlibrary(data.table)\nlibrary(rlist)\nlibrary(fs)\nlibrary(curl)\nlibrary(rio)\nlibrary(readxl)\nlibrary(downloader)\nlibrary(writexl)\n\n#-------------------Creamos una carpeta para guardar los datos------------------\n\ndir_create(\"./docs/datos\")\n\n#Descargamos los datos y los exportamos sin pulir: \n\n#---------------------Índice de Precios de Vivienda-----------------------------\n\nurl <- \"https://www.ine.es/jaxiT3/files/t/es/px/25171.px?nocab=1\"\naa <- read.px(url)\n\n#Lo convertimos a CSV para simplificar y creamos un dataframe\n\nwrite.csv(aa, file = \"data.csv\", sep = \",\")\nIPV <- read.csv(\"data.csv\")\nrm(list = ls()[!ls() %in% c(\"IPV\")])\n\n#Los guardamos sin arreglar\nwrite.csv(IPV,  file = \"./docs/datos/ipv.csv\")\n#-------------------------Compra-venta de vivienda------------------------------\n\nruta_xls <- \"https://apps.fomento.gob.es/BoletinOnline2/sedal/34010110.XLS\"\n\ndownload.file(ruta_xls, \"datos.xls\", mode = \"wb\")\n\nnombres_hojas <- c(\"2004,2005,2006,2007,2008\", \"2009,2010,2011,2012,2013\", \n                   \"2014,2015,2016,2017,2018\", \"2019,2020,2021,2022,2023\")\n# Leer todas las hojas en una lista\nfor (i in seq_along(nombres_hojas)) {\n  hoja <- nombres_hojas[i]\n  df <- readxl::read_excel(\"datos.xls\", sheet = i) \n  write.csv(df, file = paste0(hoja, \".csv\"), row.names = FALSE)}\n\n#Juntamos las cuatro sheets en una y después arreglaremos el desastre\ncompraventa_2004 <- read.csv(\"2004,2005,2006,2007,2008.csv\")\ncompraventa_2009 <- read.csv(\"2009,2010,2011,2012,2013.csv\")\ncompraventa_2014 <- read.csv(\"2014,2015,2016,2017,2018.csv\")\ncompraventa_2019 <- read.csv(\"2019,2020,2021,2022,2023.csv\")\n\ncv <- bind_cols(compraventa_2009,compraventa_2014)\ncv <- bind_cols(cv,compraventa_2019)\ncompraventa_2004 <- compraventa_2004[1:nrow(cv), ]\ncv <- bind_cols(cv,compraventa_2004)\n\n\ncv <- cv %>%\n  filter(row_number() %in% 6:72)\ncv <- cv %>%\n  filter(!row_number() %in% 2)\n\n#Los guardamos sin arreglar\nwrite.csv(cv,  file = \"./docs/datos/cv.csv\")\nrm(list = ls())\n\n\n#--------------------------Renta por edad y sexo--------------------------------\n\nurl3 <- \"https://www.ine.es/jaxiT3/files/t/es/px/9942.px?nocab=1\"\naa <- read.px(url3)\n\n#Lo convertimos a CSV para simplificar y creamos un dataframe\n\nwrite.csv(aa, file = \"data.csv\", sep = \",\")\nrenta_edad <- read.csv(\"data.csv\")\n\n#Los guardamos sin arreglar\nwrite.csv(renta_edad, file = \"./docs/datos/renta_edad.csv\")\n\nrm(list = ls())\n#---------------------------Renta por nacionalidad------------------------------\n\nurl4 <- \"https://www.ine.es/jaxiT3/files/t/es/px/9945.px?nocab=1\"\naa <- read.px(url4)\n\n#Lo convertimos a CSV para simplificar y creamos un dataframe\n\nwrite.csv(aa, file = \"data.csv\", sep = \",\")\nrenta_nacionalidad <- read.csv(\"data.csv\")\n\n#Los guardamos sin arreglar\nwrite.csv(renta_nacionalidad, file = \"./docs/datos/renta_nacionalidad.csv\")\n\nrm(list = ls())\n\n\n#---------------------Hogares por regimen de tenencia edad----------------------\n\nurl4 <- \"https://www.ine.es/jaxiT3/files/t/es/px/9994.px?nocab=1\"\naa <- read.px(url4)\n\n#Lo convertimos a CSV para simplificar y creamos un dataframe\n\nwrite.csv(aa, file = \"data.csv\", sep = \",\")\nvivienda_edad <- read.csv(\"data.csv\")\n\n#Los guardamos sin arreglar\nwrite.csv(vivienda_edad, file = \"./docs/datos/vivienda_datos.csv\")\n\nrm(list = ls())\n\n#Borramos archivos como las sheets separadas y otros datos\nfile.remove(\"2004,2005,2006,2007,2008.csv\", \"2009,2010,2011,2012,2013.csv\",\n            \"2014,2015,2016,2017,2018.csv\", \"2019,2020,2021,2022,2023.csv\", \n            \"compraventa.csv\", \"data.csv\", \"datos.xls\", \"./docs/datos/25171.px\",\n            \"./docs/datos/34010110.XLS\")\n\n#----------------------Procedemos a limpiar los datos---------------------------\n\n#-------------Creamos una carpeta para guardar los datos pulidos----------------\n\ndir_create(\"./datos_pulidos\")\nlibrary(zoo)\n\n###AHORA LIMPIAMOS LOS DATOS PARA TRABAJAR MEJOR CON ELLOS###\n\n#-------------------Indice de precios de la Vivienda----------------------------\n\ncv <- import(file = \"./docs/datos/cv.csv\")\n\n#Elimino las columnas duplicadas indicando el nombre de la provincia \n#para dejar solo una columna de provincias\n\ncv <- cv[-1,]\ncolnames(cv) <- NULL\ncolumnas_duplicadas <- duplicated(t(cv))\nprint(columnas_duplicadas)\n\ncv <- cv[, !columnas_duplicadas]\ncolnames(cv) <- paste0(\"col_\", 1:ncol(cv))\n#Elimino otra columnaa duplicadaa que el argumento no encuenrtra \n\ncv <- cv[, -62]\n\n#Doy nombre a la posición [1,2] de provincias para después poder trabajar mejor\n#Ya que convertiremos la primera fila en colnames\n\ncv[1,2] <- \"Provincia\"\ncolnames(cv)\n\n#Seleccionamos la primera fila del df y lo convertimos en un vector. Después, \n#Hacemos que los NA se sustituyan por el texto de su izquierda (Remplazamos NA`s\n#por el año al que corresponde esa columnas)\n\ndf <- cv %>%\n  slice(1) %>%\n  unlist()\n\ndf <- na.locf(df)\n\n#Ahora convertimos el vector en la fila 1 que después convrtiremos en colnames\n#para trabajar mejor.\n\ncv[1,] <- df \n\n#Juntamos la fila 1 y 2 a partir de la tercer columna separando el texto con \"_\" \n#y le rellenamos las dos columnas restantes con los nombres que nos vengan mejor \n#para trabajar\naa <- cv[1,]\naa <- c(\"\",\"Provincia\",paste(cv[1,3:ncol(cv)],cv[2,3:ncol(cv)], sep = \"_\"))\n\n#Convertimos el vector aa en colnames\n\ncolnames(cv) = aa\n\n#Quitamos la primera y la segunda fila, es información que ya indica colnames\n\ncv <- cv[-(1:2), -(1)]\ncolnames(cv)\n\n#Hacemos que todas las columnas que indican año_trimestre pivoten y dejen los\n#valores que contenían las transacciones por un lado y el año_trimestre por otro\n\nTransacciones_por_provincia <- cv %>% pivot_longer(cols = starts_with(\"Año\"), \n                                                   names_to = \"Año_Trimestre\", \n                                                   names_prefix = \"Año\", \n                                                   values_to = \"Transacciones\",\n                                                   values_drop_na = TRUE)\n\n#Guardamos en la carpeta(en formato .csv) de datos pulidos y seguimos\n\nwrite.csv(Transacciones_por_provincia, \n          file = \"datos_pulidos/Transacciones_por_povincia.csv\")\n\n#----------------Índice de precios de la vivienda-------------------------------\n\n\nipv <- import(file = \"./docs/datos/ipv.csv\")\n\n#Estos datos están bien, quitamos las dos columnas que no aportan y los guardamos\nipv <- ipv[,-(1:2)]\n\nwrite.csv(ipv, file = \"./datos_pulidos/indice_precio_vivienda.csv\")\n\n#rm(list = ls())\n\n\n#----------------Renta por edad-------------------------------------------------\n\nre <- import(file  = \"./docs/datos/renta_edad.csv\")\n\n#Renombramos las columnas, seleccionamos lo que nos interesa y borramos el restante\n#Exportamos\nre <- re %>%\n  rename(renta = \"value\") %>%\n  select(!c(\"V1\", \"X\"))\n\nwrite.csv(re, file = \"./datos_pulidos/renta_por_edad.csv\")\n\n\n\n\n#----------------Régimen tenencia de vivienda por edad--------------------------\n\nvd <- import(file  = \"./docs/datos/vivienda_datos.csv\")\n\n#Renombramos las columnas, seleccionamos lo que nos interesa y borramos el restante\n#Exportamos\nvd<- vd %>%\n  rename(Porcentaje = \"value\") %>%\n  select(!c(\"V1\", \"X\"))\n\nwrite.csv(vd, file = \"./datos_pulidos/tenencia_de_vivienda.csv\")\nrm(list = ls())\n\n#--------------------IMPORTAR DATOS CE / EUROSTAT-------------------------------\noptions(scipen = 999) #- para quitar la notación científica\n\nlibrary(eurostat) \nlibrary(DT) \nlibrary(tidyverse)\n\ninfo <- search_eurostat(\"GDP\", type = \"all\")\nmy_table <-\"sdg_08_10\"\n\n#Comprobamos que es el PIB pc\nlabel_eurostat_tables(my_table)\n\ndf_original <- get_eurostat(my_table, time_format = 'raw', keepFlags = TRUE)\ndf_names <- names(df_original)\ndf_original <- label_eurostat(df_original, code = df_names, fix_duplicated = TRUE)\n\n#Creamos otro df para trabajor con él \n\ndf <- df_original\n\n#Ver que hay en el df\ndf_aa <- pjpv.curso.R.2022::pjp_dicc(df)\ndf_bb <- pjpv.curso.R.2022::pjp_valores_unicos(df, nn = 400)\n\n#Vamos a hacer un poco de limpieza\nobj_buenos <- c(\"df\", \"df_original\", \"df_bb\")\nrm(list = setdiff(ls(), obj_buenos))\n\n#Vamos a seguir arreglando el df\n\ndf <- df |> \n  rename(year = time_code) |> \n  rename(PIB_pc = values) |> \n  rename(country = geo)\n\n#Chain linked volumes (2010), euro per capita\n#Solo queremos el PIB_pc\ndf <- df |> \n  filter(unit == \"Chain linked volumes (2010), euro per capita\")\n\n#Eliminamos todo lo que nos molesta a la vista \ndf <- df |> \n  select(-c(unit_code, values_code, unit, time, na_item_code, na_item, flags))\n\ndf <- df |>  mutate(year =  as.numeric(year))\n\ndf <- df |>  mutate(iso_2_code =  eurostat::harmonize_country_code(geo_code))\n\ndf <- df |> \n  select(-c(geo_code, flags_code))\n\n\nlibrary(fs)\ndir_create(\"datos_pulidos\")\n\n#A continuación vamos a exportar los datos para luego importarlas más fácilmente #library(rio)\n\nexport(df, \"./datos_pulidos/PIB_pc.csv\", type = \"csv\")\n#---------------DATOS SOBRE EL SALARIO POR NIVEL DE FORMACIÓN-------------------\n\nlibrary(rio)\nlibrary(tidyverse)\nurl <- \"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/13931.csv?nocab=1\"\ndf_ine <- import(url)\ndf_ine_01 <- df_ine |> \n  filter(Decil %in% (\"Total decil\")) |> \n  select(\"Periodo\", \"Tipo de jornada\", \"NIVELES DE FORMACION\", \"Total\") |> \n  rename(year = Periodo) |> \n  rename(jornada = 'Tipo de jornada') |> \n  rename(formacion = 'NIVELES DE FORMACION') |>\n  rename(salario = Total)\n\n#VAMOS A CONVERTIR LA VARIABLE salario A NUMERIC\n\n#R y el INE me han jodiedo la vida para pasar esto a numeric (antes no funcionaba)\ndf_ine_01 <- df_ine_01 |> \n  mutate(salario = as.numeric(gsub(\",\", \".\", gsub(\"\\\\.\", \"\", salario))))\n\nexport(df_ine_01,\"./datos_pulidos/salario_formacion.csv\", type = \"csv\")\n\n#salarios por edades\nurl_1 <- \"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/13928.csv?nocab=1\"\ndf_ine_x1 <- import(url_1)\n\ndf_ine_02 <- df_ine_x1 |> \n  filter(Decil %in% (\"Total decil\")) |>\n  select(\"Periodo\", \"Tipo de jornada\", \"Grupo de edad\", \"Total\") |> \n  rename(year = Periodo) |> \n  rename(jornada = 'Tipo de jornada') |> \n  rename(grupo_edad = 'Grupo de edad') |>\n  rename(salario = Total)\n\n#PASAMOS A NUMERIC\ndf_ine_02 <- df_ine_02 |> \n  mutate(salario = as.numeric(gsub(\",\", \".\", gsub(\"\\\\.\", \"\", salario))))\n\nexport(df_ine_02,\"./datos_pulidos/salario_grupo_edad.csv\", type = \"csv\")\n#Datos sobre el IPC\n\nurl_2 <- \"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/50908.csv?nocab=1\"\ndf_ipc <- import(url_2)\n\ndf_ipc_01 <- df_ipc |> \n  filter(`Grupos ECOICOP` %in% c(\"Índice general\", \"04 Vivienda, agua, electricidad, gas y otros combustibles\")) |> \n  select(\"Periodo\", \"Grupos ECOICOP\", \"Tipo de dato\", \"Total\") |> \n  rename(year = Periodo) |>\n  rename(grupo = 'Grupos ECOICOP') |> \n  rename(tipo_dato = `Tipo de dato` ) \n\n#PASAMOS A NUMERIC\ndf_ipc_01 <- df_ipc_01 |> \n  mutate(Total = as.numeric(gsub(\",\", \".\", gsub(\"\\\\.\", \"\", Total))))\n\n#PARA SEPARAR EN LA VARIABLE YEAR LOS DATOS POR AÑOS Y MESES\n#df_sep <- df_ipc_01 |> \n#  separate(col = year, into = c(\"year\", \"month\"), sep = \"M\")\n\n#df_sep <- df_sep |> \n#  mutate(month = paste0(\"M\", month))\n\nexport(df_ipc_01, \"./datos_pulidos/IPC_mas_vivienda.csv\", type = \"csv\")\n\n#Por tipo de jornada\ndf_temporal <- import(\"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/10894.csv?nocab=1\")\ndf_contrato <- import(\"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/4854.csv?nocab=1\")\ndf_contrato <- df_contrato %>%\nfilter(Sexo %in% \"Ambos sexos\")\nwrite.csv(df_temporal, file= \"./datos_pulidos/temporalidad_edad.csv\")\nwrite.csv(df_contrato, file = \"./datos_pulidos/contrato_edad.csv\")\n\n#-------------------------Paro-----------------------------------\ndf_activos <- import(\"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/4049.csv?nocab=1\")\ndf_parados <- import(\"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/4084.csv?nocab=1\")\ndf_activos <- df_activos %>%\nfilter(Sexo %in% \"Ambos sexos\") %>%\nfilter(Unidad %in% \"Valor absoluto\")\ndf_parados <- df_parados %>%\nfilter(Sexo %in% \"Ambos sexos\") %>%\nfilter(Unidad %in% \"Valor absoluto\")\n\n#Saúl\n#-------------------------Por tipo de jornada-----------------------------------\n\ndf_temporal <- import(\"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/10894.csv?nocab=1\")\ndf_contrato <- import(\"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/4854.csv?nocab=1\")\n\ndf_contrato <- df_contrato %>%\n  filter(Sexo %in% \"Ambos sexos\")\n\n\n\nwrite.csv(df_temporal, file= \"./datos_pulidos/temporalidad_edad.csv\")\nwrite.csv(df_contrato, file = \"./datos_pulidos/contrato_edad.csv\")\n\n#Saúl\n#-------------------------Paro-----------------------------------\n\n\ndf_activos <- import(\"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/4049.csv?nocab=1\")\ndf_parados <- import(\"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/4084.csv?nocab=1\")\n\n\ndf_activos <- df_activos %>%\n  filter(Sexo %in% \"Ambos sexos\") %>%\n  filter(Unidad %in% \"Valor absoluto\")\n\n\ndf_parados <- df_parados %>%\n  filter(Sexo %in% \"Ambos sexos\") %>%\n  filter(Unidad %in% \"Valor absoluto\")\n\nexport(df_activos, file = \"./datos_pulidos/activos.csv\", format=\"csv\")\nexport(df_parados, file = \"./datos_pulidos/parados.csv\", format=\"csv\")\n\n```\n\n:::\n\n---\n\n# Evolución de la renta neta por edad\n\nIniciaremos analizando los datos de renta según la edad (como pueden imaginar, los jóvenes constituyen el grupo poblacional que dispone de menos renta), para, a continuación, adentrarnos en datos que muestran la evolución de los precios de la vivienda.\n\n\n::: {.panel-tabset}\n\n# Gráfico en movimiento\n\n```{R}\n#Cargamos datos\nlibrary(rio)\nlibrary(tidyverse)\nlibrary(gganimate)\nlibrary(ggthemes)\nlibrary(hrbrthemes)\n\n#-\n\nrenta_edad <- read.csv(\"./datos_pulidos/renta_por_edad.csv\")\n\ndff  <- renta_edad %>% rename(tipo = Renta.anual.neta.media.por.persona.y.por.unidad.de.consumo) %>% filter(tipo == \"Renta neta media por persona\", Sexo == \"Ambos sexos\", !(Edad %in% c(\"De 18 a 64 años\", \"Menos de 18 años\", \"Total\")))\n\np <- ggplot(dff, aes(x = Periodo, y = renta, color = Edad)) +\n  geom_line(size = 1) +\n  labs(title = \"Evolución de la renta neta media por edad\", subtitle = \"(Euros corrientes)\",\n       x = \"Año\", y = \"Renta neta\", caption = \"Elaboración propia a partir de datos de INE\") +\n  theme_ipsum() + \n  theme(legend.position = \"bottom\",\n        panel.grid.major = element_line(colour = \"gray87\", linetype = \"dashed\"),\n        panel.background = element_rect(fill = \"aliceblue\"),\n        panel.grid.minor = element_blank(),\n        axis.text = element_text(family = \"serif\", size = 9, colour = \"gray17\")) + scale_color_manual(values = c(\"green4\", \"black\", \"blue\", \"red\", \"orange\")) +\n  geom_text(aes(label = Edad), nudge_x = 0.5, nudge_y = 0.5, hjust = 0)\n\np_animated <- p + transition_reveal(Periodo) +\n  enter_fade() + \n  exit_fade()\n\nanimate(p_animated, nframes = 200, fps = 20)\n\n```\n\n# Gráfico fijo interactivo\n\n```{R}\nlibrary(rio)\nlibrary(tidyverse)\nlibrary(gganimate)\nlibrary(ggthemes)\nlibrary(hrbrthemes)\n\nrenta_edad <- read.csv(\"./datos_pulidos/renta_por_edad.csv\")\n\ndff  <- renta_edad %>% rename(tipo = Renta.anual.neta.media.por.persona.y.por.unidad.de.consumo) %>% filter(tipo == \"Renta neta media por persona\", Sexo == \"Ambos sexos\", !(Edad %in% c(\"De 18 a 64 años\", \"Menos de 18 años\", \"Total\")))\n\np6 <- ggplot(data=dff) +\n  geom_line(aes(x = Periodo, y = renta, color = Edad, group = Edad)) +labs (title = \"Evolución de la renta neta media por edad\", subtitle = \"(En euros corrientes)\", y = \"Renta\", x = \"Año\") + theme_ipsum()\n\nplotly::ggplotly(p6)\n```\n\n:::\n\nTenemos este primer gráfico dinámico, que básicamente lo hemos hecho para demostrar que lo podemos hacer. Sabemos que no es especialmente útil, pero sí vistoso, por eso hemos hecho esta presión interactiva pero estática del mismo gráfico, para un mejor análisis acceded al fijo interactivo.\n\nEn este gráfico, cuyos datos están extraídos del INE podemos observar, como ya anticipábamos, que los jóvenes (16-29 años de edad) son el rango de edad que dispone de menos renta. Más notorio es, claro está, con los menores de 16 años. Los jóvenes de 16 a 29 años contaban con una renta media neta o disponible (después de impuestos) de 11.660€.\n\n- La diferencia con el grupo de 30 a 44 años ha pasado de un 6’38% en 2008 a 10’13% en 2022. Un incremento de un 58’78%.\n\n- Con el grupo de 45 a 64 años del 16’86% mencionado arriba a un 18’03%. Un incremento de un 6’94%.\n\n- La mayor divergencia se da con el grupo de los mayores de 65 años. De una diferencia del 6’03% en 2008 a una del 21% en 2022. Un espectacular incremento del 248’23%.\n\nPor tanto, la renta de lo jóvenes de entre 16 y 29 años es la que menos ha crecido: tan solo un 12’97% en 14 años.\n\nComo podemos observar, no sólo es que los jóvenes tengan una renta disponible menor, si no que cada vez se queda más atrás respecto al resto. Los jóvenes, en términos de renta, son cada vez relativamente más pobres.\n\n---\n\n## Porcentaje de parados según la edad\n\n```{R}\n\n#Paquetes\nlibrary(reshape2)\nlibrary(tidyverse)\nlibrary(car) # regression analysis\nlibrary(plotly)\nlibrary(ggplot2)\nlibrary(gganimate)\nlibrary(xts)\nlibrary(dygraphs)\nlibrary(gifski)\nlibrary(ggthemes)\n#rm(list = ls())\n#Df`s\n#---------------------Tipo de contrato------------------------------------------\ndf_contrato <- read.csv(\"./datos_pulidos/contrato_edad.csv\")\n#----------------------Arreglamos-----------------------------------------------\nhead(df_contrato)\ndf_contrato <- df_contrato %>%\nmutate(Total = gsub(\"\\\\.\", \"\", Total))\ndf_contrato <- df_contrato %>%\nmutate(Total = as.numeric(gsub(\",\", \".\", Total)))\nhead(df_contrato)\ndf_contrato <- df_contrato %>%\nfilter(Tipo.de.jornada %in% c(\"Jornada a tiempo completo\", \"Jornada a tiempo parcial\")) %>%\nfilter(Tipo.de.dato %in% \"Porcentaje\")\ndf_contrato_pivot <- df_contrato %>%\npivot_wider(names_from = \"Tipo.de.jornada\", values_from = \"Total\")\ndf_contrato_pivot <- df_contrato_pivot[,-(1:2)]\nde16a34 <- df_contrato_pivot %>%\nfilter(Edad %in% c(\"De 25 a 29 años\", \"De 16 a 19 años\", \"De 20 a 24 años\", \"De 30 a 34\naños\"))\ncolumna <- rep(\"De 16 a 34 años\", times = 17)\nde16a34 <- de16a34 %>%\nmutate_all(~replace(., is.na(.), 0))\n##\nde16a34 <- de16a34 %>%\ngroup_by(Periodo) %>%\nsummarise(tiempo_completo = sum(`Jornada a tiempo completo`)/4,\ntiempo_parcial = sum(`Jornada a tiempo parcial`)/4) %>%\nmutate(Edad = columna)\nmas35 <- df_contrato_pivot %>%\nfilter(Edad %in% c(\"70 y más años\", \"De 35 a 39 años\", \"De 40 a 44 años\", \"De 45 a 49\naños\", \"De 50 a 54 años\", \"De 55 a 59 años\", \"De 60 a 64 años\", \"De 65 a 69 años\"))\ncolumna <- rep(\"Mayores de 35\", times = 17)\nmas35 <- mas35 %>%\nmutate_all(~replace(., is.na(.), 0))\nmas35 <- mas35 %>%\ngroup_by(Periodo) %>%\nsummarise(tiempo_completo = sum(`Jornada a tiempo completo`)/8,\ntiempo_parcial = sum(`Jornada a tiempo parcial`)/8) %>%\nmutate(Edad = columna)\ncontrato <- rbind(mas35, de16a34)\nrm(list = ls()[!ls() %in% c(\"salario\",\"contrato\")])\n##-------------------------Póblación Activa----------------------------------------------\ndf_activos <- read.csv(\"./datos_pulidos/activos.csv\")\n##-------------------------Arreglamos-----------------------------------------------------\nhead(df_activos)\ndf_activos <- df_activos %>%\nmutate(Total = gsub(\"\\\\.\", \"\", Total))\ndf_activos <- df_activos %>%\nmutate(Total = as.numeric(gsub(\",\", \".\", Total)))\nhead(df_activos)\nmenos35 <- df_activos %>%\nfilter(Edad %in% c(\"De 25 a 29 años\", \"De 16 a 19 años\", \"De 20 a 24 años\", \"De 30 a 34\naños\"))\nhead(menos35)\nmenos35 <- menos35 %>%\nmutate(Año = substr(Periodo, 1, 4)) %>%\ngroup_by(Edad, Sexo, Unidad, Año) %>%\nsummarise(Total = sum(Total)/4)\nmenos35 <- menos35[,-(2:3)]\ncolumna <- rep(\"De 16 a 34 años\", times = 22)\nmenos35 <- menos35 %>%\ngroup_by(Año) %>%\nsummarise(total = sum(Total)) %>%\nmutate(grupo_edad = columna) %>%\nfilter(!Año %in% c(\"2023\")) %>%\nrename(num_activos = \"total\")\nmas35 <- df_activos %>%\nfilter(Edad %in% c(\"70 y más años\", \"De 35 a 39 años\", \"De 40 a 44 años\", \"De 45 a 49\naños\", \"De 50 a 54 años\", \"De 55 a 59 años\", \"De 60 a 64 años\", \"De 65 a 69 años\"))\nmas35 <- mas35 %>%\nmutate(Año = substr(Periodo, 1, 4)) %>%\ngroup_by(Edad, Sexo, Unidad, Año) %>%\nsummarise(Total = sum(Total)/4)\nmas35 <- mas35[,-(2:3)]\ncolumna <- rep(\"Mayores de 35\", times = 22)\nmas35 <- mas35 %>%\ngroup_by(Año) %>%\nsummarise(total = sum(Total)) %>%\nmutate(grupo_edad = columna) %>%\nfilter(!Año %in% c(\"2023\")) %>%\nrename(num_activos = \"total\")\nactivos <- rbind(mas35, menos35)\nrm(list = ls()[!ls() %in% c(\"salario\",\"contrato\", \"activos\")])\n##-----------------------------Póblación parada---------------------------------\ndf_parados <- read.csv(\"./datos_pulidos/parados.csv\")\n##-----------------------------Arreglamos y sacamos la población ocupada--------\nhead(df_parados)\ndf_parados <- df_parados %>%\nmutate(Total = gsub(\"\\\\.\", \"\", Total))\ndf_parados <- df_parados %>%\nmutate(Total = as.numeric(gsub(\",\", \".\", Total)))\nhead(df_parados)\nmenos35 <- df_parados %>%\nfilter(Edad %in% c(\"De 25 a 29 años\", \"De 16 a 19 años\", \"De 20 a 24 años\", \"De 30 a 34\naños\"))\nhead(menos35)\nmenos35 <- menos35 %>%\nmutate(Año = substr(Periodo, 1, 4)) %>%\ngroup_by(Edad, Sexo, Unidad, Año) %>%\nsummarise(Total = sum(Total)/4)\nmenos35 <- menos35[,-(2:3)]\ncolumna <- rep(\"De 16 a 34 años\", times = 22)\nmenos35 <- menos35 %>%\ngroup_by(Año) %>%\nsummarise(total = sum(Total)) %>%\nmutate(grupo_edad = columna) %>%\nfilter(!Año %in% c(\"2023\")) %>%\nrename(num_parados = \"total\")\nmas35 <- df_parados %>%\nfilter(Edad %in% c(\"70 y más años\", \"De 35 a 39 años\", \"De 40 a 44 años\", \"De 45 a 49\naños\", \"De 50 a 54 años\", \"De 55 a 59 años\", \"De 60 a 64 años\", \"De 65 a 69 años\"))\nmas35 <- mas35 %>%\nmutate(Año = substr(Periodo, 1, 4)) %>%\ngroup_by(Edad, Sexo, Unidad, Año) %>%\nsummarise(Total = sum(Total)/4) %>%\nmutate_all(~replace(., is.na(.), 0))\nmas35 <- mas35[,-(2:3)]\ncolumna <- rep(\"Mayores de 35\", times = 22)\nmas35 <- mas35 %>%\ngroup_by(Año) %>%\nsummarise(total = sum(Total)) %>%\nmutate(grupo_edad = columna) %>%\nfilter(!Año %in% c(\"2023\")) %>%\nrename(num_parados = \"total\")\nparados <- rbind(mas35, menos35)\nrm(list = ls()[!ls() %in% c(\"salario\",\"contrato\", \"activos\", \"parados\")])\nact_parad <- merge(parados, activos, by = c(\"Año\", \"grupo_edad\"))\nact_parad <- act_parad %>%\nmutate(num_ocupados = num_activos - num_parados)\nrm(list = ls()[!ls() %in% c(\"salario\",\"contrato\", \"act_parad\")])\n##------------------------------Gráficos----------------------------------------\nhead(act_parad)\nporcentaje_parados <- act_parad %>%\ngroup_by(Año) %>%\ngroup_by(Año, grupo_edad) %>%\nmutate(Ocupados_edad = (num_ocupados / num_activos) * 100,\nParados_edad = (num_parados / num_activos) * 100) %>%\nrename(Periodo = Año)\nrm(list = ls()[!ls() %in% c(\"salario\",\"contrato\", \"porcentaje_parados\", \"vivienda\",\n\"act_parad\")])\ncontrato <- contrato %>%\nrename(jornada_completa = tiempo_completo,\njornada_parcial = tiempo_parcial,\ngrupo_edad = Edad)\nP2 <- ggplot(porcentaje_parados, aes(x = Periodo, y = Parados_edad, group = grupo_edad,\ncolor = grupo_edad)) +\ngeom_line() +\nscale_color_manual(values = c(\"blue\", \"red\")) +\ngeom_point( color=\"black\", size=2) +\ntheme_economist() +labs(title = \"Porcentaje de parados según la edad\", x = \"Periodo\", y =\n\"Porcentaje\", caption = \"Elaboración propia a partir de datos de INE\")\n\nplotly::ggplotly(P2)\n\n```\n\n\nEn este otro gráfico podemos observar además cómo la tasa de desempleo es muy superior en el caso de los menores de 35 años respecto a los mayores de 35 años, es decir, durante este primer tramo de edad, de 16 a 34 años, sufrirán un menor poder adquisitivo respecto a los mayores de 34 años.\n\n---\n\n## Porcentaje de contratos de Jornada completa por edad\n\n```{R}\np3 <- ggplot(contrato, aes(x = Periodo, y = jornada_completa, fill = grupo_edad)) +\n  geom_col(position = \"dodge\") +\n  scale_fill_manual(values = c(\"blue3\", \"red3\"), name = NULL) +\n  theme_economist() +\n  labs(title = \"Contratos de jornada completa según la edad\", x = \"Periodo\", y = \"Porcentaje\", caption = \"Elaboración propia a partir de datos de INE\") \nplotly::ggplotly(p3)\n```\n\n\nAdemás, en este gráfico de barras, podemos apreciar como los contratos a jornada completa han disminuido prácticamente 10 puntos porcentuales desde la Gran Recesión hasta nuestros días, mientras que los de los mayores de 35 años han permanecido estables.\n\nEl hecho de que los contratos no sean a jornada completa, influye de forma decisiva en que la renta final sea menor, ya que a menos horas trabajadas, menos horas cobradas.\n\n---\n\n# Índice del nivel de Precios de la vivienda a nivel nacional\n\nAhora vamos a analizar cómo se han comportado los precios de la vivienda en general. Primero lo vamos a hacer observando el comportamiento de los precios de forma general a nivel nacional. Luego veremos cómo se ha comportado en términos de tasas de variación, y más tarde, el nivel de precios por comunidades autónomas y en diferentes momentos del tiempo.\n\n```{R}\n#Paquetes preliminares\n#install.packages(\"mapSpain\")\nlibrary(mapSpain)\n#install.packages(\"pxR\")\nlibrary(pxR)\n#install.packages(\"tidyverse\")\nlibrary(tidyverse)\nlibrary(data.table)\nlibrary(rlist)\nlibrary(fs)\nlibrary(curl)\nlibrary(rio)\nlibrary(sf)\nlibrary(readxl)\nlibrary(downloader)\nlibrary(writexl)\n#install.packages(\"rlist\")\n# install.packages(\"devtools\")\n#devtools::install_github(\"r-lib/conflicted\")\n#Creamos una carpeta para guardar los datos\n#Descargamos los datos en formato PX desde el Ine\n#Índice de Precios de Vivienda por CCAA: general, vivienda nueva y de segunda mano\n#Como la URL es: \"https://www.ine.es/jaxiT3/files/t/es/px/25171.px?nocab=1\"\nurl <- \"https://www.ine.es/jaxiT3/files/t/es/px/25171.px?nocab=1\"\naa <- read.px(url)\n#Lo convertimos a CSV para simplificar y creamos un dataframe\nwrite.csv(aa, file = \"./datos_pulidos/data.csv\", sep = \",\")\n#Lo convertimos a CSV para simplificar y creamos un dataframe\nwrite.csv(aa, file = \"./datos_pulidos/data.csv\")\ndf <- read.csv(\"./datos_pulidos/data.csv\")\n#Ahora nos ponemos a curra un poquito:\nlibrary(ggthemes)\n#install.packages(\"plotly\")\nlibrary(plotly)\n#install.packages(\"ggExtra\")\nlibrary(ggExtra)\nlibrary(patchwork)\n#Os voy a matar con este código y esta sintaxis que me hacéis arreglar cada vez\ndf1 <- df %>% dplyr::rename(ámbito = Comunidades.y.Ciudades.Autónomas, tipo = \n                              General..vivienda.nueva.y.de.segunda.mano, Valor = value) %>% filter (tipo == \"General\", Índices.y.tasas == \"Índice\", ámbito == \"Nacional\")\n#rm (list = ls())\ndf1.1 <- df %>% rename(Territorio = Comunidades.y.Ciudades.Autónomas, tipo = General..vivienda.nueva.y.de.segunda.mano, Valor = value)\n\ndf1.2 <- df1.1 %>% mutate(Territorio = case_when( \n  Territorio == \"01 Andalucía\" ~ \"Andalucía\",\n  Territorio == \"02 Aragón\" ~ \"Aragón\",\n  Territorio == \"03 Asturias, Principado de\" ~ \"Asturias, Principado de\",\n  Territorio == \"04 Balears, Illes\" ~ \"Balears, Illes\",\n  Territorio == \"05 Canarias\" ~ \"Canarias\",\n  Territorio == \"06 Cantabria\" ~ \"Cantabria\",\n  Territorio == \"07 Castilla y León\" ~ \"Castilla y León\",\n  Territorio == \"08 Castilla - La Mancha\" ~ \"Castilla-La Mancha\",\n  Territorio == \"09 Cataluña\" ~ \"Cataluña\",\n  Territorio == \"10 Comunitat Valenciana\" ~ \"Comunitat Valenciana\",\n  Territorio == \"11 Extremadura\" ~ \"Extremadura\",\n  Territorio == \"12 Galicia\" ~ \"Galicia\",\n  Territorio == \"13 Madrid, Comunidad de\" ~ \"Madrid, Comunidad de\",\n  Territorio == \"14 Murcia, Región de\" ~ \"Murcia, Región de\",\n  Territorio == \"15 Navarra, Comunidad Foral de\" ~ \"Navarra, Comunidad Foral de\",\n  Territorio == \"16 País Vasco\" ~ \"País Vasco\",\n  Territorio == \"17 Rioja, La\" ~ \"Rioja, La\", \n  TRUE ~ Territorio))\n\ndf3 <- df1.2 %>% filter (tipo == \"General\", Índices.y.tasas == \"Índice\", !(Territorio %in% c(\"Nacional\", \"18 Ceuta\", \"19 Melilla\")))\nprov <- pjpv.curso.R.2022::LAU2_prov_2020_canarias\nccaa <- prov %>%\n  group_by(ine_ccaa, ine_ccaa.n, ine_ccaa.n.pjp) %>%\n  summarise() %>% ungroup()\n\nccaa <- ccaa %>% rename(Territorio = ine_ccaa.n)\ndf4 <- df3 %>% filter(Periodo == \"2023T3\")\ndf5 <- full_join(ccaa, df4, by = \"Territorio\") %>% filter( !(Territorio %in% c(\"Ceuta\", \"Melilla\")))\ndf6 <- df3 %>% \n  filter(Periodo == \"2018T3\")\ndf7 <- full_join(ccaa, df6, by = \"Territorio\") %>% filter( !(Territorio %in% c(\"Ceuta\", \"Melilla\")))\ndf8 <- df3 %>% filter(Periodo == \"2015T3\")\ndf9 <- full_join(ccaa, df8, by = \"Territorio\") %>% filter( !(Territorio %in% c(\"Ceuta\", \"Melilla\")))\ndf10 <- df3 %>% filter(Periodo == \"2011T3\")\ndf11 <- full_join(ccaa, df10, by = \"Territorio\") %>% filter( !(Territorio %in% c(\"Ceuta\", \"Melilla\")))\ndf12 <- df3 %>% filter(Periodo == \"2013T3\")\ndf13 <- full_join(ccaa, df12, by = \"Territorio\") %>% filter( !(Territorio %in% c(\"Ceuta\", \"Melilla\")))\ndf14 <- df3 %>% filter(Periodo == \"2007T3\")\ndf15 <- full_join(ccaa, df14, by = \"Territorio\") %>% filter( !(Territorio %in% c(\"Ceuta\", \"Melilla\")))\n\nlibrary(patchwork)\nescala_limites <- c(90, 190)\n\np4 <- ggplot(df5, aes(fill = Valor)) +\n  geom_sf() +\n  geom_sf_label(aes(label = as.character(Valor)), size = 3, color = \"black\") +\n  scale_fill_viridis_c(guide = \"legend\",limits = escala_limites) +\n  labs(title = \"Precios vivienda CCAA 2023T3 (100 = 2015)\",caption = \"Elaboración propia a partir de datos extraídos de INE\") +\n  theme_void() \n\np7 <- ggplot(df13, aes(fill = Valor)) +\n  geom_sf() +\n  geom_sf_label(aes(label = as.character(Valor)), size = 3, color = \"white\") +\n  scale_fill_viridis_c(guide = \"legend\",limits = escala_limites) +\n  labs(title = \"Precios vivienda CCAA 2013T3 (100 = 2015)\",caption = \"Elaboración propia a partir de datos extraídos de INE\") +\n  theme_void() \n\np9 <- ggplot(df15, aes(fill = Valor)) +\n  geom_sf() +\n  geom_sf_label(aes(label = as.character(Valor)), size = 3, color = \"black\") +\n  scale_fill_viridis_c(guide = \"legend\",limits = escala_limites) +\n  labs(title = \"Precios vivienda CCAA 20071T3 (100 = 2015)\",caption = \"Elaboración propia a partir de datos extraídos de INE\") +\n  theme_void() \n# Combinar los dos gráficos\np9\n\np7\n\np4\n\n```\n\nEstos mapas de coropletas reflejan los niveles de precios de la vivienda en 6 momentos diferentes del tiempo. El primero es del tercer trimestre del año 2007. En ese momento los precios, como podemos observar, son los más altos. Este es el punto más elevado de la burbuja. Los años siguientes reflejan el pinchazo de la burbuja, con un descenso continuado de los precios hasta 2013. Que es el punto más bajo. Hemos decidido poner el año 2015 por ser el año de la base 100. A partir de ahí, vemos cómo en los años posteriores los precios son ya más elevados que en 2015, y particularmente en 2023, ligeramente por\ndebajo, pero sin haber una burbuja. O, al menos, no parece haberla.\n\nAl ser mapas de coropletas podemos sacar conclusiones acerca de en qué comunidades han aumentado más los precios y por tanto, dónde es más difícil acceder a la vivienda, ceteris paribus. En el último gráfico destacan claramente la Comunidad de Madrid, Cataluña y Baleares. Esto no nos sorprende, tanto la Comunidad de Madrid, como Cataluña son regiones muy dinámicas donde, además, se encuentran las principales ciudades de España. Baleares, por su parte, es una de las regiones más turísticas, donde la oferta de inmuebles tampoco es demasiado elevada. Destacan también en segunda fila País Vasco (región muy dinámica), Andalucía y Canarias (regiones muy turísticas).\n\nTal vez os habéis fijado en que estos mapas no concuerdan exactamente con lo que hemos visto hace dos gráficos (se veía que el nivel general de precios de la vivienda es ahora igual al del punto más alto de la burbuja y, sin embargo, en los mapas parece que en 2007T3 los precios son mucho más elevados que en la actualidad).\n\nEsto se debe a que hay más viviendas allá donde más está subiendo el precio como se observa en el gráfico (que hay que insertar). La explicación de la afirmación anterior que parece a priori contradictoria, es que aunque hay más vivienda en esta zona (oferta elevada), la demanda es todavía más elevada que la oferta.\n\n\n---\n \n# Régimen de viviendas de 16 a 29 años\n\n```{R}\n#Hogares por regimen de tenencia edad\n#Cargamos liberías\nlibrary(ggplot2)\nlibrary(hrbrthemes)\nlibrary(tidyverse)\nlibrary(pxR)\n\nurl4 <- \"https://www.ine.es/jaxiT3/files/t/es/px/9994.px?nocab=1\"\nac <- read.px(url4)\nwrite.csv(ac, file = \"./datos_pulidos/data_1.csv\", sep = \",\")\nvivienda_edad <- read.csv(\"./datos_pulidos/data_1.csv\")\n\ndd <- vivienda_edad %>%\n  dplyr::rename(regimen = Régimen.de.tenencia.de.la.vivienda.principal, edad = Edad.de.la.persona.de.referencia, sexo = Sexo.de.la.persona.de.referencia) %>%\n  filter(edad == \"De 16 a 29 años\", sexo == \"Ambos sexos\")\n\np30 <- dd %>%\n  ggplot(aes(x = Periodo, y = value, fill = regimen)) +\n  geom_bar(stat = \"identity\", position = \"stack\") +\n  theme_ipsum() +\n  labs(x = \"Año\", y = \"% según régimen de tenencia\", \n       title = \"Régimen de vivienda de 16 a 29 años\",\n       subtitle = \"Datos porcentuales\",\n       caption = \"Elaboración propia a partir de datos del INE\") +\n  scale_fill_manual(values = c(\"#66c2a5\", \"#fc8d62\", \"#8da0cb\", \"#e78ac3\"), \n                    labels = c(\"Alquiler a precios de mercado\", \"Alquiler inferior al precio de mercado\", \"Cesión\", \"Propiedad\")) +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1), \n        plot.caption = element_text(hjust = 0.5),\n        plot.title = element_text(hjust = 0.5, color = \"black\", size = 18, face = \"bold\"),\n        plot.subtitle = element_text(hjust = 0.5, size = 14))\n  \n\np30\n```\n\nEn este gráfico podemos observar cómo el régimen de vivienda entre los jóvenes ha ido variando a lo largo del tiempo. La mayor sustitución ha sido de régimen de propiedad al de alquiler a precios de mercado. También ha aumentado ligeramente el régimen de cesión, es decir; los jóvenes se han trasladado a opciones más asequibles. Aunque los alquileres también suben en las grandes ciudades, siguen siendo opciones más asumibles que pagar la entrada de la hipoteca y su mensualidad, por no hablar de fórmulas utilizadas como el compartir piso.\n\n---\n\n# Otros gráficos bonitos pero poco útiles sobre el salario\n\n::: {.panel-tabset}\n\n# Rigeline por grupo de edad\n\n```{R}\nlibrary(tidyverse)\nlibrary(rio)\nlibrary(ggplot2)\nlibrary(ggridges)\n\ndf_edad <- import(\"./datos_pulidos/salario_grupo_edad.csv\")\n\np1<- ggplot(df_edad, aes(x = salario, y = grupo_edad, fill = grupo_edad)) +\n  geom_density_ridges() +\n  theme_ridges() + \n  theme(legend.position = \"none\")\n\np1\n```\n\n# Barras agrupadas por edad\n\n```{R}\nlibrary(tidyverse)\nlibrary(rio)\nlibrary(ggplot2)\nlibrary(ggridges)\n\ndf_edad <- import(\"./datos_pulidos/salario_grupo_edad.csv\")\n\ndf_edad_01 <- df_edad |> \n  filter(grupo_edad != \"Total\") |> \n  filter()\n\ndf_edad_01$year <- factor(df_edad_01$year)\n\np2 <- ggplot(df_edad_01, aes(fill = grupo_edad, y = salario, x = year))+\n  geom_bar(position = \"dodge\", stat = \"identity\")+\n  labs(title = \"Salario por grupo de edad\", caption = \"Elaboración propia a partir de datos extraídos de INE\")\n\np2\n```\n\n:::\n\n--- \n\n# Conclusiones:\n\nCon este trabajo hemos podido comprobar la situación precaria en la que se encuentran los jóvenes a la hora de acceder a la vivienda: salarios bajos, tasa de paro muy por encima del resto de las edades, pobreza relativa creciente, niveles de precios de la vivienda astronómicos…\nSi bien no hemos ahondado en las causas de esta situación ni en posibles soluciones, hemos querido al menos señalar de forma clara la situación. Nos afecta directamente y por ello creemos que es algo a lo que, por lo menos, deberíamos prestar atención. \n\nAdemás este tema está de actualidad en la academia por el lanzamiento del libro “La juventud atracada” de Ignacio Conde-Ruiz. En él se repasa lo visto en este trabajo además de la problemática con las pensiones y ahonda más en causas, consecuencias y soluciones. El propio Ignacio dio una charla en la UV hace unas semanas. Os adjuntamos una entrevista que hizo con el también economista Juan Ramón Rallo, en la que habla extensamente de su libro y su contenido.\n\n# Mas información sobre el tema\n\n<center><iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/live/EtIErMd1EYM?si=-LNzHLRcepGHZ-r5\"></iframe></center>\n\n\n","srcMarkdownNoYaml":"\n\n# Introducción \n\nEl objetivo de este trabajo es analizar la situación en la que se encuentran los jóvenes a la hora de acceder al mercado laboral. Para ello analizaremos diferentes métricas entre las que se encuentran: Evolución de los niveles de precios de la vivienda a nivel nacional y autonómico, comparación de esta con la de los salarios reales…\n\nDe esta manera constataremos las dificultades a alas que se enfrentan los jóvenes españoles para emanciparse. También extraeremos conclusiones sobre si es así en todo el país o si por el contrario hay diferencias según el área geográfica. \n\n# Datos del trabajo\n\n::: {.panel-tabset}\n\n# Datos\n\nVamos a utilizar datos de los paquetes `pxR` <i>(ine)</I>, `eurostat` además de proveedores de datos externos.\n\n# Código\n\n```{R}\n#Paquetes Preliminares\nlibrary(pxR)\nlibrary(tidyverse)\nlibrary(data.table)\nlibrary(rlist)\nlibrary(fs)\nlibrary(curl)\nlibrary(rio)\nlibrary(readxl)\nlibrary(downloader)\nlibrary(writexl)\n\n#-------------------Creamos una carpeta para guardar los datos------------------\n\ndir_create(\"./docs/datos\")\n\n#Descargamos los datos y los exportamos sin pulir: \n\n#---------------------Índice de Precios de Vivienda-----------------------------\n\nurl <- \"https://www.ine.es/jaxiT3/files/t/es/px/25171.px?nocab=1\"\naa <- read.px(url)\n\n#Lo convertimos a CSV para simplificar y creamos un dataframe\n\nwrite.csv(aa, file = \"data.csv\", sep = \",\")\nIPV <- read.csv(\"data.csv\")\nrm(list = ls()[!ls() %in% c(\"IPV\")])\n\n#Los guardamos sin arreglar\nwrite.csv(IPV,  file = \"./docs/datos/ipv.csv\")\n#-------------------------Compra-venta de vivienda------------------------------\n\nruta_xls <- \"https://apps.fomento.gob.es/BoletinOnline2/sedal/34010110.XLS\"\n\ndownload.file(ruta_xls, \"datos.xls\", mode = \"wb\")\n\nnombres_hojas <- c(\"2004,2005,2006,2007,2008\", \"2009,2010,2011,2012,2013\", \n                   \"2014,2015,2016,2017,2018\", \"2019,2020,2021,2022,2023\")\n# Leer todas las hojas en una lista\nfor (i in seq_along(nombres_hojas)) {\n  hoja <- nombres_hojas[i]\n  df <- readxl::read_excel(\"datos.xls\", sheet = i) \n  write.csv(df, file = paste0(hoja, \".csv\"), row.names = FALSE)}\n\n#Juntamos las cuatro sheets en una y después arreglaremos el desastre\ncompraventa_2004 <- read.csv(\"2004,2005,2006,2007,2008.csv\")\ncompraventa_2009 <- read.csv(\"2009,2010,2011,2012,2013.csv\")\ncompraventa_2014 <- read.csv(\"2014,2015,2016,2017,2018.csv\")\ncompraventa_2019 <- read.csv(\"2019,2020,2021,2022,2023.csv\")\n\ncv <- bind_cols(compraventa_2009,compraventa_2014)\ncv <- bind_cols(cv,compraventa_2019)\ncompraventa_2004 <- compraventa_2004[1:nrow(cv), ]\ncv <- bind_cols(cv,compraventa_2004)\n\n\ncv <- cv %>%\n  filter(row_number() %in% 6:72)\ncv <- cv %>%\n  filter(!row_number() %in% 2)\n\n#Los guardamos sin arreglar\nwrite.csv(cv,  file = \"./docs/datos/cv.csv\")\nrm(list = ls())\n\n\n#--------------------------Renta por edad y sexo--------------------------------\n\nurl3 <- \"https://www.ine.es/jaxiT3/files/t/es/px/9942.px?nocab=1\"\naa <- read.px(url3)\n\n#Lo convertimos a CSV para simplificar y creamos un dataframe\n\nwrite.csv(aa, file = \"data.csv\", sep = \",\")\nrenta_edad <- read.csv(\"data.csv\")\n\n#Los guardamos sin arreglar\nwrite.csv(renta_edad, file = \"./docs/datos/renta_edad.csv\")\n\nrm(list = ls())\n#---------------------------Renta por nacionalidad------------------------------\n\nurl4 <- \"https://www.ine.es/jaxiT3/files/t/es/px/9945.px?nocab=1\"\naa <- read.px(url4)\n\n#Lo convertimos a CSV para simplificar y creamos un dataframe\n\nwrite.csv(aa, file = \"data.csv\", sep = \",\")\nrenta_nacionalidad <- read.csv(\"data.csv\")\n\n#Los guardamos sin arreglar\nwrite.csv(renta_nacionalidad, file = \"./docs/datos/renta_nacionalidad.csv\")\n\nrm(list = ls())\n\n\n#---------------------Hogares por regimen de tenencia edad----------------------\n\nurl4 <- \"https://www.ine.es/jaxiT3/files/t/es/px/9994.px?nocab=1\"\naa <- read.px(url4)\n\n#Lo convertimos a CSV para simplificar y creamos un dataframe\n\nwrite.csv(aa, file = \"data.csv\", sep = \",\")\nvivienda_edad <- read.csv(\"data.csv\")\n\n#Los guardamos sin arreglar\nwrite.csv(vivienda_edad, file = \"./docs/datos/vivienda_datos.csv\")\n\nrm(list = ls())\n\n#Borramos archivos como las sheets separadas y otros datos\nfile.remove(\"2004,2005,2006,2007,2008.csv\", \"2009,2010,2011,2012,2013.csv\",\n            \"2014,2015,2016,2017,2018.csv\", \"2019,2020,2021,2022,2023.csv\", \n            \"compraventa.csv\", \"data.csv\", \"datos.xls\", \"./docs/datos/25171.px\",\n            \"./docs/datos/34010110.XLS\")\n\n#----------------------Procedemos a limpiar los datos---------------------------\n\n#-------------Creamos una carpeta para guardar los datos pulidos----------------\n\ndir_create(\"./datos_pulidos\")\nlibrary(zoo)\n\n###AHORA LIMPIAMOS LOS DATOS PARA TRABAJAR MEJOR CON ELLOS###\n\n#-------------------Indice de precios de la Vivienda----------------------------\n\ncv <- import(file = \"./docs/datos/cv.csv\")\n\n#Elimino las columnas duplicadas indicando el nombre de la provincia \n#para dejar solo una columna de provincias\n\ncv <- cv[-1,]\ncolnames(cv) <- NULL\ncolumnas_duplicadas <- duplicated(t(cv))\nprint(columnas_duplicadas)\n\ncv <- cv[, !columnas_duplicadas]\ncolnames(cv) <- paste0(\"col_\", 1:ncol(cv))\n#Elimino otra columnaa duplicadaa que el argumento no encuenrtra \n\ncv <- cv[, -62]\n\n#Doy nombre a la posición [1,2] de provincias para después poder trabajar mejor\n#Ya que convertiremos la primera fila en colnames\n\ncv[1,2] <- \"Provincia\"\ncolnames(cv)\n\n#Seleccionamos la primera fila del df y lo convertimos en un vector. Después, \n#Hacemos que los NA se sustituyan por el texto de su izquierda (Remplazamos NA`s\n#por el año al que corresponde esa columnas)\n\ndf <- cv %>%\n  slice(1) %>%\n  unlist()\n\ndf <- na.locf(df)\n\n#Ahora convertimos el vector en la fila 1 que después convrtiremos en colnames\n#para trabajar mejor.\n\ncv[1,] <- df \n\n#Juntamos la fila 1 y 2 a partir de la tercer columna separando el texto con \"_\" \n#y le rellenamos las dos columnas restantes con los nombres que nos vengan mejor \n#para trabajar\naa <- cv[1,]\naa <- c(\"\",\"Provincia\",paste(cv[1,3:ncol(cv)],cv[2,3:ncol(cv)], sep = \"_\"))\n\n#Convertimos el vector aa en colnames\n\ncolnames(cv) = aa\n\n#Quitamos la primera y la segunda fila, es información que ya indica colnames\n\ncv <- cv[-(1:2), -(1)]\ncolnames(cv)\n\n#Hacemos que todas las columnas que indican año_trimestre pivoten y dejen los\n#valores que contenían las transacciones por un lado y el año_trimestre por otro\n\nTransacciones_por_provincia <- cv %>% pivot_longer(cols = starts_with(\"Año\"), \n                                                   names_to = \"Año_Trimestre\", \n                                                   names_prefix = \"Año\", \n                                                   values_to = \"Transacciones\",\n                                                   values_drop_na = TRUE)\n\n#Guardamos en la carpeta(en formato .csv) de datos pulidos y seguimos\n\nwrite.csv(Transacciones_por_provincia, \n          file = \"datos_pulidos/Transacciones_por_povincia.csv\")\n\n#----------------Índice de precios de la vivienda-------------------------------\n\n\nipv <- import(file = \"./docs/datos/ipv.csv\")\n\n#Estos datos están bien, quitamos las dos columnas que no aportan y los guardamos\nipv <- ipv[,-(1:2)]\n\nwrite.csv(ipv, file = \"./datos_pulidos/indice_precio_vivienda.csv\")\n\n#rm(list = ls())\n\n\n#----------------Renta por edad-------------------------------------------------\n\nre <- import(file  = \"./docs/datos/renta_edad.csv\")\n\n#Renombramos las columnas, seleccionamos lo que nos interesa y borramos el restante\n#Exportamos\nre <- re %>%\n  rename(renta = \"value\") %>%\n  select(!c(\"V1\", \"X\"))\n\nwrite.csv(re, file = \"./datos_pulidos/renta_por_edad.csv\")\n\n\n\n\n#----------------Régimen tenencia de vivienda por edad--------------------------\n\nvd <- import(file  = \"./docs/datos/vivienda_datos.csv\")\n\n#Renombramos las columnas, seleccionamos lo que nos interesa y borramos el restante\n#Exportamos\nvd<- vd %>%\n  rename(Porcentaje = \"value\") %>%\n  select(!c(\"V1\", \"X\"))\n\nwrite.csv(vd, file = \"./datos_pulidos/tenencia_de_vivienda.csv\")\nrm(list = ls())\n\n#--------------------IMPORTAR DATOS CE / EUROSTAT-------------------------------\noptions(scipen = 999) #- para quitar la notación científica\n\nlibrary(eurostat) \nlibrary(DT) \nlibrary(tidyverse)\n\ninfo <- search_eurostat(\"GDP\", type = \"all\")\nmy_table <-\"sdg_08_10\"\n\n#Comprobamos que es el PIB pc\nlabel_eurostat_tables(my_table)\n\ndf_original <- get_eurostat(my_table, time_format = 'raw', keepFlags = TRUE)\ndf_names <- names(df_original)\ndf_original <- label_eurostat(df_original, code = df_names, fix_duplicated = TRUE)\n\n#Creamos otro df para trabajor con él \n\ndf <- df_original\n\n#Ver que hay en el df\ndf_aa <- pjpv.curso.R.2022::pjp_dicc(df)\ndf_bb <- pjpv.curso.R.2022::pjp_valores_unicos(df, nn = 400)\n\n#Vamos a hacer un poco de limpieza\nobj_buenos <- c(\"df\", \"df_original\", \"df_bb\")\nrm(list = setdiff(ls(), obj_buenos))\n\n#Vamos a seguir arreglando el df\n\ndf <- df |> \n  rename(year = time_code) |> \n  rename(PIB_pc = values) |> \n  rename(country = geo)\n\n#Chain linked volumes (2010), euro per capita\n#Solo queremos el PIB_pc\ndf <- df |> \n  filter(unit == \"Chain linked volumes (2010), euro per capita\")\n\n#Eliminamos todo lo que nos molesta a la vista \ndf <- df |> \n  select(-c(unit_code, values_code, unit, time, na_item_code, na_item, flags))\n\ndf <- df |>  mutate(year =  as.numeric(year))\n\ndf <- df |>  mutate(iso_2_code =  eurostat::harmonize_country_code(geo_code))\n\ndf <- df |> \n  select(-c(geo_code, flags_code))\n\n\nlibrary(fs)\ndir_create(\"datos_pulidos\")\n\n#A continuación vamos a exportar los datos para luego importarlas más fácilmente #library(rio)\n\nexport(df, \"./datos_pulidos/PIB_pc.csv\", type = \"csv\")\n#---------------DATOS SOBRE EL SALARIO POR NIVEL DE FORMACIÓN-------------------\n\nlibrary(rio)\nlibrary(tidyverse)\nurl <- \"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/13931.csv?nocab=1\"\ndf_ine <- import(url)\ndf_ine_01 <- df_ine |> \n  filter(Decil %in% (\"Total decil\")) |> \n  select(\"Periodo\", \"Tipo de jornada\", \"NIVELES DE FORMACION\", \"Total\") |> \n  rename(year = Periodo) |> \n  rename(jornada = 'Tipo de jornada') |> \n  rename(formacion = 'NIVELES DE FORMACION') |>\n  rename(salario = Total)\n\n#VAMOS A CONVERTIR LA VARIABLE salario A NUMERIC\n\n#R y el INE me han jodiedo la vida para pasar esto a numeric (antes no funcionaba)\ndf_ine_01 <- df_ine_01 |> \n  mutate(salario = as.numeric(gsub(\",\", \".\", gsub(\"\\\\.\", \"\", salario))))\n\nexport(df_ine_01,\"./datos_pulidos/salario_formacion.csv\", type = \"csv\")\n\n#salarios por edades\nurl_1 <- \"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/13928.csv?nocab=1\"\ndf_ine_x1 <- import(url_1)\n\ndf_ine_02 <- df_ine_x1 |> \n  filter(Decil %in% (\"Total decil\")) |>\n  select(\"Periodo\", \"Tipo de jornada\", \"Grupo de edad\", \"Total\") |> \n  rename(year = Periodo) |> \n  rename(jornada = 'Tipo de jornada') |> \n  rename(grupo_edad = 'Grupo de edad') |>\n  rename(salario = Total)\n\n#PASAMOS A NUMERIC\ndf_ine_02 <- df_ine_02 |> \n  mutate(salario = as.numeric(gsub(\",\", \".\", gsub(\"\\\\.\", \"\", salario))))\n\nexport(df_ine_02,\"./datos_pulidos/salario_grupo_edad.csv\", type = \"csv\")\n#Datos sobre el IPC\n\nurl_2 <- \"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/50908.csv?nocab=1\"\ndf_ipc <- import(url_2)\n\ndf_ipc_01 <- df_ipc |> \n  filter(`Grupos ECOICOP` %in% c(\"Índice general\", \"04 Vivienda, agua, electricidad, gas y otros combustibles\")) |> \n  select(\"Periodo\", \"Grupos ECOICOP\", \"Tipo de dato\", \"Total\") |> \n  rename(year = Periodo) |>\n  rename(grupo = 'Grupos ECOICOP') |> \n  rename(tipo_dato = `Tipo de dato` ) \n\n#PASAMOS A NUMERIC\ndf_ipc_01 <- df_ipc_01 |> \n  mutate(Total = as.numeric(gsub(\",\", \".\", gsub(\"\\\\.\", \"\", Total))))\n\n#PARA SEPARAR EN LA VARIABLE YEAR LOS DATOS POR AÑOS Y MESES\n#df_sep <- df_ipc_01 |> \n#  separate(col = year, into = c(\"year\", \"month\"), sep = \"M\")\n\n#df_sep <- df_sep |> \n#  mutate(month = paste0(\"M\", month))\n\nexport(df_ipc_01, \"./datos_pulidos/IPC_mas_vivienda.csv\", type = \"csv\")\n\n#Por tipo de jornada\ndf_temporal <- import(\"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/10894.csv?nocab=1\")\ndf_contrato <- import(\"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/4854.csv?nocab=1\")\ndf_contrato <- df_contrato %>%\nfilter(Sexo %in% \"Ambos sexos\")\nwrite.csv(df_temporal, file= \"./datos_pulidos/temporalidad_edad.csv\")\nwrite.csv(df_contrato, file = \"./datos_pulidos/contrato_edad.csv\")\n\n#-------------------------Paro-----------------------------------\ndf_activos <- import(\"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/4049.csv?nocab=1\")\ndf_parados <- import(\"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/4084.csv?nocab=1\")\ndf_activos <- df_activos %>%\nfilter(Sexo %in% \"Ambos sexos\") %>%\nfilter(Unidad %in% \"Valor absoluto\")\ndf_parados <- df_parados %>%\nfilter(Sexo %in% \"Ambos sexos\") %>%\nfilter(Unidad %in% \"Valor absoluto\")\n\n#Saúl\n#-------------------------Por tipo de jornada-----------------------------------\n\ndf_temporal <- import(\"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/10894.csv?nocab=1\")\ndf_contrato <- import(\"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/4854.csv?nocab=1\")\n\ndf_contrato <- df_contrato %>%\n  filter(Sexo %in% \"Ambos sexos\")\n\n\n\nwrite.csv(df_temporal, file= \"./datos_pulidos/temporalidad_edad.csv\")\nwrite.csv(df_contrato, file = \"./datos_pulidos/contrato_edad.csv\")\n\n#Saúl\n#-------------------------Paro-----------------------------------\n\n\ndf_activos <- import(\"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/4049.csv?nocab=1\")\ndf_parados <- import(\"https://www.ine.es/jaxiT3/files/t/es/csv_bdsc/4084.csv?nocab=1\")\n\n\ndf_activos <- df_activos %>%\n  filter(Sexo %in% \"Ambos sexos\") %>%\n  filter(Unidad %in% \"Valor absoluto\")\n\n\ndf_parados <- df_parados %>%\n  filter(Sexo %in% \"Ambos sexos\") %>%\n  filter(Unidad %in% \"Valor absoluto\")\n\nexport(df_activos, file = \"./datos_pulidos/activos.csv\", format=\"csv\")\nexport(df_parados, file = \"./datos_pulidos/parados.csv\", format=\"csv\")\n\n```\n\n:::\n\n---\n\n# Evolución de la renta neta por edad\n\nIniciaremos analizando los datos de renta según la edad (como pueden imaginar, los jóvenes constituyen el grupo poblacional que dispone de menos renta), para, a continuación, adentrarnos en datos que muestran la evolución de los precios de la vivienda.\n\n\n::: {.panel-tabset}\n\n# Gráfico en movimiento\n\n```{R}\n#Cargamos datos\nlibrary(rio)\nlibrary(tidyverse)\nlibrary(gganimate)\nlibrary(ggthemes)\nlibrary(hrbrthemes)\n\n#-\n\nrenta_edad <- read.csv(\"./datos_pulidos/renta_por_edad.csv\")\n\ndff  <- renta_edad %>% rename(tipo = Renta.anual.neta.media.por.persona.y.por.unidad.de.consumo) %>% filter(tipo == \"Renta neta media por persona\", Sexo == \"Ambos sexos\", !(Edad %in% c(\"De 18 a 64 años\", \"Menos de 18 años\", \"Total\")))\n\np <- ggplot(dff, aes(x = Periodo, y = renta, color = Edad)) +\n  geom_line(size = 1) +\n  labs(title = \"Evolución de la renta neta media por edad\", subtitle = \"(Euros corrientes)\",\n       x = \"Año\", y = \"Renta neta\", caption = \"Elaboración propia a partir de datos de INE\") +\n  theme_ipsum() + \n  theme(legend.position = \"bottom\",\n        panel.grid.major = element_line(colour = \"gray87\", linetype = \"dashed\"),\n        panel.background = element_rect(fill = \"aliceblue\"),\n        panel.grid.minor = element_blank(),\n        axis.text = element_text(family = \"serif\", size = 9, colour = \"gray17\")) + scale_color_manual(values = c(\"green4\", \"black\", \"blue\", \"red\", \"orange\")) +\n  geom_text(aes(label = Edad), nudge_x = 0.5, nudge_y = 0.5, hjust = 0)\n\np_animated <- p + transition_reveal(Periodo) +\n  enter_fade() + \n  exit_fade()\n\nanimate(p_animated, nframes = 200, fps = 20)\n\n```\n\n# Gráfico fijo interactivo\n\n```{R}\nlibrary(rio)\nlibrary(tidyverse)\nlibrary(gganimate)\nlibrary(ggthemes)\nlibrary(hrbrthemes)\n\nrenta_edad <- read.csv(\"./datos_pulidos/renta_por_edad.csv\")\n\ndff  <- renta_edad %>% rename(tipo = Renta.anual.neta.media.por.persona.y.por.unidad.de.consumo) %>% filter(tipo == \"Renta neta media por persona\", Sexo == \"Ambos sexos\", !(Edad %in% c(\"De 18 a 64 años\", \"Menos de 18 años\", \"Total\")))\n\np6 <- ggplot(data=dff) +\n  geom_line(aes(x = Periodo, y = renta, color = Edad, group = Edad)) +labs (title = \"Evolución de la renta neta media por edad\", subtitle = \"(En euros corrientes)\", y = \"Renta\", x = \"Año\") + theme_ipsum()\n\nplotly::ggplotly(p6)\n```\n\n:::\n\nTenemos este primer gráfico dinámico, que básicamente lo hemos hecho para demostrar que lo podemos hacer. Sabemos que no es especialmente útil, pero sí vistoso, por eso hemos hecho esta presión interactiva pero estática del mismo gráfico, para un mejor análisis acceded al fijo interactivo.\n\nEn este gráfico, cuyos datos están extraídos del INE podemos observar, como ya anticipábamos, que los jóvenes (16-29 años de edad) son el rango de edad que dispone de menos renta. Más notorio es, claro está, con los menores de 16 años. Los jóvenes de 16 a 29 años contaban con una renta media neta o disponible (después de impuestos) de 11.660€.\n\n- La diferencia con el grupo de 30 a 44 años ha pasado de un 6’38% en 2008 a 10’13% en 2022. Un incremento de un 58’78%.\n\n- Con el grupo de 45 a 64 años del 16’86% mencionado arriba a un 18’03%. Un incremento de un 6’94%.\n\n- La mayor divergencia se da con el grupo de los mayores de 65 años. De una diferencia del 6’03% en 2008 a una del 21% en 2022. Un espectacular incremento del 248’23%.\n\nPor tanto, la renta de lo jóvenes de entre 16 y 29 años es la que menos ha crecido: tan solo un 12’97% en 14 años.\n\nComo podemos observar, no sólo es que los jóvenes tengan una renta disponible menor, si no que cada vez se queda más atrás respecto al resto. Los jóvenes, en términos de renta, son cada vez relativamente más pobres.\n\n---\n\n## Porcentaje de parados según la edad\n\n```{R}\n\n#Paquetes\nlibrary(reshape2)\nlibrary(tidyverse)\nlibrary(car) # regression analysis\nlibrary(plotly)\nlibrary(ggplot2)\nlibrary(gganimate)\nlibrary(xts)\nlibrary(dygraphs)\nlibrary(gifski)\nlibrary(ggthemes)\n#rm(list = ls())\n#Df`s\n#---------------------Tipo de contrato------------------------------------------\ndf_contrato <- read.csv(\"./datos_pulidos/contrato_edad.csv\")\n#----------------------Arreglamos-----------------------------------------------\nhead(df_contrato)\ndf_contrato <- df_contrato %>%\nmutate(Total = gsub(\"\\\\.\", \"\", Total))\ndf_contrato <- df_contrato %>%\nmutate(Total = as.numeric(gsub(\",\", \".\", Total)))\nhead(df_contrato)\ndf_contrato <- df_contrato %>%\nfilter(Tipo.de.jornada %in% c(\"Jornada a tiempo completo\", \"Jornada a tiempo parcial\")) %>%\nfilter(Tipo.de.dato %in% \"Porcentaje\")\ndf_contrato_pivot <- df_contrato %>%\npivot_wider(names_from = \"Tipo.de.jornada\", values_from = \"Total\")\ndf_contrato_pivot <- df_contrato_pivot[,-(1:2)]\nde16a34 <- df_contrato_pivot %>%\nfilter(Edad %in% c(\"De 25 a 29 años\", \"De 16 a 19 años\", \"De 20 a 24 años\", \"De 30 a 34\naños\"))\ncolumna <- rep(\"De 16 a 34 años\", times = 17)\nde16a34 <- de16a34 %>%\nmutate_all(~replace(., is.na(.), 0))\n##\nde16a34 <- de16a34 %>%\ngroup_by(Periodo) %>%\nsummarise(tiempo_completo = sum(`Jornada a tiempo completo`)/4,\ntiempo_parcial = sum(`Jornada a tiempo parcial`)/4) %>%\nmutate(Edad = columna)\nmas35 <- df_contrato_pivot %>%\nfilter(Edad %in% c(\"70 y más años\", \"De 35 a 39 años\", \"De 40 a 44 años\", \"De 45 a 49\naños\", \"De 50 a 54 años\", \"De 55 a 59 años\", \"De 60 a 64 años\", \"De 65 a 69 años\"))\ncolumna <- rep(\"Mayores de 35\", times = 17)\nmas35 <- mas35 %>%\nmutate_all(~replace(., is.na(.), 0))\nmas35 <- mas35 %>%\ngroup_by(Periodo) %>%\nsummarise(tiempo_completo = sum(`Jornada a tiempo completo`)/8,\ntiempo_parcial = sum(`Jornada a tiempo parcial`)/8) %>%\nmutate(Edad = columna)\ncontrato <- rbind(mas35, de16a34)\nrm(list = ls()[!ls() %in% c(\"salario\",\"contrato\")])\n##-------------------------Póblación Activa----------------------------------------------\ndf_activos <- read.csv(\"./datos_pulidos/activos.csv\")\n##-------------------------Arreglamos-----------------------------------------------------\nhead(df_activos)\ndf_activos <- df_activos %>%\nmutate(Total = gsub(\"\\\\.\", \"\", Total))\ndf_activos <- df_activos %>%\nmutate(Total = as.numeric(gsub(\",\", \".\", Total)))\nhead(df_activos)\nmenos35 <- df_activos %>%\nfilter(Edad %in% c(\"De 25 a 29 años\", \"De 16 a 19 años\", \"De 20 a 24 años\", \"De 30 a 34\naños\"))\nhead(menos35)\nmenos35 <- menos35 %>%\nmutate(Año = substr(Periodo, 1, 4)) %>%\ngroup_by(Edad, Sexo, Unidad, Año) %>%\nsummarise(Total = sum(Total)/4)\nmenos35 <- menos35[,-(2:3)]\ncolumna <- rep(\"De 16 a 34 años\", times = 22)\nmenos35 <- menos35 %>%\ngroup_by(Año) %>%\nsummarise(total = sum(Total)) %>%\nmutate(grupo_edad = columna) %>%\nfilter(!Año %in% c(\"2023\")) %>%\nrename(num_activos = \"total\")\nmas35 <- df_activos %>%\nfilter(Edad %in% c(\"70 y más años\", \"De 35 a 39 años\", \"De 40 a 44 años\", \"De 45 a 49\naños\", \"De 50 a 54 años\", \"De 55 a 59 años\", \"De 60 a 64 años\", \"De 65 a 69 años\"))\nmas35 <- mas35 %>%\nmutate(Año = substr(Periodo, 1, 4)) %>%\ngroup_by(Edad, Sexo, Unidad, Año) %>%\nsummarise(Total = sum(Total)/4)\nmas35 <- mas35[,-(2:3)]\ncolumna <- rep(\"Mayores de 35\", times = 22)\nmas35 <- mas35 %>%\ngroup_by(Año) %>%\nsummarise(total = sum(Total)) %>%\nmutate(grupo_edad = columna) %>%\nfilter(!Año %in% c(\"2023\")) %>%\nrename(num_activos = \"total\")\nactivos <- rbind(mas35, menos35)\nrm(list = ls()[!ls() %in% c(\"salario\",\"contrato\", \"activos\")])\n##-----------------------------Póblación parada---------------------------------\ndf_parados <- read.csv(\"./datos_pulidos/parados.csv\")\n##-----------------------------Arreglamos y sacamos la población ocupada--------\nhead(df_parados)\ndf_parados <- df_parados %>%\nmutate(Total = gsub(\"\\\\.\", \"\", Total))\ndf_parados <- df_parados %>%\nmutate(Total = as.numeric(gsub(\",\", \".\", Total)))\nhead(df_parados)\nmenos35 <- df_parados %>%\nfilter(Edad %in% c(\"De 25 a 29 años\", \"De 16 a 19 años\", \"De 20 a 24 años\", \"De 30 a 34\naños\"))\nhead(menos35)\nmenos35 <- menos35 %>%\nmutate(Año = substr(Periodo, 1, 4)) %>%\ngroup_by(Edad, Sexo, Unidad, Año) %>%\nsummarise(Total = sum(Total)/4)\nmenos35 <- menos35[,-(2:3)]\ncolumna <- rep(\"De 16 a 34 años\", times = 22)\nmenos35 <- menos35 %>%\ngroup_by(Año) %>%\nsummarise(total = sum(Total)) %>%\nmutate(grupo_edad = columna) %>%\nfilter(!Año %in% c(\"2023\")) %>%\nrename(num_parados = \"total\")\nmas35 <- df_parados %>%\nfilter(Edad %in% c(\"70 y más años\", \"De 35 a 39 años\", \"De 40 a 44 años\", \"De 45 a 49\naños\", \"De 50 a 54 años\", \"De 55 a 59 años\", \"De 60 a 64 años\", \"De 65 a 69 años\"))\nmas35 <- mas35 %>%\nmutate(Año = substr(Periodo, 1, 4)) %>%\ngroup_by(Edad, Sexo, Unidad, Año) %>%\nsummarise(Total = sum(Total)/4) %>%\nmutate_all(~replace(., is.na(.), 0))\nmas35 <- mas35[,-(2:3)]\ncolumna <- rep(\"Mayores de 35\", times = 22)\nmas35 <- mas35 %>%\ngroup_by(Año) %>%\nsummarise(total = sum(Total)) %>%\nmutate(grupo_edad = columna) %>%\nfilter(!Año %in% c(\"2023\")) %>%\nrename(num_parados = \"total\")\nparados <- rbind(mas35, menos35)\nrm(list = ls()[!ls() %in% c(\"salario\",\"contrato\", \"activos\", \"parados\")])\nact_parad <- merge(parados, activos, by = c(\"Año\", \"grupo_edad\"))\nact_parad <- act_parad %>%\nmutate(num_ocupados = num_activos - num_parados)\nrm(list = ls()[!ls() %in% c(\"salario\",\"contrato\", \"act_parad\")])\n##------------------------------Gráficos----------------------------------------\nhead(act_parad)\nporcentaje_parados <- act_parad %>%\ngroup_by(Año) %>%\ngroup_by(Año, grupo_edad) %>%\nmutate(Ocupados_edad = (num_ocupados / num_activos) * 100,\nParados_edad = (num_parados / num_activos) * 100) %>%\nrename(Periodo = Año)\nrm(list = ls()[!ls() %in% c(\"salario\",\"contrato\", \"porcentaje_parados\", \"vivienda\",\n\"act_parad\")])\ncontrato <- contrato %>%\nrename(jornada_completa = tiempo_completo,\njornada_parcial = tiempo_parcial,\ngrupo_edad = Edad)\nP2 <- ggplot(porcentaje_parados, aes(x = Periodo, y = Parados_edad, group = grupo_edad,\ncolor = grupo_edad)) +\ngeom_line() +\nscale_color_manual(values = c(\"blue\", \"red\")) +\ngeom_point( color=\"black\", size=2) +\ntheme_economist() +labs(title = \"Porcentaje de parados según la edad\", x = \"Periodo\", y =\n\"Porcentaje\", caption = \"Elaboración propia a partir de datos de INE\")\n\nplotly::ggplotly(P2)\n\n```\n\n\nEn este otro gráfico podemos observar además cómo la tasa de desempleo es muy superior en el caso de los menores de 35 años respecto a los mayores de 35 años, es decir, durante este primer tramo de edad, de 16 a 34 años, sufrirán un menor poder adquisitivo respecto a los mayores de 34 años.\n\n---\n\n## Porcentaje de contratos de Jornada completa por edad\n\n```{R}\np3 <- ggplot(contrato, aes(x = Periodo, y = jornada_completa, fill = grupo_edad)) +\n  geom_col(position = \"dodge\") +\n  scale_fill_manual(values = c(\"blue3\", \"red3\"), name = NULL) +\n  theme_economist() +\n  labs(title = \"Contratos de jornada completa según la edad\", x = \"Periodo\", y = \"Porcentaje\", caption = \"Elaboración propia a partir de datos de INE\") \nplotly::ggplotly(p3)\n```\n\n\nAdemás, en este gráfico de barras, podemos apreciar como los contratos a jornada completa han disminuido prácticamente 10 puntos porcentuales desde la Gran Recesión hasta nuestros días, mientras que los de los mayores de 35 años han permanecido estables.\n\nEl hecho de que los contratos no sean a jornada completa, influye de forma decisiva en que la renta final sea menor, ya que a menos horas trabajadas, menos horas cobradas.\n\n---\n\n# Índice del nivel de Precios de la vivienda a nivel nacional\n\nAhora vamos a analizar cómo se han comportado los precios de la vivienda en general. Primero lo vamos a hacer observando el comportamiento de los precios de forma general a nivel nacional. Luego veremos cómo se ha comportado en términos de tasas de variación, y más tarde, el nivel de precios por comunidades autónomas y en diferentes momentos del tiempo.\n\n```{R}\n#Paquetes preliminares\n#install.packages(\"mapSpain\")\nlibrary(mapSpain)\n#install.packages(\"pxR\")\nlibrary(pxR)\n#install.packages(\"tidyverse\")\nlibrary(tidyverse)\nlibrary(data.table)\nlibrary(rlist)\nlibrary(fs)\nlibrary(curl)\nlibrary(rio)\nlibrary(sf)\nlibrary(readxl)\nlibrary(downloader)\nlibrary(writexl)\n#install.packages(\"rlist\")\n# install.packages(\"devtools\")\n#devtools::install_github(\"r-lib/conflicted\")\n#Creamos una carpeta para guardar los datos\n#Descargamos los datos en formato PX desde el Ine\n#Índice de Precios de Vivienda por CCAA: general, vivienda nueva y de segunda mano\n#Como la URL es: \"https://www.ine.es/jaxiT3/files/t/es/px/25171.px?nocab=1\"\nurl <- \"https://www.ine.es/jaxiT3/files/t/es/px/25171.px?nocab=1\"\naa <- read.px(url)\n#Lo convertimos a CSV para simplificar y creamos un dataframe\nwrite.csv(aa, file = \"./datos_pulidos/data.csv\", sep = \",\")\n#Lo convertimos a CSV para simplificar y creamos un dataframe\nwrite.csv(aa, file = \"./datos_pulidos/data.csv\")\ndf <- read.csv(\"./datos_pulidos/data.csv\")\n#Ahora nos ponemos a curra un poquito:\nlibrary(ggthemes)\n#install.packages(\"plotly\")\nlibrary(plotly)\n#install.packages(\"ggExtra\")\nlibrary(ggExtra)\nlibrary(patchwork)\n#Os voy a matar con este código y esta sintaxis que me hacéis arreglar cada vez\ndf1 <- df %>% dplyr::rename(ámbito = Comunidades.y.Ciudades.Autónomas, tipo = \n                              General..vivienda.nueva.y.de.segunda.mano, Valor = value) %>% filter (tipo == \"General\", Índices.y.tasas == \"Índice\", ámbito == \"Nacional\")\n#rm (list = ls())\ndf1.1 <- df %>% rename(Territorio = Comunidades.y.Ciudades.Autónomas, tipo = General..vivienda.nueva.y.de.segunda.mano, Valor = value)\n\ndf1.2 <- df1.1 %>% mutate(Territorio = case_when( \n  Territorio == \"01 Andalucía\" ~ \"Andalucía\",\n  Territorio == \"02 Aragón\" ~ \"Aragón\",\n  Territorio == \"03 Asturias, Principado de\" ~ \"Asturias, Principado de\",\n  Territorio == \"04 Balears, Illes\" ~ \"Balears, Illes\",\n  Territorio == \"05 Canarias\" ~ \"Canarias\",\n  Territorio == \"06 Cantabria\" ~ \"Cantabria\",\n  Territorio == \"07 Castilla y León\" ~ \"Castilla y León\",\n  Territorio == \"08 Castilla - La Mancha\" ~ \"Castilla-La Mancha\",\n  Territorio == \"09 Cataluña\" ~ \"Cataluña\",\n  Territorio == \"10 Comunitat Valenciana\" ~ \"Comunitat Valenciana\",\n  Territorio == \"11 Extremadura\" ~ \"Extremadura\",\n  Territorio == \"12 Galicia\" ~ \"Galicia\",\n  Territorio == \"13 Madrid, Comunidad de\" ~ \"Madrid, Comunidad de\",\n  Territorio == \"14 Murcia, Región de\" ~ \"Murcia, Región de\",\n  Territorio == \"15 Navarra, Comunidad Foral de\" ~ \"Navarra, Comunidad Foral de\",\n  Territorio == \"16 País Vasco\" ~ \"País Vasco\",\n  Territorio == \"17 Rioja, La\" ~ \"Rioja, La\", \n  TRUE ~ Territorio))\n\ndf3 <- df1.2 %>% filter (tipo == \"General\", Índices.y.tasas == \"Índice\", !(Territorio %in% c(\"Nacional\", \"18 Ceuta\", \"19 Melilla\")))\nprov <- pjpv.curso.R.2022::LAU2_prov_2020_canarias\nccaa <- prov %>%\n  group_by(ine_ccaa, ine_ccaa.n, ine_ccaa.n.pjp) %>%\n  summarise() %>% ungroup()\n\nccaa <- ccaa %>% rename(Territorio = ine_ccaa.n)\ndf4 <- df3 %>% filter(Periodo == \"2023T3\")\ndf5 <- full_join(ccaa, df4, by = \"Territorio\") %>% filter( !(Territorio %in% c(\"Ceuta\", \"Melilla\")))\ndf6 <- df3 %>% \n  filter(Periodo == \"2018T3\")\ndf7 <- full_join(ccaa, df6, by = \"Territorio\") %>% filter( !(Territorio %in% c(\"Ceuta\", \"Melilla\")))\ndf8 <- df3 %>% filter(Periodo == \"2015T3\")\ndf9 <- full_join(ccaa, df8, by = \"Territorio\") %>% filter( !(Territorio %in% c(\"Ceuta\", \"Melilla\")))\ndf10 <- df3 %>% filter(Periodo == \"2011T3\")\ndf11 <- full_join(ccaa, df10, by = \"Territorio\") %>% filter( !(Territorio %in% c(\"Ceuta\", \"Melilla\")))\ndf12 <- df3 %>% filter(Periodo == \"2013T3\")\ndf13 <- full_join(ccaa, df12, by = \"Territorio\") %>% filter( !(Territorio %in% c(\"Ceuta\", \"Melilla\")))\ndf14 <- df3 %>% filter(Periodo == \"2007T3\")\ndf15 <- full_join(ccaa, df14, by = \"Territorio\") %>% filter( !(Territorio %in% c(\"Ceuta\", \"Melilla\")))\n\nlibrary(patchwork)\nescala_limites <- c(90, 190)\n\np4 <- ggplot(df5, aes(fill = Valor)) +\n  geom_sf() +\n  geom_sf_label(aes(label = as.character(Valor)), size = 3, color = \"black\") +\n  scale_fill_viridis_c(guide = \"legend\",limits = escala_limites) +\n  labs(title = \"Precios vivienda CCAA 2023T3 (100 = 2015)\",caption = \"Elaboración propia a partir de datos extraídos de INE\") +\n  theme_void() \n\np7 <- ggplot(df13, aes(fill = Valor)) +\n  geom_sf() +\n  geom_sf_label(aes(label = as.character(Valor)), size = 3, color = \"white\") +\n  scale_fill_viridis_c(guide = \"legend\",limits = escala_limites) +\n  labs(title = \"Precios vivienda CCAA 2013T3 (100 = 2015)\",caption = \"Elaboración propia a partir de datos extraídos de INE\") +\n  theme_void() \n\np9 <- ggplot(df15, aes(fill = Valor)) +\n  geom_sf() +\n  geom_sf_label(aes(label = as.character(Valor)), size = 3, color = \"black\") +\n  scale_fill_viridis_c(guide = \"legend\",limits = escala_limites) +\n  labs(title = \"Precios vivienda CCAA 20071T3 (100 = 2015)\",caption = \"Elaboración propia a partir de datos extraídos de INE\") +\n  theme_void() \n# Combinar los dos gráficos\np9\n\np7\n\np4\n\n```\n\nEstos mapas de coropletas reflejan los niveles de precios de la vivienda en 6 momentos diferentes del tiempo. El primero es del tercer trimestre del año 2007. En ese momento los precios, como podemos observar, son los más altos. Este es el punto más elevado de la burbuja. Los años siguientes reflejan el pinchazo de la burbuja, con un descenso continuado de los precios hasta 2013. Que es el punto más bajo. Hemos decidido poner el año 2015 por ser el año de la base 100. A partir de ahí, vemos cómo en los años posteriores los precios son ya más elevados que en 2015, y particularmente en 2023, ligeramente por\ndebajo, pero sin haber una burbuja. O, al menos, no parece haberla.\n\nAl ser mapas de coropletas podemos sacar conclusiones acerca de en qué comunidades han aumentado más los precios y por tanto, dónde es más difícil acceder a la vivienda, ceteris paribus. En el último gráfico destacan claramente la Comunidad de Madrid, Cataluña y Baleares. Esto no nos sorprende, tanto la Comunidad de Madrid, como Cataluña son regiones muy dinámicas donde, además, se encuentran las principales ciudades de España. Baleares, por su parte, es una de las regiones más turísticas, donde la oferta de inmuebles tampoco es demasiado elevada. Destacan también en segunda fila País Vasco (región muy dinámica), Andalucía y Canarias (regiones muy turísticas).\n\nTal vez os habéis fijado en que estos mapas no concuerdan exactamente con lo que hemos visto hace dos gráficos (se veía que el nivel general de precios de la vivienda es ahora igual al del punto más alto de la burbuja y, sin embargo, en los mapas parece que en 2007T3 los precios son mucho más elevados que en la actualidad).\n\nEsto se debe a que hay más viviendas allá donde más está subiendo el precio como se observa en el gráfico (que hay que insertar). La explicación de la afirmación anterior que parece a priori contradictoria, es que aunque hay más vivienda en esta zona (oferta elevada), la demanda es todavía más elevada que la oferta.\n\n\n---\n \n# Régimen de viviendas de 16 a 29 años\n\n```{R}\n#Hogares por regimen de tenencia edad\n#Cargamos liberías\nlibrary(ggplot2)\nlibrary(hrbrthemes)\nlibrary(tidyverse)\nlibrary(pxR)\n\nurl4 <- \"https://www.ine.es/jaxiT3/files/t/es/px/9994.px?nocab=1\"\nac <- read.px(url4)\nwrite.csv(ac, file = \"./datos_pulidos/data_1.csv\", sep = \",\")\nvivienda_edad <- read.csv(\"./datos_pulidos/data_1.csv\")\n\ndd <- vivienda_edad %>%\n  dplyr::rename(regimen = Régimen.de.tenencia.de.la.vivienda.principal, edad = Edad.de.la.persona.de.referencia, sexo = Sexo.de.la.persona.de.referencia) %>%\n  filter(edad == \"De 16 a 29 años\", sexo == \"Ambos sexos\")\n\np30 <- dd %>%\n  ggplot(aes(x = Periodo, y = value, fill = regimen)) +\n  geom_bar(stat = \"identity\", position = \"stack\") +\n  theme_ipsum() +\n  labs(x = \"Año\", y = \"% según régimen de tenencia\", \n       title = \"Régimen de vivienda de 16 a 29 años\",\n       subtitle = \"Datos porcentuales\",\n       caption = \"Elaboración propia a partir de datos del INE\") +\n  scale_fill_manual(values = c(\"#66c2a5\", \"#fc8d62\", \"#8da0cb\", \"#e78ac3\"), \n                    labels = c(\"Alquiler a precios de mercado\", \"Alquiler inferior al precio de mercado\", \"Cesión\", \"Propiedad\")) +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1), \n        plot.caption = element_text(hjust = 0.5),\n        plot.title = element_text(hjust = 0.5, color = \"black\", size = 18, face = \"bold\"),\n        plot.subtitle = element_text(hjust = 0.5, size = 14))\n  \n\np30\n```\n\nEn este gráfico podemos observar cómo el régimen de vivienda entre los jóvenes ha ido variando a lo largo del tiempo. La mayor sustitución ha sido de régimen de propiedad al de alquiler a precios de mercado. También ha aumentado ligeramente el régimen de cesión, es decir; los jóvenes se han trasladado a opciones más asequibles. Aunque los alquileres también suben en las grandes ciudades, siguen siendo opciones más asumibles que pagar la entrada de la hipoteca y su mensualidad, por no hablar de fórmulas utilizadas como el compartir piso.\n\n---\n\n# Otros gráficos bonitos pero poco útiles sobre el salario\n\n::: {.panel-tabset}\n\n# Rigeline por grupo de edad\n\n```{R}\nlibrary(tidyverse)\nlibrary(rio)\nlibrary(ggplot2)\nlibrary(ggridges)\n\ndf_edad <- import(\"./datos_pulidos/salario_grupo_edad.csv\")\n\np1<- ggplot(df_edad, aes(x = salario, y = grupo_edad, fill = grupo_edad)) +\n  geom_density_ridges() +\n  theme_ridges() + \n  theme(legend.position = \"none\")\n\np1\n```\n\n# Barras agrupadas por edad\n\n```{R}\nlibrary(tidyverse)\nlibrary(rio)\nlibrary(ggplot2)\nlibrary(ggridges)\n\ndf_edad <- import(\"./datos_pulidos/salario_grupo_edad.csv\")\n\ndf_edad_01 <- df_edad |> \n  filter(grupo_edad != \"Total\") |> \n  filter()\n\ndf_edad_01$year <- factor(df_edad_01$year)\n\np2 <- ggplot(df_edad_01, aes(fill = grupo_edad, y = salario, x = year))+\n  geom_bar(position = \"dodge\", stat = \"identity\")+\n  labs(title = \"Salario por grupo de edad\", caption = \"Elaboración propia a partir de datos extraídos de INE\")\n\np2\n```\n\n:::\n\n--- \n\n# Conclusiones:\n\nCon este trabajo hemos podido comprobar la situación precaria en la que se encuentran los jóvenes a la hora de acceder a la vivienda: salarios bajos, tasa de paro muy por encima del resto de las edades, pobreza relativa creciente, niveles de precios de la vivienda astronómicos…\nSi bien no hemos ahondado en las causas de esta situación ni en posibles soluciones, hemos querido al menos señalar de forma clara la situación. Nos afecta directamente y por ello creemos que es algo a lo que, por lo menos, deberíamos prestar atención. \n\nAdemás este tema está de actualidad en la academia por el lanzamiento del libro “La juventud atracada” de Ignacio Conde-Ruiz. En él se repasa lo visto en este trabajo además de la problemática con las pensiones y ahonda más en causas, consecuencias y soluciones. El propio Ignacio dio una charla en la UV hace unas semanas. Os adjuntamos una entrevista que hizo con el también economista Juan Ramón Rallo, en la que habla extensamente de su libro y su contenido.\n\n# Mas información sobre el tema\n\n<center><iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/live/EtIErMd1EYM?si=-LNzHLRcepGHZ-r5\"></iframe></center>\n\n\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"message":false,"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"show","code-overflow":"wrap","code-link":true,"code-line-numbers":true,"code-tools":true,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":true,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","highlight-style":"a11y","css":["my_styles.css"],"toc":true,"toc-depth":3,"output-file":"my_trabajo_BigData.html"},"language":{"toc-title-document":"Tabla de contenidos","toc-title-website":"En esta página","related-formats-title":"Otros formatos","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Fuente","section-title-abstract":"Resumen","section-title-appendices":"Apéndices","section-title-footnotes":"Notas","section-title-references":"Referencias","section-title-reuse":"Reutilización","section-title-copyright":"Derechos de autor","section-title-citation":"Cómo citar","appendix-attribution-cite-as":"Por favor, cita este trabajo como:","appendix-attribution-bibtex":"BibTeX","title-block-author-single":"Autor/a","title-block-author-plural":"Autores/as","title-block-affiliation-single":"Afiliación","title-block-affiliation-plural":"Afiliaciones","title-block-published":"Fecha de publicación","title-block-modified":"Fecha de modificación","callout-tip-title":"Tip","callout-note-title":"Nota","callout-warning-title":"Advertencia","callout-important-title":"Importante","callout-caution-title":"Precaución","code-summary":"Código","code-tools-menu-caption":"Código","code-tools-show-all-code":"Mostrar todo el código","code-tools-hide-all-code":"Ocultar todo el código","code-tools-view-source":"Ver el código fuente","code-tools-source-code":"Ejecutar el código","code-line":"Línea","code-lines":"Líneas","copy-button-tooltip":"Copiar al portapapeles","copy-button-tooltip-success":"Copiado","repo-action-links-edit":"Editar esta página","repo-action-links-source":"Ver el código","repo-action-links-issue":"Informar de un problema","back-to-top":"Volver arriba","search-no-results-text":"Sin resultados","search-matching-documents-text":"documentos encontrados","search-copy-link-title":"Copiar el enlace en la búsqueda","search-hide-matches-text":"Ocultar resultados adicionales","search-more-match-text":"resultado adicional en este documento","search-more-matches-text":"resultados adicionales en este documento","search-clear-button-title":"Borrar","search-detached-cancel-button-title":"Cancelar","search-submit-button-title":"Enviar","search":"Buscar","toggle-section":"Alternar sección","toggle-sidebar":"Alternar barra lateral","toggle-dark-mode":"Alternar modo oscuro","toggle-reader-mode":"Alternar modo lector","toggle-navigation":"Navegación de palanca","crossref-fig-title":"Figura","crossref-tbl-title":"Tabla","crossref-lst-title":"Listado","crossref-thm-title":"Teorema","crossref-lem-title":"Lema","crossref-cor-title":"Corolario","crossref-prp-title":"Proposición","crossref-cnj-title":"Conjetura","crossref-def-title":"Definición","crossref-exm-title":"Ejemplo","crossref-exr-title":"Ejercicio","crossref-ch-prefix":"Capítulo","crossref-apx-prefix":"Apéndice","crossref-sec-prefix":"Sección","crossref-eq-prefix":"Ecuación","crossref-lof-title":"Listado de Figuras","crossref-lot-title":"Listado de Tablas","crossref-lol-title":"Listado de Listados","environment-proof-title":"Prueba","environment-remark-title":"Observación","environment-solution-title":"Solución","listing-page-order-by":"Ordenar por","listing-page-order-by-default":"Por defecto","listing-page-order-by-date-asc":"Menos reciente","listing-page-order-by-date-desc":"Más reciente","listing-page-order-by-number-desc":"De mayor a menor","listing-page-order-by-number-asc":"De menor a mayor","listing-page-field-date":"Fecha","listing-page-field-title":"Título","listing-page-field-description":"Descripción","listing-page-field-author":"Autor/a","listing-page-field-filename":"Nombre de archivo","listing-page-field-filemodified":"Fecha de modificación","listing-page-field-subtitle":"Subtítulo","listing-page-field-readingtime":"Tiempo de lectura","listing-page-field-categories":"Categorías","listing-page-minutes-compact":"{0} minutos","listing-page-category-all":"Todas","listing-page-no-matches":"No hay resultados"},"metadata":{"lang":"es","fig-responsive":true,"quarto-version":"1.3.353","knitr":{"opts_chunk":{"collapse":true,"comment":"#>","fig.asp":"7/9","out.width":"95%","fig.align":"center","fig.show":"hold","R.options":"options(scipen = 999)"}},"theme":"sandstone","mainfont":"Lato","page-layout":"full","toc-location":"right","toc-title":"Índice","code-copy":true,"title":"VIVIENDA EN ESPAÑA","description":"Vamos a analizar el mercado de la vivienda y comprarlo con su accesibilidad de los jóvenes\n","author":["Joel Seguí\\n","Saúl Gil\\n","Pedro Peñalver"],"date":"2023-12-20","categories":["Trabajo BigData","Vivienda"],"image":"./imagenes/my_favicon.png","title-block-banner":true,"title-block-banner-color":"lightgrey","smooth-scroll":true},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}